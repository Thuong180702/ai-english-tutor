(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function Q1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Od={exports:{}},kl={};var Q0;function K1(){if(Q0)return kl;Q0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:c}}return kl.Fragment=e,kl.jsx=i,kl.jsxs=i,kl}var K0;function Y1(){return K0||(K0=1,Od.exports=K1()),Od.exports}var E=Y1(),Md={exports:{}},Ce={};var Y0;function X1(){if(Y0)return Ce;Y0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),A=Symbol.iterator;function K(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,ee={};function ge(M,Q,ae){this.props=M,this.context=Q,this.refs=ee,this.updater=ae||W}ge.prototype.isReactComponent={},ge.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},ge.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Ee(){}Ee.prototype=ge.prototype;function Se(M,Q,ae){this.props=M,this.context=Q,this.refs=ee,this.updater=ae||W}var ke=Se.prototype=new Ee;ke.constructor=Se,ie(ke,ge.prototype),ke.isPureReactComponent=!0;var Ye=Array.isArray;function Me(){}var N={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(M,Q,ae){var te=ae.ref;return{$$typeof:s,type:M,key:Q,ref:te!==void 0?te:null,props:ae}}function V(M,Q){return I(M.type,Q,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function L(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return Q[ae]})}var x=/\/+/g;function ht(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):Q.toString(36)}function _t(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Me,Me):(M.status="pending",M.then(function(Q){M.status==="pending"&&(M.status="fulfilled",M.value=Q)},function(Q){M.status==="pending"&&(M.status="rejected",M.reason=Q)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function F(M,Q,ae,te,pe){var Re=typeof M;(Re==="undefined"||Re==="boolean")&&(M=null);var Ve=!1;if(M===null)Ve=!0;else switch(Re){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(M.$$typeof){case s:case e:Ve=!0;break;case S:return Ve=M._init,F(Ve(M._payload),Q,ae,te,pe)}}if(Ve)return pe=pe(M),Ve=te===""?"."+ht(M,0):te,Ye(pe)?(ae="",Ve!=null&&(ae=Ve.replace(x,"$&/")+"/"),F(pe,Q,ae,"",function(wi){return wi})):pe!=null&&(D(pe)&&(pe=V(pe,ae+(pe.key==null||M&&M.key===pe.key?"":(""+pe.key).replace(x,"$&/")+"/")+Ve)),Q.push(pe)),1;Ve=0;var vt=te===""?".":te+":";if(Ye(M))for(var Qe=0;Qe<M.length;Qe++)te=M[Qe],Re=vt+ht(te,Qe),Ve+=F(te,Q,ae,Re,pe);else if(Qe=K(M),typeof Qe=="function")for(M=Qe.call(M),Qe=0;!(te=M.next()).done;)te=te.value,Re=vt+ht(te,Qe++),Ve+=F(te,Q,ae,Re,pe);else if(Re==="object"){if(typeof M.then=="function")return F(_t(M),Q,ae,te,pe);throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function re(M,Q,ae){if(M==null)return M;var te=[],pe=0;return F(M,te,"","",function(Re){return Q.call(ae,Re,pe++)}),te}function ne(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var He=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ye={map:re,forEach:function(M,Q,ae){re(M,function(){Q.apply(this,arguments)},ae)},count:function(M){var Q=0;return re(M,function(){Q++}),Q},toArray:function(M){return re(M,function(Q){return Q})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ce.Activity=w,Ce.Children=ye,Ce.Component=ge,Ce.Fragment=i,Ce.Profiler=l,Ce.PureComponent=Se,Ce.StrictMode=r,Ce.Suspense=y,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(M,Q,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var te=ie({},M.props),pe=M.key;if(Q!=null)for(Re in Q.key!==void 0&&(pe=""+Q.key),Q)!R.call(Q,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&Q.ref===void 0||(te[Re]=Q[Re]);var Re=arguments.length-2;if(Re===1)te.children=ae;else if(1<Re){for(var Ve=Array(Re),vt=0;vt<Re;vt++)Ve[vt]=arguments[vt+2];te.children=Ve}return I(M.type,pe,te)},Ce.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Ce.createElement=function(M,Q,ae){var te,pe={},Re=null;if(Q!=null)for(te in Q.key!==void 0&&(Re=""+Q.key),Q)R.call(Q,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(pe[te]=Q[te]);var Ve=arguments.length-2;if(Ve===1)pe.children=ae;else if(1<Ve){for(var vt=Array(Ve),Qe=0;Qe<Ve;Qe++)vt[Qe]=arguments[Qe+2];pe.children=vt}if(M&&M.defaultProps)for(te in Ve=M.defaultProps,Ve)pe[te]===void 0&&(pe[te]=Ve[te]);return I(M,Re,pe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:g,render:M}},Ce.isValidElement=D,Ce.lazy=function(M){return{$$typeof:S,_payload:{_status:-1,_result:M},_init:ne}},Ce.memo=function(M,Q){return{$$typeof:_,type:M,compare:Q===void 0?null:Q}},Ce.startTransition=function(M){var Q=N.T,ae={};N.T=ae;try{var te=M(),pe=N.S;pe!==null&&pe(ae,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Me,He)}catch(Re){He(Re)}finally{Q!==null&&ae.types!==null&&(Q.types=ae.types),N.T=Q}},Ce.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ce.use=function(M){return N.H.use(M)},Ce.useActionState=function(M,Q,ae){return N.H.useActionState(M,Q,ae)},Ce.useCallback=function(M,Q){return N.H.useCallback(M,Q)},Ce.useContext=function(M){return N.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,Q){return N.H.useDeferredValue(M,Q)},Ce.useEffect=function(M,Q){return N.H.useEffect(M,Q)},Ce.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Ce.useId=function(){return N.H.useId()},Ce.useImperativeHandle=function(M,Q,ae){return N.H.useImperativeHandle(M,Q,ae)},Ce.useInsertionEffect=function(M,Q){return N.H.useInsertionEffect(M,Q)},Ce.useLayoutEffect=function(M,Q){return N.H.useLayoutEffect(M,Q)},Ce.useMemo=function(M,Q){return N.H.useMemo(M,Q)},Ce.useOptimistic=function(M,Q){return N.H.useOptimistic(M,Q)},Ce.useReducer=function(M,Q,ae){return N.H.useReducer(M,Q,ae)},Ce.useRef=function(M){return N.H.useRef(M)},Ce.useState=function(M){return N.H.useState(M)},Ce.useSyncExternalStore=function(M,Q,ae){return N.H.useSyncExternalStore(M,Q,ae)},Ce.useTransition=function(){return N.H.useTransition()},Ce.version="19.2.0",Ce}var X0;function Cm(){return X0||(X0=1,Md.exports=X1()),Md.exports}var ve=Cm();const J1=Q1(ve);var Vd={exports:{}},Ll={},kd={exports:{}},Ld={};var J0;function Z1(){return J0||(J0=1,(function(s){function e(F,re){var ne=F.length;F.push(re);e:for(;0<ne;){var He=ne-1>>>1,ye=F[He];if(0<l(ye,re))F[He]=re,F[ne]=ye,ne=He;else break e}}function i(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var re=F[0],ne=F.pop();if(ne!==re){F[0]=ne;e:for(var He=0,ye=F.length,M=ye>>>1;He<M;){var Q=2*(He+1)-1,ae=F[Q],te=Q+1,pe=F[te];if(0>l(ae,ne))te<ye&&0>l(pe,ae)?(F[He]=pe,F[te]=ne,He=te):(F[He]=ae,F[Q]=ne,He=Q);else if(te<ye&&0>l(pe,ne))F[He]=pe,F[te]=ne,He=te;else break e}}return re}function l(F,re){var ne=F.sortIndex-re.sortIndex;return ne!==0?ne:F.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var y=[],_=[],S=1,w=null,A=3,K=!1,W=!1,ie=!1,ee=!1,ge=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,Se=typeof setImmediate<"u"?setImmediate:null;function ke(F){for(var re=i(_);re!==null;){if(re.callback===null)r(_);else if(re.startTime<=F)r(_),re.sortIndex=re.expirationTime,e(y,re);else break;re=i(_)}}function Ye(F){if(ie=!1,ke(F),!W)if(i(y)!==null)W=!0,Me||(Me=!0,L());else{var re=i(_);re!==null&&_t(Ye,re.startTime-F)}}var Me=!1,N=-1,R=5,I=-1;function V(){return ee?!0:!(s.unstable_now()-I<R)}function D(){if(ee=!1,Me){var F=s.unstable_now();I=F;var re=!0;try{e:{W=!1,ie&&(ie=!1,Ee(N),N=-1),K=!0;var ne=A;try{t:{for(ke(F),w=i(y);w!==null&&!(w.expirationTime>F&&V());){var He=w.callback;if(typeof He=="function"){w.callback=null,A=w.priorityLevel;var ye=He(w.expirationTime<=F);if(F=s.unstable_now(),typeof ye=="function"){w.callback=ye,ke(F),re=!0;break t}w===i(y)&&r(y),ke(F)}else r(y);w=i(y)}if(w!==null)re=!0;else{var M=i(_);M!==null&&_t(Ye,M.startTime-F),re=!1}}break e}finally{w=null,A=ne,K=!1}re=void 0}}finally{re?L():Me=!1}}}var L;if(typeof Se=="function")L=function(){Se(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ht=x.port2;x.port1.onmessage=D,L=function(){ht.postMessage(null)}}else L=function(){ge(D,0)};function _t(F,re){N=ge(function(){F(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(F){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var ne=A;A=re;try{return F()}finally{A=ne}},s.unstable_requestPaint=function(){ee=!0},s.unstable_runWithPriority=function(F,re){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ne=A;A=F;try{return re()}finally{A=ne}},s.unstable_scheduleCallback=function(F,re,ne){var He=s.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?He+ne:He):ne=He,F){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ne+ye,F={id:S++,callback:re,priorityLevel:F,startTime:ne,expirationTime:ye,sortIndex:-1},ne>He?(F.sortIndex=ne,e(_,F),i(y)===null&&F===i(_)&&(ie?(Ee(N),N=-1):ie=!0,_t(Ye,ne-He))):(F.sortIndex=ye,e(y,F),W||K||(W=!0,Me||(Me=!0,L()))),F},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(F){var re=A;return function(){var ne=A;A=re;try{return F.apply(this,arguments)}finally{A=ne}}}})(Ld)),Ld}var Z0;function W1(){return Z0||(Z0=1,kd.exports=Z1()),kd.exports}var Ud={exports:{}},on={};var W0;function eS(){if(W0)return on;W0=1;var s=Cm();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,_,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:y,containerInfo:_,implementation:S}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(y,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(y,_,null,S)},on.flushSync=function(y){var _=d.T,S=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=_,r.p=S,r.d.f()}},on.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(y,_))},on.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},on.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin),A=typeof _.integrity=="string"?_.integrity:void 0,K=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?r.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:K}):S==="script"&&r.d.X(y,{crossOrigin:w,integrity:A,fetchPriority:K,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},on.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=g(_.as,_.crossOrigin);r.d.M(y,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(y)},on.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,w=g(S,_.crossOrigin);r.d.L(y,S,{crossOrigin:w,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},on.preloadModule=function(y,_){if(typeof y=="string")if(_){var S=g(_.as,_.crossOrigin);r.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(y)},on.requestFormReset=function(y){r.d.r(y)},on.unstable_batchedUpdates=function(y,_){return y(_)},on.useFormState=function(y,_,S){return d.H.useFormState(y,_,S)},on.useFormStatus=function(){return d.H.useHostTransitionStatus()},on.version="19.2.0",on}var e_;function tS(){if(e_)return Ud.exports;e_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ud.exports=eS(),Ud.exports}var t_;function nS(){if(t_)return Ll;t_=1;var s=W1(),e=Cm(),i=tS();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function _(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,o=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return y(h),t;if(f===o)return y(h),n;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var p=!1,b=h.child;b;){if(b===a){p=!0,a=h,o=f;break}if(b===o){p=!0,o=h,a=f;break}b=b.sibling}if(!p){for(b=f.child;b;){if(b===a){p=!0,a=f,o=h;break}if(b===o){p=!0,o=f,a=h;break}b=b.sibling}if(!p)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function S(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=S(t),n!==null)return n;t=t.sibling}return null}var w=Object.assign,A=Symbol.for("react.element"),K=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),Se=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Ye=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function ht(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ie:return"Fragment";case ge:return"Profiler";case ee:return"StrictMode";case Ye:return"Suspense";case Me:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case Se:return t.displayName||"Context";case Ee:return(t._context.displayName||"Context")+".Consumer";case ke:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:ht(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return ht(t(n))}catch{}}return null}var _t=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},He=[],ye=-1;function M(t){return{current:t}}function Q(t){0>ye||(t.current=He[ye],He[ye]=null,ye--)}function ae(t,n){ye++,He[ye]=t.current,t.current=n}var te=M(null),pe=M(null),Re=M(null),Ve=M(null);function vt(t,n){switch(ae(Re,n),ae(pe,t),ae(te,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?p0(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=p0(n),t=y0(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(te),ae(te,t)}function Qe(){Q(te),Q(pe),Q(Re)}function wi(t){t.memoizedState!==null&&ae(Ve,t);var n=te.current,a=y0(n,t.type);n!==a&&(ae(pe,t),ae(te,a))}function Bn(t){pe.current===t&&(Q(te),Q(pe)),Ve.current===t&&(Q(Ve),Dl._currentValue=ne)}var es,oi;function xn(t){if(es===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);es=n&&n[1]||"",oi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+es+t+oi}var ts=!1;function fn(t,n){if(!t||ts)return"";ts=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(G){var B=G}Reflect.construct(t,[],X)}else{try{X.call()}catch(G){B=G}t.call(X.prototype)}}else{try{throw Error()}catch(G){B=G}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(G){if(G&&B&&typeof G.stack=="string")return[G.stack,B.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),p=f[0],b=f[1];if(p&&b){var C=p.split(`
`),P=b.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===P.length)for(o=C.length-1,h=P.length-1;1<=o&&0<=h&&C[o]!==P[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==P[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==P[h]){var $=`
`+C[o].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=o&&0<=h);break}}}finally{ts=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?xn(a):""}function Vs(t,n){switch(t.tag){case 26:case 27:case 5:return xn(t.type);case 16:return xn("Lazy");case 13:return t.child!==n&&n!==null?xn("Suspense Fallback"):xn("Suspense");case 19:return xn("SuspenseList");case 0:case 15:return fn(t.type,!1);case 11:return fn(t.type.render,!1);case 1:return fn(t.type,!0);case 31:return xn("Activity");default:return""}}function ks(t){try{var n="",a=null;do n+=Vs(t,a),a=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Et=Object.prototype.hasOwnProperty,Rt=s.unstable_scheduleCallback,Rn=s.unstable_cancelCallback,$t=s.unstable_shouldYield,Ls=s.unstable_requestPaint,Ot=s.unstable_now,ns=s.unstable_getCurrentPriorityLevel,xi=s.unstable_ImmediatePriority,is=s.unstable_UserBlockingPriority,Ri=s.unstable_NormalPriority,Sa=s.unstable_LowPriority,qn=s.unstable_IdlePriority,li=s.log,kr=s.unstable_setDisableYieldValue,Cn=null,Qt=null;function yn(t){if(typeof li=="function"&&kr(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Cn,t)}catch{}}var Ze=Math.clz32?Math.clz32:Lr,ui=Math.log,Ci=Math.LN2;function Lr(t){return t>>>=0,t===0?32:31-(ui(t)/Ci|0)|0}var Hn=256,ss=262144,Tt=4194304;function Gn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fn(t,n,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,p=t.pingedLanes;t=t.warmLanes;var b=o&134217727;return b!==0?(o=b&~f,o!==0?h=Gn(o):(p&=b,p!==0?h=Gn(p):a||(a=b&~t,a!==0&&(h=Gn(a))))):(b=o&~f,b!==0?h=Gn(b):p!==0?h=Gn(p):a||(a=o&~t,a!==0&&(h=Gn(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function In(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Bo(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aa(){var t=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),t}function Nn(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function rs(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wa(t,n,a,o,h,f){var p=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,C=t.expirationTimes,P=t.hiddenUpdates;for(a=p&~a;0<a;){var $=31-Ze(a),X=1<<$;b[$]=0,C[$]=-1;var B=P[$];if(B!==null)for(P[$]=null,$=0;$<B.length;$++){var G=B[$];G!==null&&(G.lane&=-536870913)}a&=~X}o!==0&&Ii(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(p&~n))}function Ii(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-Ze(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Ur(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var o=31-Ze(a),h=1<<o;h&n|t[o]&n&&(t[o]|=n),a&=~h}}function jr(t,n){var a=n&-n;return a=(a&42)!==0?1:as(a),(a&(t.suspendedLanes|n))!==0?0:a}function as(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function xa(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:z0(t.type))}function Dn(t,n){var a=re.p;try{return re.p=t,n()}finally{re.p=a}}var On=Math.random().toString(36).slice(2),St="__reactFiber$"+On,Mt="__reactProps$"+On,dn="__reactContainer$"+On,os="__reactEvents$"+On,qo="__reactListeners$"+On,Ra="__reactHandles$"+On,Ca="__reactResources$"+On,z="__reactMarker$"+On;function Us(t){delete t[St],delete t[Mt],delete t[os],delete t[qo],delete t[Ra]}function q(t){var n=t[St];if(n)return n;for(var a=t.parentNode;a;){if(n=a[dn]||a[St]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=A0(t);t!==null;){if(a=t[St])return a;t=A0(t)}return n}t=a,a=t.parentNode}return null}function oe(t){if(t=t[St]||t[dn]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function fe(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function be(t){var n=t[Ca];return n||(n=t[Ca]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _e(t){t[z]=!0}var At=new Set,rt={};function Fe(t,n){Vt(t,n),Vt(t+"Capture",n)}function Vt(t,n){for(rt[t]=n,t=0;t<n.length;t++)At.add(n[t])}var js=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ni={},$n={};function Ps(t){return Et.call($n,t)?!0:Et.call(Ni,t)?!1:js.test(t)?$n[t]=!0:(Ni[t]=!0,!1)}function zs(t,n,a){if(Ps(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Mn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function kt(t,n,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+o)}}function Kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bs(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ho(t,n,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(p){a=""+p,f.call(this,p)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function nt(t){if(!t._valueTracker){var n=Bs(t)?"checked":"value";t._valueTracker=Ho(t,n,""+t[n])}}function Pr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return t&&(o=Bs(t)?t.checked?"true":"false":t.value),t=o,t!==a?(n.setValue(t),!0):!1}function Di(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zr=/[\n"\\]/g;function _n(t){return t.replace(zr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ia(t,n,a,o,h,f,p,b){t.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?t.type=p:t.removeAttribute("type"),n!=null?p==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Kt(n)):t.value!==""+Kt(n)&&(t.value=""+Kt(n)):p!=="submit"&&p!=="reset"||t.removeAttribute("value"),n!=null?Go(t,p,Kt(n)):a!=null?Go(t,p,Kt(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+Kt(b):t.removeAttribute("name")}function pu(t,n,a,o,h,f,p,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){nt(t);return}a=a!=null?""+Kt(a):"",n=n!=null?""+Kt(n):a,b||n===t.value||(t.value=n),t.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=b?t.checked:!!o,t.defaultChecked=!!o,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.name=p),nt(t)}function Go(t,n,a){n==="number"&&Di(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function qs(t,n,a,o){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Kt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function yu(t,n,a){if(n!=null&&(n=""+Kt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Kt(a):""}function Hs(t,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(_t(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Kt(n),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),nt(t)}function vn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var _u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(t,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,a):typeof a!="number"||a===0||_u.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $o(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&Fo(t,h,o)}else for(var f in n)n.hasOwnProperty(f)&&Fo(t,f,n[f])}function Na(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(t){return Gs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function hi(){}var Qo=null;function Qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fs=null,Oi=null;function Br(t){var n=oe(t);if(n&&(t=n.stateNode)){var a=t[Mt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ia(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_n(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==t&&o.form===t.form){var h=o[Mt]||null;if(!h)throw Error(r(90));Ia(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===t.form&&Pr(o)}break e;case"textarea":yu(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&qs(t,!!a.multiple,n,!1)}}}var Oa=!1;function $s(t,n,a){if(Oa)return t(n,a);Oa=!0;try{var o=t(n);return o}finally{if(Oa=!1,(Fs!==null||Oi!==null)&&(fc(),Fs&&(n=Fs,t=Oi,Oi=Fs=null,Br(n),t)))for(n=0;n<t.length;n++)Br(t[n])}}function fi(t,n){var a=t.stateNode;if(a===null)return null;var o=a[Mt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qr=!1;if(Kn)try{var at={};Object.defineProperty(at,"passive",{get:function(){qr=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{qr=!1}var Mi=null,Ko=null,Hr=null;function Yo(){if(Hr)return Hr;var t,n=Ko,a=n.length,o,h="value"in Mi?Mi.value:Mi.textContent,f=h.length;for(t=0;t<a&&n[t]===h[t];t++);var p=a-t;for(o=1;o<=p&&n[a-o]===h[f-o];o++);return Hr=h.slice(t,1<o?1-o:void 0)}function Gr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ls(){return!0}function di(){return!1}function Zt(t){function n(a,o,h,f,p){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ls:di,this.isPropagationStopped=di,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),n}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Zt(us),Qs=w({},us,{view:0,detail:0}),Xo=Zt(Qs),Ks,Ma,ki,Va=w({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ys,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ki&&(ki&&t.type==="mousemove"?(Ks=t.screenX-ki.screenX,Ma=t.screenY-ki.screenY):Ma=Ks=0,ki=t),Ks)},movementY:function(t){return"movementY"in t?t.movementY:Ma}}),Jo=Zt(Va),Fr=w({},Va,{dataTransfer:0}),Eu=Zt(Fr),bu=w({},Qs,{relatedTarget:0}),$r=Zt(bu),Zo=w({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=Zt(Zo),ka=w({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Su=Zt(ka),Au=w({},us,{data:0}),Li=Zt(Au),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Ru[t])?!!n[t]:!1}function Ys(){return Cu}var mn=w({},Qs,{key:function(t){if(t.key){var n=wu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Gr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ys,charCode:function(t){return t.type==="keypress"?Gr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iu=Zt(mn),Nu=w({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cs=Zt(Nu),u=w({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ys}),m=Zt(u),v=w({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Zt(v),U=w({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Zt(U),se=w({},us,{newState:0,oldState:0}),Ne=Zt(se),Ct=[9,13,27,32],We=Kn&&"CompositionEvent"in window,pt=null;Kn&&"documentMode"in document&&(pt=document.documentMode);var Yn=Kn&&"TextEvent"in window&&!pt,Ui=Kn&&(!We||pt&&8<pt&&11>=pt),mi=" ",gi=!1;function Qr(t,n){switch(t){case"keyup":return Ct.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function yT(t,n){switch(t){case"compositionend":return La(n);case"keypress":return n.which!==32?null:(gi=!0,mi);case"textInput":return t=n.data,t===mi&&gi?null:t;default:return null}}function _T(t,n){if(Ua)return t==="compositionend"||!We&&Qr(t,n)?(t=Yo(),Hr=Ko=Mi=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ui&&n.locale!=="ko"?null:n.data;default:return null}}var vT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!vT[t.type]:n==="textarea"}function Cg(t,n,a,o){Fs?Oi?Oi.push(o):Oi=[o]:Fs=o,n=vc(n,"onChange"),0<n.length&&(a=new Vi("onChange","change",null,a,o),t.push({event:a,listeners:n}))}var Wo=null,el=null;function ET(t){c0(t,0)}function Du(t){var n=fe(t);if(Pr(n))return t}function Ig(t,n){if(t==="change")return n}var Ng=!1;if(Kn){var jh;if(Kn){var Ph="oninput"in document;if(!Ph){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),Ph=typeof Dg.oninput=="function"}jh=Ph}else jh=!1;Ng=jh&&(!document.documentMode||9<document.documentMode)}function Og(){Wo&&(Wo.detachEvent("onpropertychange",Mg),el=Wo=null)}function Mg(t){if(t.propertyName==="value"&&Du(el)){var n=[];Cg(n,el,t,Qn(t)),$s(ET,n)}}function bT(t,n,a){t==="focusin"?(Og(),Wo=n,el=a,Wo.attachEvent("onpropertychange",Mg)):t==="focusout"&&Og()}function TT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Du(el)}function ST(t,n){if(t==="click")return Du(n)}function AT(t,n){if(t==="input"||t==="change")return Du(n)}function wT(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Vn=typeof Object.is=="function"?Object.is:wT;function tl(t,n){if(Vn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Et.call(n,h)||!Vn(t[h],n[h]))return!1}return!0}function Vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kg(t,n){var a=Vg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=n&&o>=n)return{node:a,offset:n-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vg(a)}}function Lg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Lg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Ug(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Di(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Di(t.document)}return n}function zh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var xT=Kn&&"documentMode"in document&&11>=document.documentMode,ja=null,Bh=null,nl=null,qh=!1;function jg(t,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qh||ja==null||ja!==Di(o)||(o=ja,"selectionStart"in o&&zh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),nl&&tl(nl,o)||(nl=o,o=vc(Bh,"onSelect"),0<o.length&&(n=new Vi("onSelect","select",null,n,a),t.push({event:n,listeners:o}),n.target=ja)))}function Kr(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Pa={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},Hh={},Pg={};Kn&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Yr(t){if(Hh[t])return Hh[t];if(!Pa[t])return t;var n=Pa[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in Pg)return Hh[t]=n[a];return t}var zg=Yr("animationend"),Bg=Yr("animationiteration"),qg=Yr("animationstart"),RT=Yr("transitionrun"),CT=Yr("transitionstart"),IT=Yr("transitioncancel"),Hg=Yr("transitionend"),Gg=new Map,Gh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gh.push("scrollEnd");function pi(t,n){Gg.set(t,n),Fe(n,[t])}var Ou=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xn=[],za=0,Fh=0;function Mu(){for(var t=za,n=Fh=za=0;n<t;){var a=Xn[n];Xn[n++]=null;var o=Xn[n];Xn[n++]=null;var h=Xn[n];Xn[n++]=null;var f=Xn[n];if(Xn[n++]=null,o!==null&&h!==null){var p=o.pending;p===null?h.next=h:(h.next=p.next,p.next=h),o.pending=h}f!==0&&Fg(a,h,f)}}function Vu(t,n,a,o){Xn[za++]=t,Xn[za++]=n,Xn[za++]=a,Xn[za++]=o,Fh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function $h(t,n,a,o){return Vu(t,n,a,o),ku(t)}function Xr(t,n){return Vu(t,null,null,n),ku(t)}function Fg(t,n,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&n!==null&&(h=31-Ze(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[n]:o.push(n),n.lane=a|536870912),f):null}function ku(t){if(50<Al)throw Al=0,nd=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ba={};function NT(t,n,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,n,a,o){return new NT(t,n,a,o)}function Qh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hs(t,n){var a=t.alternate;return a===null?(a=kn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $g(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Lu(t,n,a,o,h,f){var p=0;if(o=t,typeof t=="function")Qh(t)&&(p=1);else if(typeof t=="string")p=k1(t,a,te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=kn(31,a,n,h),t.elementType=I,t.lanes=f,t;case ie:return Jr(a.children,h,f,n);case ee:p=8,h|=24;break;case ge:return t=kn(12,a,n,h|2),t.elementType=ge,t.lanes=f,t;case Ye:return t=kn(13,a,n,h),t.elementType=Ye,t.lanes=f,t;case Me:return t=kn(19,a,n,h),t.elementType=Me,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Se:p=10;break e;case Ee:p=9;break e;case ke:p=11;break e;case N:p=14;break e;case R:p=16,o=null;break e}p=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return n=kn(p,a,n,h),n.elementType=t,n.type=o,n.lanes=f,n}function Jr(t,n,a,o){return t=kn(7,t,o,n),t.lanes=a,t}function Kh(t,n,a){return t=kn(6,t,null,n),t.lanes=a,t}function Qg(t){var n=kn(18,null,null,0);return n.stateNode=t,n}function Yh(t,n,a){return n=kn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Kg=new WeakMap;function Jn(t,n){if(typeof t=="object"&&t!==null){var a=Kg.get(t);return a!==void 0?a:(n={value:t,source:n,stack:ks(n)},Kg.set(t,n),n)}return{value:t,source:n,stack:ks(n)}}var qa=[],Ha=0,Uu=null,il=0,Zn=[],Wn=0,Xs=null,ji=1,Pi="";function fs(t,n){qa[Ha++]=il,qa[Ha++]=Uu,Uu=t,il=n}function Yg(t,n,a){Zn[Wn++]=ji,Zn[Wn++]=Pi,Zn[Wn++]=Xs,Xs=t;var o=ji;t=Pi;var h=32-Ze(o)-1;o&=~(1<<h),a+=1;var f=32-Ze(n)+h;if(30<f){var p=h-h%5;f=(o&(1<<p)-1).toString(32),o>>=p,h-=p,ji=1<<32-Ze(n)+h|a<<h|o,Pi=f+t}else ji=1<<f|a<<h|o,Pi=t}function Xh(t){t.return!==null&&(fs(t,1),Yg(t,1,0))}function Jh(t){for(;t===Uu;)Uu=qa[--Ha],qa[Ha]=null,il=qa[--Ha],qa[Ha]=null;for(;t===Xs;)Xs=Zn[--Wn],Zn[Wn]=null,Pi=Zn[--Wn],Zn[Wn]=null,ji=Zn[--Wn],Zn[Wn]=null}function Xg(t,n){Zn[Wn++]=ji,Zn[Wn++]=Pi,Zn[Wn++]=Xs,ji=n.id,Pi=n.overflow,Xs=t}var Wt=null,dt=null,Ge=!1,Js=null,ei=!1,Zh=Error(r(519));function Zs(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sl(Jn(n,t)),Zh}function Jg(t){var n=t.stateNode,a=t.type,o=t.memoizedProps;switch(n[St]=t,n[Mt]=o,a){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(a=0;a<xl.length;a++)Ue(xl[a],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":Ue("invalid",n),pu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ue("invalid",n);break;case"textarea":Ue("invalid",n),Hs(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||m0(n.textContent,a)?(o.popover!=null&&(Ue("beforetoggle",n),Ue("toggle",n)),o.onScroll!=null&&Ue("scroll",n),o.onScrollEnd!=null&&Ue("scrollend",n),o.onClick!=null&&(n.onclick=hi),n=!0):n=!1,n||Zs(t,!0)}function Zg(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:Wt=Wt.return}}function Ga(t){if(t!==Wt)return!1;if(!Ge)return Zg(t),Ge=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||yd(t.type,t.memoizedProps)),a=!a),a&&dt&&Zs(t),Zg(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=S0(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=S0(t)}else n===27?(n=dt,fr(t.type)?(t=Td,Td=null,dt=t):dt=n):dt=Wt?ni(t.stateNode.nextSibling):null;return!0}function Zr(){dt=Wt=null,Ge=!1}function Wh(){var t=Js;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Js=null),t}function sl(t){Js===null?Js=[t]:Js.push(t)}var ef=M(null),Wr=null,ds=null;function Ws(t,n,a){ae(ef,n._currentValue),n._currentValue=a}function ms(t){t._currentValue=ef.current,Q(ef)}function tf(t,n,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===a)break;t=t.return}}function nf(t,n,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var p=h.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=h;for(var C=0;C<n.length;C++)if(b.context===n[C]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),tf(f.return,a,t),o||(p=null);break e}f=b.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(r(341));p.lanes|=a,f=p.alternate,f!==null&&(f.lanes|=a),tf(p,a,t),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function Fa(t,n,a,o){t=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(r(387));if(p=p.memoizedProps,p!==null){var b=h.type;Vn(h.pendingProps.value,p.value)||(t!==null?t.push(b):t=[b])}}else if(h===Ve.current){if(p=h.alternate,p===null)throw Error(r(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Dl):t=[Dl])}h=h.return}t!==null&&nf(n,t,a,o),n.flags|=262144}function ju(t){for(t=t.firstContext;t!==null;){if(!Vn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ea(t){Wr=t,ds=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function en(t){return Wg(Wr,t)}function Pu(t,n){return Wr===null&&ea(t),Wg(t,n)}function Wg(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ds===null){if(t===null)throw Error(r(308));ds=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ds=ds.next=n;return a}var DT=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},OT=s.unstable_scheduleCallback,MT=s.unstable_NormalPriority,Lt={$$typeof:Se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new DT,data:new Map,refCount:0}}function rl(t){t.refCount--,t.refCount===0&&OT(MT,function(){t.controller.abort()})}var al=null,rf=0,$a=0,Qa=null;function VT(t,n){if(al===null){var a=al=[];rf=0,$a=ld(),Qa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return rf++,n.then(ep,ep),n}function ep(){if(--rf===0&&al!==null){Qa!==null&&(Qa.status="fulfilled");var t=al;al=null,$a=0,Qa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function kT(t,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var tp=F.S;F.S=function(t,n){jy=Ot(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&VT(t,n),tp!==null&&tp(t,n)};var ta=M(null);function af(){var t=ta.current;return t!==null?t:ct.pooledCache}function zu(t,n){n===null?ae(ta,ta.current):ae(ta,n.pool)}function np(){var t=af();return t===null?null:{parent:Lt._currentValue,pool:t}}var Ka=Error(r(460)),of=Error(r(474)),Bu=Error(r(542)),qu={then:function(){}};function ip(t){return t=t.status,t==="fulfilled"||t==="rejected"}function sp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(hi,hi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,ap(t),t;default:if(typeof n.status=="string")n.then(hi,hi);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,ap(t),t}throw ia=n,Ka}}function na(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ia=a,Ka):a}}var ia=null;function rp(){if(ia===null)throw Error(r(459));var t=ia;return ia=null,t}function ap(t){if(t===Ka||t===Bu)throw Error(r(483))}var Ya=null,ol=0;function Hu(t){var n=ol;return ol+=1,Ya===null&&(Ya=[]),sp(Ya,t,n)}function ll(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Gu(t,n){throw n.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function op(t){function n(k,O){if(t){var j=k.deletions;j===null?(k.deletions=[O],k.flags|=16):j.push(O)}}function a(k,O){if(!t)return null;for(;O!==null;)n(k,O),O=O.sibling;return null}function o(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function h(k,O){return k=hs(k,O),k.index=0,k.sibling=null,k}function f(k,O,j){return k.index=j,t?(j=k.alternate,j!==null?(j=j.index,j<O?(k.flags|=67108866,O):j):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function p(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function b(k,O,j,Y){return O===null||O.tag!==6?(O=Kh(j,k.mode,Y),O.return=k,O):(O=h(O,j),O.return=k,O)}function C(k,O,j,Y){var de=j.type;return de===ie?$(k,O,j.props.children,Y,j.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&na(de)===O.type)?(O=h(O,j.props),ll(O,j),O.return=k,O):(O=Lu(j.type,j.key,j.props,null,k.mode,Y),ll(O,j),O.return=k,O)}function P(k,O,j,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=Yh(j,k.mode,Y),O.return=k,O):(O=h(O,j.children||[]),O.return=k,O)}function $(k,O,j,Y,de){return O===null||O.tag!==7?(O=Jr(j,k.mode,Y,de),O.return=k,O):(O=h(O,j),O.return=k,O)}function X(k,O,j){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Kh(""+O,k.mode,j),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case K:return j=Lu(O.type,O.key,O.props,null,k.mode,j),ll(j,O),j.return=k,j;case W:return O=Yh(O,k.mode,j),O.return=k,O;case R:return O=na(O),X(k,O,j)}if(_t(O)||L(O))return O=Jr(O,k.mode,j,null),O.return=k,O;if(typeof O.then=="function")return X(k,Hu(O),j);if(O.$$typeof===Se)return X(k,Pu(k,O),j);Gu(k,O)}return null}function B(k,O,j,Y){var de=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return de!==null?null:b(k,O,""+j,Y);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case K:return j.key===de?C(k,O,j,Y):null;case W:return j.key===de?P(k,O,j,Y):null;case R:return j=na(j),B(k,O,j,Y)}if(_t(j)||L(j))return de!==null?null:$(k,O,j,Y,null);if(typeof j.then=="function")return B(k,O,Hu(j),Y);if(j.$$typeof===Se)return B(k,O,Pu(k,j),Y);Gu(k,j)}return null}function G(k,O,j,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(j)||null,b(O,k,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case K:return k=k.get(Y.key===null?j:Y.key)||null,C(O,k,Y,de);case W:return k=k.get(Y.key===null?j:Y.key)||null,P(O,k,Y,de);case R:return Y=na(Y),G(k,O,j,Y,de)}if(_t(Y)||L(Y))return k=k.get(j)||null,$(O,k,Y,de,null);if(typeof Y.then=="function")return G(k,O,j,Hu(Y),de);if(Y.$$typeof===Se)return G(k,O,j,Pu(O,Y),de);Gu(O,Y)}return null}function ce(k,O,j,Y){for(var de=null,Xe=null,he=O,Oe=O=0,Pe=null;he!==null&&Oe<j.length;Oe++){he.index>Oe?(Pe=he,he=null):Pe=he.sibling;var Je=B(k,he,j[Oe],Y);if(Je===null){he===null&&(he=Pe);break}t&&he&&Je.alternate===null&&n(k,he),O=f(Je,O,Oe),Xe===null?de=Je:Xe.sibling=Je,Xe=Je,he=Pe}if(Oe===j.length)return a(k,he),Ge&&fs(k,Oe),de;if(he===null){for(;Oe<j.length;Oe++)he=X(k,j[Oe],Y),he!==null&&(O=f(he,O,Oe),Xe===null?de=he:Xe.sibling=he,Xe=he);return Ge&&fs(k,Oe),de}for(he=o(he);Oe<j.length;Oe++)Pe=G(he,k,Oe,j[Oe],Y),Pe!==null&&(t&&Pe.alternate!==null&&he.delete(Pe.key===null?Oe:Pe.key),O=f(Pe,O,Oe),Xe===null?de=Pe:Xe.sibling=Pe,Xe=Pe);return t&&he.forEach(function(yr){return n(k,yr)}),Ge&&fs(k,Oe),de}function Te(k,O,j,Y){if(j==null)throw Error(r(151));for(var de=null,Xe=null,he=O,Oe=O=0,Pe=null,Je=j.next();he!==null&&!Je.done;Oe++,Je=j.next()){he.index>Oe?(Pe=he,he=null):Pe=he.sibling;var yr=B(k,he,Je.value,Y);if(yr===null){he===null&&(he=Pe);break}t&&he&&yr.alternate===null&&n(k,he),O=f(yr,O,Oe),Xe===null?de=yr:Xe.sibling=yr,Xe=yr,he=Pe}if(Je.done)return a(k,he),Ge&&fs(k,Oe),de;if(he===null){for(;!Je.done;Oe++,Je=j.next())Je=X(k,Je.value,Y),Je!==null&&(O=f(Je,O,Oe),Xe===null?de=Je:Xe.sibling=Je,Xe=Je);return Ge&&fs(k,Oe),de}for(he=o(he);!Je.done;Oe++,Je=j.next())Je=G(he,k,Oe,Je.value,Y),Je!==null&&(t&&Je.alternate!==null&&he.delete(Je.key===null?Oe:Je.key),O=f(Je,O,Oe),Xe===null?de=Je:Xe.sibling=Je,Xe=Je);return t&&he.forEach(function($1){return n(k,$1)}),Ge&&fs(k,Oe),de}function ut(k,O,j,Y){if(typeof j=="object"&&j!==null&&j.type===ie&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case K:e:{for(var de=j.key;O!==null;){if(O.key===de){if(de=j.type,de===ie){if(O.tag===7){a(k,O.sibling),Y=h(O,j.props.children),Y.return=k,k=Y;break e}}else if(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&na(de)===O.type){a(k,O.sibling),Y=h(O,j.props),ll(Y,j),Y.return=k,k=Y;break e}a(k,O);break}else n(k,O);O=O.sibling}j.type===ie?(Y=Jr(j.props.children,k.mode,Y,j.key),Y.return=k,k=Y):(Y=Lu(j.type,j.key,j.props,null,k.mode,Y),ll(Y,j),Y.return=k,k=Y)}return p(k);case W:e:{for(de=j.key;O!==null;){if(O.key===de)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){a(k,O.sibling),Y=h(O,j.children||[]),Y.return=k,k=Y;break e}else{a(k,O);break}else n(k,O);O=O.sibling}Y=Yh(j,k.mode,Y),Y.return=k,k=Y}return p(k);case R:return j=na(j),ut(k,O,j,Y)}if(_t(j))return ce(k,O,j,Y);if(L(j)){if(de=L(j),typeof de!="function")throw Error(r(150));return j=de.call(j),Te(k,O,j,Y)}if(typeof j.then=="function")return ut(k,O,Hu(j),Y);if(j.$$typeof===Se)return ut(k,O,Pu(k,j),Y);Gu(k,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,O!==null&&O.tag===6?(a(k,O.sibling),Y=h(O,j),Y.return=k,k=Y):(a(k,O),Y=Kh(j,k.mode,Y),Y.return=k,k=Y),p(k)):a(k,O)}return function(k,O,j,Y){try{ol=0;var de=ut(k,O,j,Y);return Ya=null,de}catch(he){if(he===Ka||he===Bu)throw he;var Xe=kn(29,he,null,k.mode);return Xe.lanes=Y,Xe.return=k,Xe}finally{}}}var sa=op(!0),lp=op(!1),er=!1;function lf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function uf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function tr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function nr(t,n,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(et&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=ku(t),Fg(t,null,a),n}return Vu(t,o,n,a),ku(t)}function ul(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,Ur(t,a)}}function cf(t,n){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=p:f=f.next=p,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var hf=!1;function cl(){if(hf){var t=Qa;if(t!==null)throw t}}function hl(t,n,a,o){hf=!1;var h=t.updateQueue;er=!1;var f=h.firstBaseUpdate,p=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var C=b,P=C.next;C.next=null,p===null?f=P:p.next=P,p=C;var $=t.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==p&&(b===null?$.firstBaseUpdate=P:b.next=P,$.lastBaseUpdate=C))}if(f!==null){var X=h.baseState;p=0,$=P=C=null,b=f;do{var B=b.lane&-536870913,G=B!==b.lane;if(G?(je&B)===B:(o&B)===B){B!==0&&B===$a&&(hf=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ce=t,Te=b;B=n;var ut=a;switch(Te.tag){case 1:if(ce=Te.payload,typeof ce=="function"){X=ce.call(ut,X,B);break e}X=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Te.payload,B=typeof ce=="function"?ce.call(ut,X,B):ce,B==null)break e;X=w({},X,B);break e;case 2:er=!0}}B=b.callback,B!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[B]:G.push(B))}else G={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(P=$=G,C=X):$=$.next=G,p|=B;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;G=b,b=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);$===null&&(C=X),h.baseState=C,h.firstBaseUpdate=P,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),or|=p,t.lanes=p,t.memoizedState=X}}function up(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function cp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)up(a[t],n)}var Xa=M(null),Fu=M(0);function hp(t,n){t=Ss,ae(Fu,t),ae(Xa,n),Ss=t|n.baseLanes}function ff(){ae(Fu,Ss),ae(Xa,Xa.current)}function df(){Ss=Fu.current,Q(Xa),Q(Fu)}var Ln=M(null),ti=null;function ir(t){var n=t.alternate;ae(It,It.current&1),ae(Ln,t),ti===null&&(n===null||Xa.current!==null||n.memoizedState!==null)&&(ti=t)}function mf(t){ae(It,It.current),ae(Ln,t),ti===null&&(ti=t)}function fp(t){t.tag===22?(ae(It,It.current),ae(Ln,t),ti===null&&(ti=t)):sr()}function sr(){ae(It,It.current),ae(Ln,Ln.current)}function Un(t){Q(Ln),ti===t&&(ti=null),Q(It)}var It=M(0);function $u(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ed(a)||bd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var gs=0,De=null,ot=null,Ut=null,Qu=!1,Ja=!1,ra=!1,Ku=0,fl=0,Za=null,LT=0;function wt(){throw Error(r(321))}function gf(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Vn(t[a],n[a]))return!1;return!0}function pf(t,n,a,o,h,f){return gs=f,De=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=t===null||t.memoizedState===null?Yp:Df,ra=!1,f=a(o,h),ra=!1,Ja&&(f=mp(n,a,o,h)),dp(t),f}function dp(t){F.H=gl;var n=ot!==null&&ot.next!==null;if(gs=0,Ut=ot=De=null,Qu=!1,fl=0,Za=null,n)throw Error(r(300));t===null||jt||(t=t.dependencies,t!==null&&ju(t)&&(jt=!0))}function mp(t,n,a,o){De=t;var h=0;do{if(Ja&&(Za=null),fl=0,Ja=!1,25<=h)throw Error(r(301));if(h+=1,Ut=ot=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=Xp,f=n(a,o)}while(Ja);return f}function UT(){var t=F.H,n=t.useState()[0];return n=typeof n.then=="function"?dl(n):n,t=t.useState()[0],(ot!==null?ot.memoizedState:null)!==t&&(De.flags|=1024),n}function yf(){var t=Ku!==0;return Ku=0,t}function _f(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function vf(t){if(Qu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Qu=!1}gs=0,Ut=ot=De=null,Ja=!1,fl=Ku=0,Za=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?De.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function Nt(){if(ot===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var n=Ut===null?De.memoizedState:Ut.next;if(n!==null)Ut=n,ot=t;else{if(t===null)throw De.alternate===null?Error(r(467)):Error(r(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Ut===null?De.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function Yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(t){var n=fl;return fl+=1,Za===null&&(Za=[]),t=sp(Za,t,n),n=De,(Ut===null?n.memoizedState:Ut.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?Yp:Df),t}function Xu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return dl(t);if(t.$$typeof===Se)return en(t)}throw Error(r(438,String(t)))}function Ef(t){var n=null,a=De.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=De.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Yu(),De.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),o=0;o<t;o++)a[o]=V;return n.index++,a}function ps(t,n){return typeof n=="function"?n(t):n}function Ju(t){var n=Nt();return bf(n,ot,t)}function bf(t,n,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var p=h.next;h.next=f.next,f.next=p}n.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{n=h.next;var b=p=null,C=null,P=n,$=!1;do{var X=P.lane&-536870913;if(X!==P.lane?(je&X)===X:(gs&X)===X){var B=P.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),X===$a&&($=!0);else if((gs&B)===B){P=P.next,B===$a&&($=!0);continue}else X={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(b=C=X,p=f):C=C.next=X,De.lanes|=B,or|=B;X=P.action,ra&&a(f,X),f=P.hasEagerState?P.eagerState:a(f,X)}else B={lane:X,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(b=C=B,p=f):C=C.next=B,De.lanes|=X,or|=X;P=P.next}while(P!==null&&P!==n);if(C===null?p=f:C.next=b,!Vn(f,t.memoizedState)&&(jt=!0,$&&(a=Qa,a!==null)))throw a;t.memoizedState=f,t.baseState=p,t.baseQueue=C,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Tf(t){var n=Nt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var p=h=h.next;do f=t(f,p.action),p=p.next;while(p!==h);Vn(f,n.memoizedState)||(jt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function gp(t,n,a){var o=De,h=Nt(),f=Ge;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var p=!Vn((ot||h).memoizedState,a);if(p&&(h.memoizedState=a,jt=!0),h=h.queue,wf(_p.bind(null,o,h,t),[t]),h.getSnapshot!==n||p||Ut!==null&&Ut.memoizedState.tag&1){if(o.flags|=2048,Wa(9,{destroy:void 0},yp.bind(null,o,h,a,n),null),ct===null)throw Error(r(349));f||(gs&127)!==0||pp(o,n,a)}return a}function pp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=De.updateQueue,n===null?(n=Yu(),De.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function yp(t,n,a,o){n.value=a,n.getSnapshot=o,vp(n)&&Ep(t)}function _p(t,n,a){return a(function(){vp(n)&&Ep(t)})}function vp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Vn(t,a)}catch{return!0}}function Ep(t){var n=Xr(t,2);n!==null&&An(n,t,2)}function Sf(t){var n=gn();if(typeof t=="function"){var a=t;if(t=a(),ra){yn(!0);try{a()}finally{yn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:t},n}function bp(t,n,a,o){return t.baseState=a,bf(t,ot,typeof o=="function"?o:ps)}function jT(t,n,a,o,h){if(ec(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){f.listeners.push(p)}};F.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Tp(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Tp(t,n){var a=n.action,o=n.payload,h=t.state;if(n.isTransition){var f=F.T,p={};F.T=p;try{var b=a(h,o),C=F.S;C!==null&&C(p,b),Sp(t,n,b)}catch(P){Af(t,n,P)}finally{f!==null&&p.types!==null&&(f.types=p.types),F.T=f}}else try{f=a(h,o),Sp(t,n,f)}catch(P){Af(t,n,P)}}function Sp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ap(t,n,o)},function(o){return Af(t,n,o)}):Ap(t,n,a)}function Ap(t,n,a){n.status="fulfilled",n.value=a,wp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Tp(t,a)))}function Af(t,n,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,wp(n),n=n.next;while(n!==o)}t.action=null}function wp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function xp(t,n){return n}function Rp(t,n){if(Ge){var a=ct.formState;if(a!==null){e:{var o=De;if(Ge){if(dt){t:{for(var h=dt,f=ei;h.nodeType!==8;){if(!f){h=null;break t}if(h=ni(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){dt=ni(h.nextSibling),o=h.data==="F!";break e}}Zs(o)}o=!1}o&&(n=a[0])}}return a=gn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xp,lastRenderedState:n},a.queue=o,a=$p.bind(null,De,o),o.dispatch=a,o=Sf(!1),f=Nf.bind(null,De,!1,o.queue),o=gn(),h={state:n,dispatch:null,action:t,pending:null},o.queue=h,a=jT.bind(null,De,h,f,a),h.dispatch=a,o.memoizedState=t,[n,a,!1]}function Cp(t){var n=Nt();return Ip(n,ot,t)}function Ip(t,n,a){if(n=bf(t,n,xp)[0],t=Ju(ps)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=dl(n)}catch(p){throw p===Ka?Bu:p}else o=n;n=Nt();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(De.flags|=2048,Wa(9,{destroy:void 0},PT.bind(null,h,a),null)),[o,f,t]}function PT(t,n){t.action=n}function Np(t){var n=Nt(),a=ot;if(a!==null)return Ip(n,a,t);Nt(),n=n.memoizedState,a=Nt();var o=a.queue.dispatch;return a.memoizedState=t,[n,o,!1]}function Wa(t,n,a,o){return t={tag:t,create:a,deps:o,inst:n,next:null},n=De.updateQueue,n===null&&(n=Yu(),De.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,n.lastEffect=t),t}function Dp(){return Nt().memoizedState}function Zu(t,n,a,o){var h=gn();De.flags|=t,h.memoizedState=Wa(1|n,{destroy:void 0},a,o===void 0?null:o)}function Wu(t,n,a,o){var h=Nt();o=o===void 0?null:o;var f=h.memoizedState.inst;ot!==null&&o!==null&&gf(o,ot.memoizedState.deps)?h.memoizedState=Wa(n,f,a,o):(De.flags|=t,h.memoizedState=Wa(1|n,f,a,o))}function Op(t,n){Zu(8390656,8,t,n)}function wf(t,n){Wu(2048,8,t,n)}function zT(t){De.flags|=4;var n=De.updateQueue;if(n===null)n=Yu(),De.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Mp(t){var n=Nt().memoizedState;return zT({ref:n,nextImpl:t}),function(){if((et&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Vp(t,n){return Wu(4,2,t,n)}function kp(t,n){return Wu(4,4,t,n)}function Lp(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Up(t,n,a){a=a!=null?a.concat([t]):null,Wu(4,4,Lp.bind(null,n,t),a)}function xf(){}function jp(t,n){var a=Nt();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&gf(n,o[1])?o[0]:(a.memoizedState=[t,n],t)}function Pp(t,n){var a=Nt();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&gf(n,o[1]))return o[0];if(o=t(),ra){yn(!0);try{t()}finally{yn(!1)}}return a.memoizedState=[o,n],o}function Rf(t,n,a){return a===void 0||(gs&1073741824)!==0&&(je&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=zy(),De.lanes|=t,or|=t,a)}function zp(t,n,a,o){return Vn(a,n)?a:Xa.current!==null?(t=Rf(t,a,o),Vn(t,n)||(jt=!0),t):(gs&42)===0||(gs&1073741824)!==0&&(je&261930)===0?(jt=!0,t.memoizedState=a):(t=zy(),De.lanes|=t,or|=t,n)}function Bp(t,n,a,o,h){var f=re.p;re.p=f!==0&&8>f?f:8;var p=F.T,b={};F.T=b,Nf(t,!1,n,a);try{var C=h(),P=F.S;if(P!==null&&P(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var $=kT(C,o);ml(t,n,$,zn(t))}else ml(t,n,o,zn(t))}catch(X){ml(t,n,{then:function(){},status:"rejected",reason:X},zn())}finally{re.p=f,p!==null&&b.types!==null&&(p.types=b.types),F.T=p}}function BT(){}function Cf(t,n,a,o){if(t.tag!==5)throw Error(r(476));var h=qp(t).queue;Bp(t,h,n,ne,a===null?BT:function(){return Hp(t),a(o)})}function qp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:ne},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Hp(t){var n=qp(t);n.next===null&&(n=t.alternate.memoizedState),ml(t,n.next.queue,{},zn())}function If(){return en(Dl)}function Gp(){return Nt().memoizedState}function Fp(){return Nt().memoizedState}function qT(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=zn();t=tr(a);var o=nr(n,t,a);o!==null&&(An(o,n,a),ul(o,n,a)),n={cache:sf()},t.payload=n;return}n=n.return}}function HT(t,n,a){var o=zn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ec(t)?Qp(n,a):(a=$h(t,n,a,o),a!==null&&(An(a,t,o),Kp(a,n,o)))}function $p(t,n,a){var o=zn();ml(t,n,a,o)}function ml(t,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(t))Qp(n,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var p=n.lastRenderedState,b=f(p,a);if(h.hasEagerState=!0,h.eagerState=b,Vn(b,p))return Vu(t,n,h,0),ct===null&&Mu(),!1}catch{}finally{}if(a=$h(t,n,h,o),a!==null)return An(a,t,o),Kp(a,n,o),!0}return!1}function Nf(t,n,a,o){if(o={lane:2,revertLane:ld(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ec(t)){if(n)throw Error(r(479))}else n=$h(t,a,o,2),n!==null&&An(n,t,2)}function ec(t){var n=t.alternate;return t===De||n!==null&&n===De}function Qp(t,n){Ja=Qu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function Kp(t,n,a){if((a&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,Ur(t,a)}}var gl={readContext:en,use:Xu,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};gl.useEffectEvent=wt;var Yp={readContext:en,use:Xu,useCallback:function(t,n){return gn().memoizedState=[t,n===void 0?null:n],t},useContext:en,useEffect:Op,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Zu(4194308,4,Lp.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Zu(4194308,4,t,n)},useInsertionEffect:function(t,n){Zu(4,2,t,n)},useMemo:function(t,n){var a=gn();n=n===void 0?null:n;var o=t();if(ra){yn(!0);try{t()}finally{yn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(t,n,a){var o=gn();if(a!==void 0){var h=a(n);if(ra){yn(!0);try{a(n)}finally{yn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=HT.bind(null,De,t),[o.memoizedState,t]},useRef:function(t){var n=gn();return t={current:t},n.memoizedState=t},useState:function(t){t=Sf(t);var n=t.queue,a=$p.bind(null,De,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:xf,useDeferredValue:function(t,n){var a=gn();return Rf(a,t,n)},useTransition:function(){var t=Sf(!1);return t=Bp.bind(null,De,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var o=De,h=gn();if(Ge){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),ct===null)throw Error(r(349));(je&127)!==0||pp(o,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,Op(_p.bind(null,o,f,t),[t]),o.flags|=2048,Wa(9,{destroy:void 0},yp.bind(null,o,f,a,n),null),a},useId:function(){var t=gn(),n=ct.identifierPrefix;if(Ge){var a=Pi,o=ji;a=(o&~(1<<32-Ze(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Ku++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=LT++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:If,useFormState:Rp,useActionState:Rp,useOptimistic:function(t){var n=gn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Nf.bind(null,De,!0,a),a.dispatch=n,[t,n]},useMemoCache:Ef,useCacheRefresh:function(){return gn().memoizedState=qT.bind(null,De)},useEffectEvent:function(t){var n=gn(),a={impl:t};return n.memoizedState=a,function(){if((et&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Df={readContext:en,use:Xu,useCallback:jp,useContext:en,useEffect:wf,useImperativeHandle:Up,useInsertionEffect:Vp,useLayoutEffect:kp,useMemo:Pp,useReducer:Ju,useRef:Dp,useState:function(){return Ju(ps)},useDebugValue:xf,useDeferredValue:function(t,n){var a=Nt();return zp(a,ot.memoizedState,t,n)},useTransition:function(){var t=Ju(ps)[0],n=Nt().memoizedState;return[typeof t=="boolean"?t:dl(t),n]},useSyncExternalStore:gp,useId:Gp,useHostTransitionStatus:If,useFormState:Cp,useActionState:Cp,useOptimistic:function(t,n){var a=Nt();return bp(a,ot,t,n)},useMemoCache:Ef,useCacheRefresh:Fp};Df.useEffectEvent=Mp;var Xp={readContext:en,use:Xu,useCallback:jp,useContext:en,useEffect:wf,useImperativeHandle:Up,useInsertionEffect:Vp,useLayoutEffect:kp,useMemo:Pp,useReducer:Tf,useRef:Dp,useState:function(){return Tf(ps)},useDebugValue:xf,useDeferredValue:function(t,n){var a=Nt();return ot===null?Rf(a,t,n):zp(a,ot.memoizedState,t,n)},useTransition:function(){var t=Tf(ps)[0],n=Nt().memoizedState;return[typeof t=="boolean"?t:dl(t),n]},useSyncExternalStore:gp,useId:Gp,useHostTransitionStatus:If,useFormState:Np,useActionState:Np,useOptimistic:function(t,n){var a=Nt();return ot!==null?bp(a,ot,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ef,useCacheRefresh:Fp};Xp.useEffectEvent=Mp;function Of(t,n,a,o){n=t.memoizedState,a=a(o,n),a=a==null?n:w({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Mf={enqueueSetState:function(t,n,a){t=t._reactInternals;var o=zn(),h=tr(o);h.payload=n,a!=null&&(h.callback=a),n=nr(t,h,o),n!==null&&(An(n,t,o),ul(n,t,o))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var o=zn(),h=tr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=nr(t,h,o),n!==null&&(An(n,t,o),ul(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=zn(),o=tr(a);o.tag=2,n!=null&&(o.callback=n),n=nr(t,o,a),n!==null&&(An(n,t,a),ul(n,t,a))}};function Jp(t,n,a,o,h,f,p){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,p):n.prototype&&n.prototype.isPureReactComponent?!tl(a,o)||!tl(h,f):!0}function Zp(t,n,a,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==t&&Mf.enqueueReplaceState(n,n.state,null)}function aa(t,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(t=t.defaultProps){a===n&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Wp(t){Ou(t)}function ey(t){console.error(t)}function ty(t){Ou(t)}function tc(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function ny(t,n,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Vf(t,n,a){return a=tr(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(t,n)},a}function iy(t){return t=tr(t),t.tag=3,t}function sy(t,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){ny(n,a,o)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(t.callback=function(){ny(n,a,o),typeof h!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})})}function GT(t,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Fa(n,a,h,!0),a=Ln.current,a!==null){switch(a.tag){case 31:case 13:return ti===null?dc():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===qu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),rd(t,o,h)),!1;case 22:return a.flags|=65536,o===qu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),rd(t,o,h)),!1}throw Error(r(435,a.tag))}return rd(t,o,h),dc(),!1}if(Ge)return n=Ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Zh&&(t=Error(r(422),{cause:o}),sl(Jn(t,a)))):(o!==Zh&&(n=Error(r(423),{cause:o}),sl(Jn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Jn(o,a),h=Vf(t.stateNode,o,h),cf(t,h),xt!==4&&(xt=2)),!1;var f=Error(r(520),{cause:o});if(f=Jn(f,a),Sl===null?Sl=[f]:Sl.push(f),xt!==4&&(xt=2),n===null)return!0;o=Jn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Vf(a.stateNode,o,t),cf(a,t),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(lr===null||!lr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=iy(h),sy(h,t,a,o),cf(a,h),!1}a=a.return}while(a!==null);return!1}var kf=Error(r(461)),jt=!1;function tn(t,n,a,o){n.child=t===null?lp(n,null,a,o):sa(n,t.child,a,o)}function ry(t,n,a,o,h){a=a.render;var f=n.ref;if("ref"in o){var p={};for(var b in o)b!=="ref"&&(p[b]=o[b])}else p=o;return ea(n),o=pf(t,n,a,p,f,h),b=yf(),t!==null&&!jt?(_f(t,n,h),ys(t,n,h)):(Ge&&b&&Xh(n),n.flags|=1,tn(t,n,o,h),n.child)}function ay(t,n,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!Qh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,oy(t,n,f,o,h)):(t=Lu(a.type,null,o,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Hf(t,h)){var p=f.memoizedProps;if(a=a.compare,a=a!==null?a:tl,a(p,o)&&t.ref===n.ref)return ys(t,n,h)}return n.flags|=1,t=hs(f,o),t.ref=n.ref,t.return=n,n.child=t}function oy(t,n,a,o,h){if(t!==null){var f=t.memoizedProps;if(tl(f,o)&&t.ref===n.ref)if(jt=!1,n.pendingProps=o=f,Hf(t,h))(t.flags&131072)!==0&&(jt=!0);else return n.lanes=t.lanes,ys(t,n,h)}return Lf(t,n,a,o,h)}function ly(t,n,a,o){var h=o.children,f=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(o=n.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,n.child=null;return uy(t,n,f,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&zu(n,f!==null?f.cachePool:null),f!==null?hp(n,f):ff(),fp(n);else return o=n.lanes=536870912,uy(t,n,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(zu(n,f.cachePool),hp(n,f),sr(),n.memoizedState=null):(t!==null&&zu(n,null),ff(),sr());return tn(t,n,h,a),n.child}function pl(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function uy(t,n,a,o,h){var f=af();return f=f===null?null:{parent:Lt._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},t!==null&&zu(n,null),ff(),fp(n),t!==null&&Fa(t,n,o,!0),n.childLanes=h,null}function nc(t,n){return n=sc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function cy(t,n,a){return sa(n,t.child,null,a),t=nc(n,n.pendingProps),t.flags|=2,Un(n),n.memoizedState=null,t}function FT(t,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Ge){if(o.mode==="hidden")return t=nc(n,o),n.lanes=536870912,pl(null,t);if(mf(n),(t=dt)?(t=T0(t,ei),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Xs!==null?{id:ji,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=Qg(t),a.return=n,n.child=a,Wt=n,dt=null)):t=null,t===null)throw Zs(n);return n.lanes=536870912,null}return nc(n,o)}var f=t.memoizedState;if(f!==null){var p=f.dehydrated;if(mf(n),h)if(n.flags&256)n.flags&=-257,n=cy(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(jt||Fa(t,n,a,!1),h=(a&t.childLanes)!==0,jt||h){if(o=ct,o!==null&&(p=jr(o,a),p!==0&&p!==f.retryLane))throw f.retryLane=p,Xr(t,p),An(o,t,p),kf;dc(),n=cy(t,n,a)}else t=f.treeContext,dt=ni(p.nextSibling),Wt=n,Ge=!0,Js=null,ei=!1,t!==null&&Xg(n,t),n=nc(n,o),n.flags|=4096;return n}return t=hs(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function ic(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Lf(t,n,a,o,h){return ea(n),a=pf(t,n,a,o,void 0,h),o=yf(),t!==null&&!jt?(_f(t,n,h),ys(t,n,h)):(Ge&&o&&Xh(n),n.flags|=1,tn(t,n,a,h),n.child)}function hy(t,n,a,o,h,f){return ea(n),n.updateQueue=null,a=mp(n,o,a,h),dp(t),o=yf(),t!==null&&!jt?(_f(t,n,f),ys(t,n,f)):(Ge&&o&&Xh(n),n.flags|=1,tn(t,n,a,f),n.child)}function fy(t,n,a,o,h){if(ea(n),n.stateNode===null){var f=Ba,p=a.contextType;typeof p=="object"&&p!==null&&(f=en(p)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Mf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},lf(n),p=a.contextType,f.context=typeof p=="object"&&p!==null?en(p):Ba,f.state=n.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Of(n,a,p,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(p=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),p!==f.state&&Mf.enqueueReplaceState(f,f.state,null),hl(n,o,f,h),cl(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){f=n.stateNode;var b=n.memoizedProps,C=aa(a,b);f.props=C;var P=f.context,$=a.contextType;p=Ba,typeof $=="object"&&$!==null&&(p=en($));var X=a.getDerivedStateFromProps;$=typeof X=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||P!==p)&&Zp(n,f,o,p),er=!1;var B=n.memoizedState;f.state=B,hl(n,o,f,h),cl(),P=n.memoizedState,b||B!==P||er?(typeof X=="function"&&(Of(n,a,X,o),P=n.memoizedState),(C=er||Jp(n,a,C,o,B,P,p))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=P),f.props=o,f.state=P,f.context=p,o=C):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,uf(t,n),p=n.memoizedProps,$=aa(a,p),f.props=$,X=n.pendingProps,B=f.context,P=a.contextType,C=Ba,typeof P=="object"&&P!==null&&(C=en(P)),b=a.getDerivedStateFromProps,(P=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==X||B!==C)&&Zp(n,f,o,C),er=!1,B=n.memoizedState,f.state=B,hl(n,o,f,h),cl();var G=n.memoizedState;p!==X||B!==G||er||t!==null&&t.dependencies!==null&&ju(t.dependencies)?(typeof b=="function"&&(Of(n,a,b,o),G=n.memoizedState),($=er||Jp(n,a,$,o,B,G,C)||t!==null&&t.dependencies!==null&&ju(t.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,G,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,G,C)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=G),f.props=o,f.state=G,f.context=C,o=$):(typeof f.componentDidUpdate!="function"||p===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),o=!1)}return f=o,ic(t,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&o?(n.child=sa(n,t.child,null,h),n.child=sa(n,null,a,h)):tn(t,n,a,h),n.memoizedState=f.state,t=n.child):t=ys(t,n,h),t}function dy(t,n,a,o){return Zr(),n.flags|=256,tn(t,n,a,o),n.child}var Uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jf(t){return{baseLanes:t,cachePool:np()}}function Pf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Pn),t}function my(t,n,a){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,p;if((p=f)||(p=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),p&&(h=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ge){if(h?ir(n):sr(),(t=dt)?(t=T0(t,ei),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Xs!==null?{id:ji,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=Qg(t),a.return=n,n.child=a,Wt=n,dt=null)):t=null,t===null)throw Zs(n);return bd(t)?n.lanes=32:n.lanes=536870912,null}var b=o.children;return o=o.fallback,h?(sr(),h=n.mode,b=sc({mode:"hidden",children:b},h),o=Jr(o,h,a,null),b.return=n,o.return=n,b.sibling=o,n.child=b,o=n.child,o.memoizedState=jf(a),o.childLanes=Pf(t,p,a),n.memoizedState=Uf,pl(null,o)):(ir(n),zf(n,b))}var C=t.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(f)n.flags&256?(ir(n),n.flags&=-257,n=Bf(t,n,a)):n.memoizedState!==null?(sr(),n.child=t.child,n.flags|=128,n=null):(sr(),b=o.fallback,h=n.mode,o=sc({mode:"visible",children:o.children},h),b=Jr(b,h,a,null),b.flags|=2,o.return=n,b.return=n,o.sibling=b,n.child=o,sa(n,t.child,null,a),o=n.child,o.memoizedState=jf(a),o.childLanes=Pf(t,p,a),n.memoizedState=Uf,n=pl(null,o));else if(ir(n),bd(b)){if(p=b.nextSibling&&b.nextSibling.dataset,p)var P=p.dgst;p=P,o=Error(r(419)),o.stack="",o.digest=p,sl({value:o,source:null,stack:null}),n=Bf(t,n,a)}else if(jt||Fa(t,n,a,!1),p=(a&t.childLanes)!==0,jt||p){if(p=ct,p!==null&&(o=jr(p,a),o!==0&&o!==C.retryLane))throw C.retryLane=o,Xr(t,o),An(p,t,o),kf;Ed(b)||dc(),n=Bf(t,n,a)}else Ed(b)?(n.flags|=192,n.child=t.child,n=null):(t=C.treeContext,dt=ni(b.nextSibling),Wt=n,Ge=!0,Js=null,ei=!1,t!==null&&Xg(n,t),n=zf(n,o.children),n.flags|=4096);return n}return h?(sr(),b=o.fallback,h=n.mode,C=t.child,P=C.sibling,o=hs(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,P!==null?b=hs(P,b):(b=Jr(b,h,a,null),b.flags|=2),b.return=n,o.return=n,o.sibling=b,n.child=o,pl(null,o),o=n.child,b=t.child.memoizedState,b===null?b=jf(a):(h=b.cachePool,h!==null?(C=Lt._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=np(),b={baseLanes:b.baseLanes|a,cachePool:h}),o.memoizedState=b,o.childLanes=Pf(t,p,a),n.memoizedState=Uf,pl(t.child,o)):(ir(n),a=t.child,t=a.sibling,a=hs(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,t!==null&&(p=n.deletions,p===null?(n.deletions=[t],n.flags|=16):p.push(t)),n.child=a,n.memoizedState=null,a)}function zf(t,n){return n=sc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function sc(t,n){return t=kn(22,t,null,n),t.lanes=0,t}function Bf(t,n,a){return sa(n,t.child,null,a),t=zf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function gy(t,n,a){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),tf(t.return,n,a)}function qf(t,n,a,o,h,f){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=a,p.tailMode=h,p.treeForkCount=f)}function py(t,n,a){var o=n.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var p=It.current,b=(p&2)!==0;if(b?(p=p&1|2,n.flags|=128):p&=1,ae(It,p),tn(t,n,o,a),o=Ge?il:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,a,n);else if(t.tag===19)gy(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&$u(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),qf(n,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&$u(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}qf(n,!0,a,null,f,o);break;case"together":qf(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function ys(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),or|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Fa(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=hs(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=hs(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function Hf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&ju(t)))}function $T(t,n,a){switch(n.tag){case 3:vt(n,n.stateNode.containerInfo),Ws(n,Lt,t.memoizedState.cache),Zr();break;case 27:case 5:wi(n);break;case 4:vt(n,n.stateNode.containerInfo);break;case 10:Ws(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,mf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(ir(n),n.flags|=128,null):(a&n.child.childLanes)!==0?my(t,n,a):(ir(n),t=ys(t,n,a),t!==null?t.sibling:null);ir(n);break;case 19:var h=(t.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Fa(t,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return py(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(It,It.current),o)break;return null;case 22:return n.lanes=0,ly(t,n,a,n.pendingProps);case 24:Ws(n,Lt,t.memoizedState.cache)}return ys(t,n,a)}function yy(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)jt=!0;else{if(!Hf(t,a)&&(n.flags&128)===0)return jt=!1,$T(t,n,a);jt=(t.flags&131072)!==0}else jt=!1,Ge&&(n.flags&1048576)!==0&&Yg(n,il,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=na(n.elementType),n.type=t,typeof t=="function")Qh(t)?(o=aa(t,o),n.tag=1,n=fy(null,n,t,o,a)):(n.tag=0,n=Lf(null,n,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ke){n.tag=11,n=ry(null,n,t,o,a);break e}else if(h===N){n.tag=14,n=ay(null,n,t,o,a);break e}}throw n=ht(t)||t,Error(r(306,n,""))}}return n;case 0:return Lf(t,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=aa(o,n.pendingProps),fy(t,n,o,h,a);case 3:e:{if(vt(n,n.stateNode.containerInfo),t===null)throw Error(r(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,uf(t,n),hl(n,o,null,a);var p=n.memoizedState;if(o=p.cache,Ws(n,Lt,o),o!==f.cache&&nf(n,[Lt],a,!0),cl(),o=p.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=dy(t,n,o,a);break e}else if(o!==h){h=Jn(Error(r(424)),n),sl(h),n=dy(t,n,o,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=ni(t.firstChild),Wt=n,Ge=!0,Js=null,ei=!0,a=lp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zr(),o===h){n=ys(t,n,a);break e}tn(t,n,o,a)}n=n.child}return n;case 26:return ic(t,n),t===null?(a=C0(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ge||(a=n.type,t=n.pendingProps,o=Ec(Re.current).createElement(a),o[St]=n,o[Mt]=t,nn(o,a,t),_e(o),n.stateNode=o):n.memoizedState=C0(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return wi(n),t===null&&Ge&&(o=n.stateNode=w0(n.type,n.pendingProps,Re.current),Wt=n,ei=!0,h=dt,fr(n.type)?(Td=h,dt=ni(o.firstChild)):dt=h),tn(t,n,n.pendingProps.children,a),ic(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ge&&((h=o=dt)&&(o=T1(o,n.type,n.pendingProps,ei),o!==null?(n.stateNode=o,Wt=n,dt=ni(o.firstChild),ei=!1,h=!0):h=!1),h||Zs(n)),wi(n),h=n.type,f=n.pendingProps,p=t!==null?t.memoizedProps:null,o=f.children,yd(h,f)?o=null:p!==null&&yd(h,p)&&(n.flags|=32),n.memoizedState!==null&&(h=pf(t,n,UT,null,null,a),Dl._currentValue=h),ic(t,n),tn(t,n,o,a),n.child;case 6:return t===null&&Ge&&((t=a=dt)&&(a=S1(a,n.pendingProps,ei),a!==null?(n.stateNode=a,Wt=n,dt=null,t=!0):t=!1),t||Zs(n)),null;case 13:return my(t,n,a);case 4:return vt(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=sa(n,null,o,a):tn(t,n,o,a),n.child;case 11:return ry(t,n,n.type,n.pendingProps,a);case 7:return tn(t,n,n.pendingProps,a),n.child;case 8:return tn(t,n,n.pendingProps.children,a),n.child;case 12:return tn(t,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Ws(n,n.type,o.value),tn(t,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ea(n),h=en(h),o=o(h),n.flags|=1,tn(t,n,o,a),n.child;case 14:return ay(t,n,n.type,n.pendingProps,a);case 15:return oy(t,n,n.type,n.pendingProps,a);case 19:return py(t,n,a);case 31:return FT(t,n,a);case 22:return ly(t,n,a,n.pendingProps);case 24:return ea(n),o=en(Lt),t===null?(h=af(),h===null&&(h=ct,f=sf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:o,cache:h},lf(n),Ws(n,Lt,h)):((t.lanes&a)!==0&&(uf(t,n),hl(n,null,null,a),cl()),h=t.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Ws(n,Lt,o)):(o=f.cache,Ws(n,Lt,o),o!==h.cache&&nf(n,[Lt],a,!0))),tn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function _s(t){t.flags|=4}function Gf(t,n,a,o,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Gy())t.flags|=8192;else throw ia=qu,of}else t.flags&=-16777217}function _y(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!M0(n))if(Gy())t.flags|=8192;else throw ia=qu,of}function rc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Aa():536870912,t.lanes|=n,io|=n)}function yl(t,n){if(!Ge)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function mt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,n}function QT(t,n,a){var o=n.pendingProps;switch(Jh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(n),null;case 1:return mt(n),null;case 3:return a=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ms(Lt),Qe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ga(n)?_s(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Wh())),mt(n),null;case 26:var h=n.type,f=n.memoizedState;return t===null?(_s(n),f!==null?(mt(n),_y(n,f)):(mt(n),Gf(n,h,null,o,a))):f?f!==t.memoizedState?(_s(n),mt(n),_y(n,f)):(mt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&_s(n),mt(n),Gf(n,h,t,o,a)),null;case 27:if(Bn(n),a=Re.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&_s(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return mt(n),null}t=te.current,Ga(n)?Jg(n):(t=w0(h,o,a),n.stateNode=t,_s(n))}return mt(n),null;case 5:if(Bn(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&_s(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return mt(n),null}if(f=te.current,Ga(n))Jg(n);else{var p=Ec(Re.current);switch(f){case 1:f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=p.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?p.createElement("select",{is:o.is}):p.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?p.createElement(h,{is:o.is}):p.createElement(h)}}f[St]=n,f[Mt]=o;e:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)f.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=f;e:switch(nn(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&_s(n)}}return mt(n),Gf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&_s(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(t=Re.current,Ga(n)){if(t=n.stateNode,a=n.memoizedProps,o=null,h=Wt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[St]=n,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||m0(t.nodeValue,a)),t||Zs(n,!0)}else t=Ec(t).createTextNode(o),t[St]=n,n.stateNode=t}return mt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(o=Ga(n),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[St]=n}else Zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),t=!1}else a=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Un(n),n):(Un(n),null);if((n.flags&128)!==0)throw Error(r(558))}return mt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ga(n),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[St]=n}else Zr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;mt(n),h=!1}else h=Wh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Un(n),n):(Un(n),null)}return Un(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),rc(n,n.updateQueue),mt(n),null);case 4:return Qe(),t===null&&fd(n.stateNode.containerInfo),mt(n),null;case 10:return ms(n.type),mt(n),null;case 19:if(Q(It),o=n.memoizedState,o===null)return mt(n),null;if(h=(n.flags&128)!==0,f=o.rendering,f===null)if(h)yl(o,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=$u(t),f!==null){for(n.flags|=128,yl(o,!1),t=f.updateQueue,n.updateQueue=t,rc(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)$g(a,t),a=a.sibling;return ae(It,It.current&1|2),Ge&&fs(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&Ot()>cc&&(n.flags|=128,h=!0,yl(o,!1),n.lanes=4194304)}else{if(!h)if(t=$u(f),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,rc(n,t),yl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Ge)return mt(n),null}else 2*Ot()-o.renderingStartTime>cc&&a!==536870912&&(n.flags|=128,h=!0,yl(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(t=o.last,t!==null?t.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ot(),t.sibling=null,a=It.current,ae(It,h?a&1|2:a&1),Ge&&fs(n,o.treeForkCount),t):(mt(n),null);case 22:case 23:return Un(n),df(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(mt(n),n.subtreeFlags&6&&(n.flags|=8192)):mt(n),a=n.updateQueue,a!==null&&rc(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),t!==null&&Q(ta),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ms(Lt),mt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function KT(t,n){switch(Jh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ms(Lt),Qe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Bn(n),null;case 31:if(n.memoizedState!==null){if(Un(n),n.alternate===null)throw Error(r(340));Zr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Un(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Zr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Q(It),null;case 4:return Qe(),null;case 10:return ms(n.type),null;case 22:case 23:return Un(n),df(),t!==null&&Q(ta),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ms(Lt),null;case 25:return null;default:return null}}function vy(t,n){switch(Jh(n),n.tag){case 3:ms(Lt),Qe();break;case 26:case 27:case 5:Bn(n);break;case 4:Qe();break;case 31:n.memoizedState!==null&&Un(n);break;case 13:Un(n);break;case 19:Q(It);break;case 10:ms(n.type);break;case 22:case 23:Un(n),df(),t!==null&&Q(ta);break;case 24:ms(Lt)}}function _l(t,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,p=a.inst;o=f(),p.destroy=o}a=a.next}while(a!==h)}}catch(b){st(n,n.return,b)}}function rr(t,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var p=o.inst,b=p.destroy;if(b!==void 0){p.destroy=void 0,h=n;var C=a,P=b;try{P()}catch($){st(h,C,$)}}}o=o.next}while(o!==f)}}catch($){st(n,n.return,$)}}function Ey(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{cp(n,a)}catch(o){st(t,t.return,o)}}}function by(t,n,a){a.props=aa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){st(t,n,o)}}function vl(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){st(t,n,h)}}function zi(t,n){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){st(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){st(t,n,h)}else a.current=null}function Ty(t){var n=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){st(t,t.return,h)}}function Ff(t,n,a){try{var o=t.stateNode;p1(o,t.type,a,n),o[Mt]=n}catch(h){st(t,t.return,h)}}function Sy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fr(t.type)||t.tag===4}function $f(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qf(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=hi));else if(o!==4&&(o===27&&fr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(Qf(t,n,a),t=t.sibling;t!==null;)Qf(t,n,a),t=t.sibling}function ac(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(o!==4&&(o===27&&fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ac(t,n,a),t=t.sibling;t!==null;)ac(t,n,a),t=t.sibling}function Ay(t){var n=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);nn(n,o,a),n[St]=t,n[Mt]=a}catch(f){st(t,t.return,f)}}var vs=!1,Pt=!1,Kf=!1,wy=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function YT(t,n){if(t=t.containerInfo,gd=Rc,t=Ug(t),zh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var p=0,b=-1,C=-1,P=0,$=0,X=t,B=null;t:for(;;){for(var G;X!==a||h!==0&&X.nodeType!==3||(b=p+h),X!==f||o!==0&&X.nodeType!==3||(C=p+o),X.nodeType===3&&(p+=X.nodeValue.length),(G=X.firstChild)!==null;)B=X,X=G;for(;;){if(X===t)break t;if(B===a&&++P===h&&(b=p),B===f&&++$===o&&(C=p),(G=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=G}a=b===-1||C===-1?null:{start:b,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(pd={focusedElem:t,selectionRange:a},Rc=!1,Yt=n;Yt!==null;)if(n=Yt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Yt=t;else for(;Yt!==null;){switch(n=Yt,f=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var ce=aa(a.type,h);t=o.getSnapshotBeforeUpdate(ce,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(Te){st(a,a.return,Te)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)vd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":vd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,Yt=t;break}Yt=n.return}}function xy(t,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:bs(t,a),o&4&&_l(5,a);break;case 1:if(bs(t,a),o&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(p){st(a,a.return,p)}else{var h=aa(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(p){st(a,a.return,p)}}o&64&&Ey(a),o&512&&vl(a,a.return);break;case 3:if(bs(t,a),o&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{cp(t,n)}catch(p){st(a,a.return,p)}}break;case 27:n===null&&o&4&&Ay(a);case 26:case 5:bs(t,a),n===null&&o&4&&Ty(a),o&512&&vl(a,a.return);break;case 12:bs(t,a);break;case 31:bs(t,a),o&4&&Iy(t,a);break;case 13:bs(t,a),o&4&&Ny(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=s1.bind(null,a),A1(t,a))));break;case 22:if(o=a.memoizedState!==null||vs,!o){n=n!==null&&n.memoizedState!==null||Pt,h=vs;var f=Pt;vs=o,(Pt=n)&&!f?Ts(t,a,(a.subtreeFlags&8772)!==0):bs(t,a),vs=h,Pt=f}break;case 30:break;default:bs(t,a)}}function Ry(t){var n=t.alternate;n!==null&&(t.alternate=null,Ry(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Us(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,En=!1;function Es(t,n,a){for(a=a.child;a!==null;)Cy(t,n,a),a=a.sibling}function Cy(t,n,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Cn,a)}catch{}switch(a.tag){case 26:Pt||zi(a,n),Es(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||zi(a,n);var o=yt,h=En;fr(a.type)&&(yt=a.stateNode,En=!1),Es(t,n,a),Cl(a.stateNode),yt=o,En=h;break;case 5:Pt||zi(a,n);case 6:if(o=yt,h=En,yt=null,Es(t,n,a),yt=o,En=h,yt!==null)if(En)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(f){st(a,n,f)}else try{yt.removeChild(a.stateNode)}catch(f){st(a,n,f)}break;case 18:yt!==null&&(En?(t=yt,E0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ho(t)):E0(yt,a.stateNode));break;case 4:o=yt,h=En,yt=a.stateNode.containerInfo,En=!0,Es(t,n,a),yt=o,En=h;break;case 0:case 11:case 14:case 15:rr(2,a,n),Pt||rr(4,a,n),Es(t,n,a);break;case 1:Pt||(zi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&by(a,n,o)),Es(t,n,a);break;case 21:Es(t,n,a);break;case 22:Pt=(o=Pt)||a.memoizedState!==null,Es(t,n,a),Pt=o;break;default:Es(t,n,a)}}function Iy(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ho(t)}catch(a){st(n,n.return,a)}}}function Ny(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ho(t)}catch(a){st(n,n.return,a)}}function XT(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new wy),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new wy),n;default:throw Error(r(435,t.tag))}}function oc(t,n){var a=XT(t);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=r1.bind(null,t,o);o.then(h,h)}})}function bn(t,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,p=n,b=p;e:for(;b!==null;){switch(b.tag){case 27:if(fr(b.type)){yt=b.stateNode,En=!1;break e}break;case 5:yt=b.stateNode,En=!1;break e;case 3:case 4:yt=b.stateNode.containerInfo,En=!0;break e}b=b.return}if(yt===null)throw Error(r(160));Cy(f,p,h),yt=null,En=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Dy(n,t),n=n.sibling}var yi=null;function Dy(t,n){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(n,t),Tn(t),o&4&&(rr(3,t,t.return),_l(3,t),rr(5,t,t.return));break;case 1:bn(n,t),Tn(t),o&512&&(Pt||a===null||zi(a,a.return)),o&64&&vs&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=yi;if(bn(n,t),Tn(t),o&512&&(Pt||a===null||zi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[z]||f[St]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),nn(f,o,a),f[St]=t,_e(f),o=f;break e;case"link":var p=D0("link","href",h).get(o+(a.href||""));if(p){for(var b=0;b<p.length;b++)if(f=p[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(b,1);break t}}f=h.createElement(o),nn(f,o,a),h.head.appendChild(f);break;case"meta":if(p=D0("meta","content",h).get(o+(a.content||""))){for(b=0;b<p.length;b++)if(f=p[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(b,1);break t}}f=h.createElement(o),nn(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[St]=t,_e(f),o=f}t.stateNode=o}else O0(h,t.type,t.stateNode);else t.stateNode=N0(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?O0(h,t.type,t.stateNode):N0(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ff(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(n,t),Tn(t),o&512&&(Pt||a===null||zi(a,a.return)),a!==null&&o&4&&Ff(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(n,t),Tn(t),o&512&&(Pt||a===null||zi(a,a.return)),t.flags&32){h=t.stateNode;try{vn(h,"")}catch(ce){st(t,t.return,ce)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Ff(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Kf=!0);break;case 6:if(bn(n,t),Tn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ce){st(t,t.return,ce)}}break;case 3:if(Sc=null,h=yi,yi=bc(n.containerInfo),bn(n,t),yi=h,Tn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{ho(n.containerInfo)}catch(ce){st(t,t.return,ce)}Kf&&(Kf=!1,Oy(t));break;case 4:o=yi,yi=bc(t.stateNode.containerInfo),bn(n,t),Tn(t),yi=o;break;case 12:bn(n,t),Tn(t);break;case 31:bn(n,t),Tn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,oc(t,o)));break;case 13:bn(n,t),Tn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=Ot()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,oc(t,o)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,P=vs,$=Pt;if(vs=P||h,Pt=$||C,bn(n,t),Pt=$,vs=P,Tn(t),o&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||C||vs||Pt||oa(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){C=a=n;try{if(f=C.stateNode,h)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{b=C.stateNode;var X=C.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ce){st(C,C.return,ce)}}}else if(n.tag===6){if(a===null){C=n;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(ce){st(C,C.return,ce)}}}else if(n.tag===18){if(a===null){C=n;try{var G=C.stateNode;h?b0(G,!0):b0(C.stateNode,!1)}catch(ce){st(C,C.return,ce)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,oc(t,a))));break;case 19:bn(n,t),Tn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,oc(t,o)));break;case 30:break;case 21:break;default:bn(n,t),Tn(t)}}function Tn(t){var n=t.flags;if(n&2){try{for(var a,o=t.return;o!==null;){if(Sy(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=$f(t);ac(t,f,h);break;case 5:var p=a.stateNode;a.flags&32&&(vn(p,""),a.flags&=-33);var b=$f(t);ac(t,b,p);break;case 3:case 4:var C=a.stateNode.containerInfo,P=$f(t);Qf(t,P,C);break;default:throw Error(r(161))}}catch($){st(t,t.return,$)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Oy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Oy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function bs(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)xy(t,n.alternate,n),n=n.sibling}function oa(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:rr(4,n,n.return),oa(n);break;case 1:zi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&by(n,n.return,a),oa(n);break;case 27:Cl(n.stateNode);case 26:case 5:zi(n,n.return),oa(n);break;case 22:n.memoizedState===null&&oa(n);break;case 30:oa(n);break;default:oa(n)}t=t.sibling}}function Ts(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=t,f=n,p=f.flags;switch(f.tag){case 0:case 11:case 15:Ts(h,f,a),_l(4,f);break;case 1:if(Ts(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){st(o,o.return,P)}if(o=f,h=o.updateQueue,h!==null){var b=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)up(C[h],b)}catch(P){st(o,o.return,P)}}a&&p&64&&Ey(f),vl(f,f.return);break;case 27:Ay(f);case 26:case 5:Ts(h,f,a),a&&o===null&&p&4&&Ty(f),vl(f,f.return);break;case 12:Ts(h,f,a);break;case 31:Ts(h,f,a),a&&p&4&&Iy(h,f);break;case 13:Ts(h,f,a),a&&p&4&&Ny(h,f);break;case 22:f.memoizedState===null&&Ts(h,f,a),vl(f,f.return);break;case 30:break;default:Ts(h,f,a)}n=n.sibling}}function Yf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&rl(a))}function Xf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&rl(t))}function _i(t,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)My(t,n,a,o),n=n.sibling}function My(t,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:_i(t,n,a,o),h&2048&&_l(9,n);break;case 1:_i(t,n,a,o);break;case 3:_i(t,n,a,o),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&rl(t)));break;case 12:if(h&2048){_i(t,n,a,o),t=n.stateNode;try{var f=n.memoizedProps,p=f.id,b=f.onPostCommit;typeof b=="function"&&b(p,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){st(n,n.return,C)}}else _i(t,n,a,o);break;case 31:_i(t,n,a,o);break;case 13:_i(t,n,a,o);break;case 23:break;case 22:f=n.stateNode,p=n.alternate,n.memoizedState!==null?f._visibility&2?_i(t,n,a,o):El(t,n):f._visibility&2?_i(t,n,a,o):(f._visibility|=2,eo(t,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&Yf(p,n);break;case 24:_i(t,n,a,o),h&2048&&Xf(n.alternate,n);break;default:_i(t,n,a,o)}}function eo(t,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=t,p=n,b=a,C=o,P=p.flags;switch(p.tag){case 0:case 11:case 15:eo(f,p,b,C,h),_l(8,p);break;case 23:break;case 22:var $=p.stateNode;p.memoizedState!==null?$._visibility&2?eo(f,p,b,C,h):El(f,p):($._visibility|=2,eo(f,p,b,C,h)),h&&P&2048&&Yf(p.alternate,p);break;case 24:eo(f,p,b,C,h),h&&P&2048&&Xf(p.alternate,p);break;default:eo(f,p,b,C,h)}n=n.sibling}}function El(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,o=n,h=o.flags;switch(o.tag){case 22:El(a,o),h&2048&&Yf(o.alternate,o);break;case 24:El(a,o),h&2048&&Xf(o.alternate,o);break;default:El(a,o)}n=n.sibling}}var bl=8192;function to(t,n,a){if(t.subtreeFlags&bl)for(t=t.child;t!==null;)Vy(t,n,a),t=t.sibling}function Vy(t,n,a){switch(t.tag){case 26:to(t,n,a),t.flags&bl&&t.memoizedState!==null&&L1(a,yi,t.memoizedState,t.memoizedProps);break;case 5:to(t,n,a);break;case 3:case 4:var o=yi;yi=bc(t.stateNode.containerInfo),to(t,n,a),yi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=bl,bl=16777216,to(t,n,a),bl=o):to(t,n,a));break;default:to(t,n,a)}}function ky(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Tl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Yt=o,Uy(o,t)}ky(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ly(t),t=t.sibling}function Ly(t){switch(t.tag){case 0:case 11:case 15:Tl(t),t.flags&2048&&rr(9,t,t.return);break;case 3:Tl(t);break;case 12:Tl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,lc(t)):Tl(t);break;default:Tl(t)}}function lc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Yt=o,Uy(o,t)}ky(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:rr(8,n,n.return),lc(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,lc(n));break;default:lc(n)}t=t.sibling}}function Uy(t,n){for(;Yt!==null;){var a=Yt;switch(a.tag){case 0:case 11:case 15:rr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:rl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Yt=o;else e:for(a=t;Yt!==null;){o=Yt;var h=o.sibling,f=o.return;if(Ry(o),o===a){Yt=null;break e}if(h!==null){h.return=f,Yt=h;break e}Yt=f}}}var JT={getCacheForType:function(t){var n=en(Lt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return en(Lt).controller.signal}},ZT=typeof WeakMap=="function"?WeakMap:Map,et=0,ct=null,Le=null,je=0,it=0,jn=null,ar=!1,no=!1,Jf=!1,Ss=0,xt=0,or=0,la=0,Zf=0,Pn=0,io=0,Sl=null,Sn=null,Wf=!1,uc=0,jy=0,cc=1/0,hc=null,lr=null,Ht=0,ur=null,so=null,As=0,ed=0,td=null,Py=null,Al=0,nd=null;function zn(){return(et&2)!==0&&je!==0?je&-je:F.T!==null?ld():xa()}function zy(){if(Pn===0)if((je&536870912)===0||Ge){var t=ss;ss<<=1,(ss&3932160)===0&&(ss=262144),Pn=t}else Pn=536870912;return t=Ln.current,t!==null&&(t.flags|=32),Pn}function An(t,n,a){(t===ct&&(it===2||it===9)||t.cancelPendingCommit!==null)&&(ro(t,0),cr(t,je,Pn,!1)),rs(t,a),((et&2)===0||t!==ct)&&(t===ct&&((et&2)===0&&(la|=a),xt===4&&cr(t,je,Pn,!1)),Bi(t))}function By(t,n,a){if((et&6)!==0)throw Error(r(327));var o=!a&&(n&127)===0&&(n&t.expiredLanes)===0||In(t,n),h=o?t1(t,n):sd(t,n,!0),f=o;do{if(h===0){no&&!o&&cr(t,n,0,!1);break}else{if(a=t.current.alternate,f&&!WT(a)){h=sd(t,n,!1),f=!1;continue}if(h===2){if(f=n,t.errorRecoveryDisabledLanes&f)var p=0;else p=t.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;e:{var b=t;h=Sl;var C=b.current.memoizedState.isDehydrated;if(C&&(ro(b,p).flags|=256),p=sd(b,p,!1),p!==2){if(Jf&&!C){b.errorRecoveryDisabledLanes|=f,la|=f,h=4;break e}f=Sn,Sn=h,f!==null&&(Sn===null?Sn=f:Sn.push.apply(Sn,f))}h=p}if(f=!1,h!==2)continue}}if(h===1){ro(t,0),cr(t,n,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:cr(o,n,Pn,!ar);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=uc+300-Ot(),10<h)){if(cr(o,n,Pn,!ar),Fn(o,0,!0)!==0)break e;As=n,o.timeoutHandle=_0(qy.bind(null,o,a,Sn,hc,Wf,n,Pn,la,io,ar,f,"Throttled",-0,0),h);break e}qy(o,a,Sn,hc,Wf,n,Pn,la,io,ar,f,null,-0,0)}}break}while(!0);Bi(t)}function qy(t,n,a,o,h,f,p,b,C,P,$,X,B,G){if(t.timeoutHandle=-1,X=n.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},Vy(n,f,X);var ce=(f&62914560)===f?uc-Ot():(f&4194048)===f?jy-Ot():0;if(ce=U1(X,ce),ce!==null){As=f,t.cancelPendingCommit=ce(Xy.bind(null,t,n,f,a,o,h,p,b,C,$,X,null,B,G)),cr(t,f,p,!P);return}}Xy(t,n,f,a,o,h,p,b,C)}function WT(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!Vn(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function cr(t,n,a,o){n&=~Zf,n&=~la,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var h=n;0<h;){var f=31-Ze(h),p=1<<f;o[f]=-1,h&=~p}a!==0&&Ii(t,a,n)}function fc(){return(et&6)===0?(wl(0),!1):!0}function id(){if(Le!==null){if(it===0)var t=Le.return;else t=Le,ds=Wr=null,vf(t),Ya=null,ol=0,t=Le;for(;t!==null;)vy(t.alternate,t),t=t.return;Le=null}}function ro(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,v1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),As=0,id(),ct=t,Le=a=hs(t.current,null),je=n,it=0,jn=null,ar=!1,no=In(t,n),Jf=!1,io=Pn=Zf=la=or=xt=0,Sn=Sl=null,Wf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var h=31-Ze(o),f=1<<h;n|=t[h],o&=~f}return Ss=n,Mu(),a}function Hy(t,n){De=null,F.H=gl,n===Ka||n===Bu?(n=rp(),it=3):n===of?(n=rp(),it=4):it=n===kf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,jn=n,Le===null&&(xt=1,tc(t,Jn(n,t.current)))}function Gy(){var t=Ln.current;return t===null?!0:(je&4194048)===je?ti===null:(je&62914560)===je||(je&536870912)!==0?t===ti:!1}function Fy(){var t=F.H;return F.H=gl,t===null?gl:t}function $y(){var t=F.A;return F.A=JT,t}function dc(){xt=4,ar||(je&4194048)!==je&&Ln.current!==null||(no=!0),(or&134217727)===0&&(la&134217727)===0||ct===null||cr(ct,je,Pn,!1)}function sd(t,n,a){var o=et;et|=2;var h=Fy(),f=$y();(ct!==t||je!==n)&&(hc=null,ro(t,n)),n=!1;var p=xt;e:do try{if(it!==0&&Le!==null){var b=Le,C=jn;switch(it){case 8:id(),p=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(n=!0);var P=it;if(it=0,jn=null,ao(t,b,C,P),a&&no){p=0;break e}break;default:P=it,it=0,jn=null,ao(t,b,C,P)}}e1(),p=xt;break}catch($){Hy(t,$)}while(!0);return n&&t.shellSuspendCounter++,ds=Wr=null,et=o,F.H=h,F.A=f,Le===null&&(ct=null,je=0,Mu()),p}function e1(){for(;Le!==null;)Qy(Le)}function t1(t,n){var a=et;et|=2;var o=Fy(),h=$y();ct!==t||je!==n?(hc=null,cc=Ot()+500,ro(t,n)):no=In(t,n);e:do try{if(it!==0&&Le!==null){n=Le;var f=jn;t:switch(it){case 1:it=0,jn=null,ao(t,n,f,1);break;case 2:case 9:if(ip(f)){it=0,jn=null,Ky(n);break}n=function(){it!==2&&it!==9||ct!==t||(it=7),Bi(t)},f.then(n,n);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:ip(f)?(it=0,jn=null,Ky(n)):(it=0,jn=null,ao(t,n,f,7));break;case 5:var p=null;switch(Le.tag){case 26:p=Le.memoizedState;case 5:case 27:var b=Le;if(p?M0(p):b.stateNode.complete){it=0,jn=null;var C=b.sibling;if(C!==null)Le=C;else{var P=b.return;P!==null?(Le=P,mc(P)):Le=null}break t}}it=0,jn=null,ao(t,n,f,5);break;case 6:it=0,jn=null,ao(t,n,f,6);break;case 8:id(),xt=6;break e;default:throw Error(r(462))}}n1();break}catch($){Hy(t,$)}while(!0);return ds=Wr=null,F.H=o,F.A=h,et=a,Le!==null?0:(ct=null,je=0,Mu(),xt)}function n1(){for(;Le!==null&&!$t();)Qy(Le)}function Qy(t){var n=yy(t.alternate,t,Ss);t.memoizedProps=t.pendingProps,n===null?mc(t):Le=n}function Ky(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=hy(a,n,n.pendingProps,n.type,void 0,je);break;case 11:n=hy(a,n,n.pendingProps,n.type.render,n.ref,je);break;case 5:vf(n);default:vy(a,n),n=Le=$g(n,Ss),n=yy(a,n,Ss)}t.memoizedProps=t.pendingProps,n===null?mc(t):Le=n}function ao(t,n,a,o){ds=Wr=null,vf(n),Ya=null,ol=0;var h=n.return;try{if(GT(t,h,n,a,je)){xt=1,tc(t,Jn(a,t.current)),Le=null;return}}catch(f){if(h!==null)throw Le=h,f;xt=1,tc(t,Jn(a,t.current)),Le=null;return}n.flags&32768?(Ge||o===1?t=!0:no||(je&536870912)!==0?t=!1:(ar=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),Yy(n,t)):mc(n)}function mc(t){var n=t;do{if((n.flags&32768)!==0){Yy(n,ar);return}t=n.return;var a=QT(n.alternate,n,Ss);if(a!==null){Le=a;return}if(n=n.sibling,n!==null){Le=n;return}Le=n=t}while(n!==null);xt===0&&(xt=5)}function Yy(t,n){do{var a=KT(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);xt=6,Le=null}function Xy(t,n,a,o,h,f,p,b,C){t.cancelPendingCommit=null;do gc();while(Ht!==0);if((et&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Fh,wa(t,a,f,p,b,C),t===ct&&(Le=ct=null,je=0),so=n,ur=t,As=a,ed=f,td=h,Py=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,a1(Ri,function(){return t0(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=F.T,F.T=null,h=re.p,re.p=2,p=et,et|=4;try{YT(t,n,a)}finally{et=p,re.p=h,F.T=o}}Ht=1,Jy(),Zy(),Wy()}}function Jy(){if(Ht===1){Ht=0;var t=ur,n=so,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var o=re.p;re.p=2;var h=et;et|=4;try{Dy(n,t);var f=pd,p=Ug(t.containerInfo),b=f.focusedElem,C=f.selectionRange;if(p!==b&&b&&b.ownerDocument&&Lg(b.ownerDocument.documentElement,b)){if(C!==null&&zh(b)){var P=C.start,$=C.end;if($===void 0&&($=P),"selectionStart"in b)b.selectionStart=P,b.selectionEnd=Math.min($,b.value.length);else{var X=b.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var G=B.getSelection(),ce=b.textContent.length,Te=Math.min(C.start,ce),ut=C.end===void 0?Te:Math.min(C.end,ce);!G.extend&&Te>ut&&(p=ut,ut=Te,Te=p);var k=kg(b,Te),O=kg(b,ut);if(k&&O&&(G.rangeCount!==1||G.anchorNode!==k.node||G.anchorOffset!==k.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var j=X.createRange();j.setStart(k.node,k.offset),G.removeAllRanges(),Te>ut?(G.addRange(j),G.extend(O.node,O.offset)):(j.setEnd(O.node,O.offset),G.addRange(j))}}}}for(X=[],G=b;G=G.parentNode;)G.nodeType===1&&X.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var Y=X[b];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Rc=!!gd,pd=gd=null}finally{et=h,re.p=o,F.T=a}}t.current=n,Ht=2}}function Zy(){if(Ht===2){Ht=0;var t=ur,n=so,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var o=re.p;re.p=2;var h=et;et|=4;try{xy(t,n.alternate,n)}finally{et=h,re.p=o,F.T=a}}Ht=3}}function Wy(){if(Ht===4||Ht===3){Ht=0,Ls();var t=ur,n=so,a=As,o=Py;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ht=5:(Ht=0,so=ur=null,e0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(lr=null),ci(a),n=n.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Cn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=F.T,h=re.p,re.p=2,F.T=null;try{for(var f=t.onRecoverableError,p=0;p<o.length;p++){var b=o[p];f(b.value,{componentStack:b.stack})}}finally{F.T=n,re.p=h}}(As&3)!==0&&gc(),Bi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===nd?Al++:(Al=0,nd=t):Al=0,wl(0)}}function e0(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,rl(n)))}function gc(){return Jy(),Zy(),Wy(),t0()}function t0(){if(Ht!==5)return!1;var t=ur,n=ed;ed=0;var a=ci(As),o=F.T,h=re.p;try{re.p=32>a?32:a,F.T=null,a=td,td=null;var f=ur,p=As;if(Ht=0,so=ur=null,As=0,(et&6)!==0)throw Error(r(331));var b=et;if(et|=4,Ly(f.current),My(f,f.current,p,a),et=b,wl(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Cn,f)}catch{}return!0}finally{re.p=h,F.T=o,e0(t,n)}}function n0(t,n,a){n=Jn(a,n),n=Vf(t.stateNode,n,2),t=nr(t,n,2),t!==null&&(rs(t,2),Bi(t))}function st(t,n,a){if(t.tag===3)n0(t,t,a);else for(;n!==null;){if(n.tag===3){n0(n,t,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(lr===null||!lr.has(o))){t=Jn(a,t),a=iy(2),o=nr(n,a,2),o!==null&&(sy(a,o,n,t),rs(o,2),Bi(o));break}}n=n.return}}function rd(t,n,a){var o=t.pingCache;if(o===null){o=t.pingCache=new ZT;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(Jf=!0,h.add(a),t=i1.bind(null,t,n,a),n.then(t,t))}function i1(t,n,a){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(je&a)===a&&(xt===4||xt===3&&(je&62914560)===je&&300>Ot()-uc?(et&2)===0&&ro(t,0):Zf|=a,io===je&&(io=0)),Bi(t)}function i0(t,n){n===0&&(n=Aa()),t=Xr(t,n),t!==null&&(rs(t,n),Bi(t))}function s1(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),i0(t,a)}function r1(t,n){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),i0(t,a)}function a1(t,n){return Rt(t,n)}var pc=null,oo=null,ad=!1,yc=!1,od=!1,hr=0;function Bi(t){t!==oo&&t.next===null&&(oo===null?pc=oo=t:oo=oo.next=t),yc=!0,ad||(ad=!0,l1())}function wl(t,n){if(!od&&yc){od=!0;do for(var a=!1,o=pc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var p=o.suspendedLanes,b=o.pingedLanes;f=(1<<31-Ze(42|t)+1)-1,f&=h&~(p&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,o0(o,f))}else f=je,f=Fn(o,o===ct?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||In(o,f)||(a=!0,o0(o,f));o=o.next}while(a);od=!1}}function o1(){s0()}function s0(){yc=ad=!1;var t=0;hr!==0&&_1()&&(t=hr);for(var n=Ot(),a=null,o=pc;o!==null;){var h=o.next,f=r0(o,n);f===0?(o.next=null,a===null?pc=h:a.next=h,h===null&&(oo=a)):(a=o,(t!==0||(f&3)!==0)&&(yc=!0)),o=h}Ht!==0&&Ht!==5||wl(t),hr!==0&&(hr=0)}function r0(t,n){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var p=31-Ze(f),b=1<<p,C=h[p];C===-1?((b&a)===0||(b&o)!==0)&&(h[p]=Bo(b,n)):C<=n&&(t.expiredLanes|=b),f&=~b}if(n=ct,a=je,a=Fn(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===n&&(it===2||it===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Rn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||In(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(o!==null&&Rn(o),ci(a)){case 2:case 8:a=is;break;case 32:a=Ri;break;case 268435456:a=qn;break;default:a=Ri}return o=a0.bind(null,t),a=Rt(a,o),t.callbackPriority=n,t.callbackNode=a,n}return o!==null&&o!==null&&Rn(o),t.callbackPriority=2,t.callbackNode=null,2}function a0(t,n){if(Ht!==0&&Ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(gc()&&t.callbackNode!==a)return null;var o=je;return o=Fn(t,t===ct?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(By(t,o,n),r0(t,Ot()),t.callbackNode!=null&&t.callbackNode===a?a0.bind(null,t):null)}function o0(t,n){if(gc())return null;By(t,n,!0)}function l1(){E1(function(){(et&6)!==0?Rt(xi,o1):s0()})}function ld(){if(hr===0){var t=$a;t===0&&(t=Hn,Hn<<=1,(Hn&261888)===0&&(Hn=256)),hr=t}return hr}function l0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Da(""+t)}function u0(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function u1(t,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var f=l0((h[Mt]||null).action),p=o.submitter;p&&(n=(n=p[Mt]||null)?l0(n.formAction):p.getAttribute("formAction"),n!==null&&(f=n,p=null));var b=new Vi("action","action",null,o,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(hr!==0){var C=p?u0(h,p):new FormData(h);Cf(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(b.preventDefault(),C=p?u0(h,p):new FormData(h),Cf(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var ud=0;ud<Gh.length;ud++){var cd=Gh[ud],c1=cd.toLowerCase(),h1=cd[0].toUpperCase()+cd.slice(1);pi(c1,"on"+h1)}pi(zg,"onAnimationEnd"),pi(Bg,"onAnimationIteration"),pi(qg,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(RT,"onTransitionRun"),pi(CT,"onTransitionStart"),pi(IT,"onTransitionCancel"),pi(Hg,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Fe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function c0(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var p=o.length-1;0<=p;p--){var b=o[p],C=b.instance,P=b.currentTarget;if(b=b.listener,C!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=P;try{f(h)}catch($){Ou($)}h.currentTarget=null,f=C}else for(p=0;p<o.length;p++){if(b=o[p],C=b.instance,P=b.currentTarget,b=b.listener,C!==f&&h.isPropagationStopped())break e;f=b,h.currentTarget=P;try{f(h)}catch($){Ou($)}h.currentTarget=null,f=C}}}}function Ue(t,n){var a=n[os];a===void 0&&(a=n[os]=new Set);var o=t+"__bubble";a.has(o)||(h0(n,t,2,!1),a.add(o))}function hd(t,n,a){var o=0;n&&(o|=4),h0(a,t,o,n)}var _c="_reactListening"+Math.random().toString(36).slice(2);function fd(t){if(!t[_c]){t[_c]=!0,At.forEach(function(a){a!=="selectionchange"&&(f1.has(a)||hd(a,!1,t),hd(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[_c]||(n[_c]=!0,hd("selectionchange",!1,n))}}function h0(t,n,a,o){switch(z0(n)){case 2:var h=z1;break;case 8:h=B1;break;default:h=Rd}a=h.bind(null,n,a,t),h=void 0,!qr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function dd(t,n,a,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var b=o.stateNode.containerInfo;if(b===h)break;if(p===4)for(p=o.return;p!==null;){var C=p.tag;if((C===3||C===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;b!==null;){if(p=q(b),p===null)return;if(C=p.tag,C===5||C===6||C===26||C===27){o=f=p;continue e}b=b.parentNode}}o=o.return}$s(function(){var P=f,$=Qn(a),X=[];e:{var B=Gg.get(t);if(B!==void 0){var G=Vi,ce=t;switch(t){case"keypress":if(Gr(a)===0)break e;case"keydown":case"keyup":G=Iu;break;case"focusin":ce="focus",G=$r;break;case"focusout":ce="blur",G=$r;break;case"beforeblur":case"afterblur":G=$r;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=m;break;case zg:case Bg:case qg:G=Tu;break;case Hg:G=T;break;case"scroll":case"scrollend":G=Xo;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=Su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=cs;break;case"toggle":case"beforetoggle":G=Ne}var Te=(n&4)!==0,ut=!Te&&(t==="scroll"||t==="scrollend"),k=Te?B!==null?B+"Capture":null:B;Te=[];for(var O=P,j;O!==null;){var Y=O;if(j=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||j===null||k===null||(Y=fi(O,k),Y!=null&&Te.push(Rl(O,Y,j))),ut)break;O=O.return}0<Te.length&&(B=new G(B,ce,null,a,$),X.push({event:B,listeners:Te}))}}if((n&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",B&&a!==Qo&&(ce=a.relatedTarget||a.fromElement)&&(q(ce)||ce[dn]))break e;if((G||B)&&(B=$.window===$?$:(B=$.ownerDocument)?B.defaultView||B.parentWindow:window,G?(ce=a.relatedTarget||a.toElement,G=P,ce=ce?q(ce):null,ce!==null&&(ut=c(ce),Te=ce.tag,ce!==ut||Te!==5&&Te!==27&&Te!==6)&&(ce=null)):(G=null,ce=P),G!==ce)){if(Te=Jo,Y="onMouseLeave",k="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Te=cs,Y="onPointerLeave",k="onPointerEnter",O="pointer"),ut=G==null?B:fe(G),j=ce==null?B:fe(ce),B=new Te(Y,O+"leave",G,a,$),B.target=ut,B.relatedTarget=j,Y=null,q($)===P&&(Te=new Te(k,O+"enter",ce,a,$),Te.target=j,Te.relatedTarget=ut,Y=Te),ut=Y,G&&ce)t:{for(Te=d1,k=G,O=ce,j=0,Y=k;Y;Y=Te(Y))j++;Y=0;for(var de=O;de;de=Te(de))Y++;for(;0<j-Y;)k=Te(k),j--;for(;0<Y-j;)O=Te(O),Y--;for(;j--;){if(k===O||O!==null&&k===O.alternate){Te=k;break t}k=Te(k),O=Te(O)}Te=null}else Te=null;G!==null&&f0(X,B,G,Te,!1),ce!==null&&ut!==null&&f0(X,ut,ce,Te,!0)}}e:{if(B=P?fe(P):window,G=B.nodeName&&B.nodeName.toLowerCase(),G==="select"||G==="input"&&B.type==="file")var Xe=Ig;else if(Rg(B))if(Ng)Xe=AT;else{Xe=TT;var he=bT}else G=B.nodeName,!G||G.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?P&&Na(P.elementType)&&(Xe=Ig):Xe=ST;if(Xe&&(Xe=Xe(t,P))){Cg(X,Xe,a,$);break e}he&&he(t,B,P),t==="focusout"&&P&&B.type==="number"&&P.memoizedProps.value!=null&&Go(B,"number",B.value)}switch(he=P?fe(P):window,t){case"focusin":(Rg(he)||he.contentEditable==="true")&&(ja=he,Bh=P,nl=null);break;case"focusout":nl=Bh=ja=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,jg(X,a,$);break;case"selectionchange":if(xT)break;case"keydown":case"keyup":jg(X,a,$)}var Oe;if(We)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Ua?Qr(t,a)&&(Pe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ui&&a.locale!=="ko"&&(Ua||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Ua&&(Oe=Yo()):(Mi=$,Ko="value"in Mi?Mi.value:Mi.textContent,Ua=!0)),he=vc(P,Pe),0<he.length&&(Pe=new Li(Pe,t,null,a,$),X.push({event:Pe,listeners:he}),Oe?Pe.data=Oe:(Oe=La(a),Oe!==null&&(Pe.data=Oe)))),(Oe=Yn?yT(t,a):_T(t,a))&&(Pe=vc(P,"onBeforeInput"),0<Pe.length&&(he=new Li("onBeforeInput","beforeinput",null,a,$),X.push({event:he,listeners:Pe}),he.data=Oe)),u1(X,t,P,a,$)}c0(X,n)})}function Rl(t,n,a){return{instance:t,listener:n,currentTarget:a}}function vc(t,n){for(var a=n+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=fi(t,a),h!=null&&o.unshift(Rl(t,h,f)),h=fi(t,n),h!=null&&o.push(Rl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function d1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function f0(t,n,a,o,h){for(var f=n._reactName,p=[];a!==null&&a!==o;){var b=a,C=b.alternate,P=b.stateNode;if(b=b.tag,C!==null&&C===o)break;b!==5&&b!==26&&b!==27||P===null||(C=P,h?(P=fi(a,f),P!=null&&p.unshift(Rl(a,P,C))):h||(P=fi(a,f),P!=null&&p.push(Rl(a,P,C)))),a=a.return}p.length!==0&&t.push({event:n,listeners:p})}var m1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function d0(t){return(typeof t=="string"?t:""+t).replace(m1,`
`).replace(g1,"")}function m0(t,n){return n=d0(n),d0(t)===n}function lt(t,n,a,o,h,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||vn(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&vn(t,""+o);break;case"className":Mn(t,"class",o);break;case"tabIndex":Mn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(t,a,o);break;case"style":$o(t,o,f);break;case"data":if(n!=="object"){Mn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Da(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&lt(t,n,"name",h.name,h,null),lt(t,n,"formEncType",h.formEncType,h,null),lt(t,n,"formMethod",h.formMethod,h,null),lt(t,n,"formTarget",h.formTarget,h,null)):(lt(t,n,"encType",h.encType,h,null),lt(t,n,"method",h.method,h,null),lt(t,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Da(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=hi);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Da(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),zs(t,"popover",o);break;case"xlinkActuate":kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":kt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":kt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":kt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":kt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":zs(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vu.get(a)||a,zs(t,a,o))}}function md(t,n,a,o,h,f){switch(a){case"style":$o(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?vn(t,o):(typeof o=="number"||typeof o=="bigint")&&vn(t,""+o);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"onClick":o!=null&&(t.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rt.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=t[Mt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):zs(t,a,o)}}}function nn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var p=a[f];if(p!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(t,n,f,p,a,null)}}h&&lt(t,n,"srcSet",a.srcSet,a,null),o&&lt(t,n,"src",a.src,a,null);return;case"input":Ue("invalid",t);var b=f=p=h=null,C=null,P=null;for(o in a)if(a.hasOwnProperty(o)){var $=a[o];if($!=null)switch(o){case"name":h=$;break;case"type":p=$;break;case"checked":C=$;break;case"defaultChecked":P=$;break;case"value":f=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,n));break;default:lt(t,n,o,$,a,null)}}pu(t,f,b,C,P,p,h,!1);return;case"select":Ue("invalid",t),o=p=f=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":f=b;break;case"defaultValue":p=b;break;case"multiple":o=b;default:lt(t,n,h,b,a,null)}n=f,a=p,t.multiple=!!o,n!=null?qs(t,!!o,n,!1):a!=null&&qs(t,!!o,a,!0);return;case"textarea":Ue("invalid",t),f=h=o=null;for(p in a)if(a.hasOwnProperty(p)&&(b=a[p],b!=null))switch(p){case"value":o=b;break;case"defaultValue":h=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:lt(t,n,p,b,a,null)}Hs(t,o,h,f);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(o=a[C],o!=null))switch(C){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:lt(t,n,C,o,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(o=0;o<xl.length;o++)Ue(xl[o],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(o=a[P],o!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:lt(t,n,P,o,a,null)}return;default:if(Na(n)){for($ in a)a.hasOwnProperty($)&&(o=a[$],o!==void 0&&md(t,n,$,o,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(o=a[b],o!=null&&lt(t,n,b,o,a,null))}function p1(t,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,p=null,b=null,C=null,P=null,$=null;for(G in a){var X=a[G];if(a.hasOwnProperty(G)&&X!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=X;default:o.hasOwnProperty(G)||lt(t,n,G,null,o,X)}}for(var B in o){var G=o[B];if(X=a[B],o.hasOwnProperty(B)&&(G!=null||X!=null))switch(B){case"type":f=G;break;case"name":h=G;break;case"checked":P=G;break;case"defaultChecked":$=G;break;case"value":p=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:G!==X&&lt(t,n,B,G,o,X)}}Ia(t,p,b,C,P,$,f,h);return;case"select":G=p=b=B=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":G=C;default:o.hasOwnProperty(f)||lt(t,n,f,null,o,C)}for(h in o)if(f=o[h],C=a[h],o.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":B=f;break;case"defaultValue":b=f;break;case"multiple":p=f;default:f!==C&&lt(t,n,h,f,o,C)}n=b,a=p,o=G,B!=null?qs(t,!!a,B,!1):!!o!=!!a&&(n!=null?qs(t,!!a,n,!0):qs(t,!!a,a?[]:"",!1));return;case"textarea":G=B=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!o.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:lt(t,n,b,null,o,h)}for(p in o)if(h=o[p],f=a[p],o.hasOwnProperty(p)&&(h!=null||f!=null))switch(p){case"value":B=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&lt(t,n,p,h,o,f)}yu(t,B,G);return;case"option":for(var ce in a)if(B=a[ce],a.hasOwnProperty(ce)&&B!=null&&!o.hasOwnProperty(ce))switch(ce){case"selected":t.selected=!1;break;default:lt(t,n,ce,null,o,B)}for(C in o)if(B=o[C],G=a[C],o.hasOwnProperty(C)&&B!==G&&(B!=null||G!=null))switch(C){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:lt(t,n,C,B,o,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)B=a[Te],a.hasOwnProperty(Te)&&B!=null&&!o.hasOwnProperty(Te)&&lt(t,n,Te,null,o,B);for(P in o)if(B=o[P],G=a[P],o.hasOwnProperty(P)&&B!==G&&(B!=null||G!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,n));break;default:lt(t,n,P,B,o,G)}return;default:if(Na(n)){for(var ut in a)B=a[ut],a.hasOwnProperty(ut)&&B!==void 0&&!o.hasOwnProperty(ut)&&md(t,n,ut,void 0,o,B);for($ in o)B=o[$],G=a[$],!o.hasOwnProperty($)||B===G||B===void 0&&G===void 0||md(t,n,$,B,o,G);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!o.hasOwnProperty(k)&&lt(t,n,k,null,o,B);for(X in o)B=o[X],G=a[X],!o.hasOwnProperty(X)||B===G||B==null&&G==null||lt(t,n,X,B,o,G)}function g0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function y1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,p=h.initiatorType,b=h.duration;if(f&&b&&g0(p)){for(p=0,b=h.responseEnd,o+=1;o<a.length;o++){var C=a[o],P=C.startTime;if(P>b)break;var $=C.transferSize,X=C.initiatorType;$&&g0(X)&&(C=C.responseEnd,p+=$*(C<b?1:(b-P)/(C-P)))}if(--o,n+=8*(f+p)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var gd=null,pd=null;function Ec(t){return t.nodeType===9?t:t.ownerDocument}function p0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y0(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function yd(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _d=null;function _1(){var t=window.event;return t&&t.type==="popstate"?t===_d?!1:(_d=t,!0):(_d=null,!1)}var _0=typeof setTimeout=="function"?setTimeout:void 0,v1=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,E1=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(t){return v0.resolve(null).then(t).catch(b1)}:_0;function b1(t){setTimeout(function(){throw t})}function fr(t){return t==="head"}function E0(t,n){var a=n,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),ho(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Cl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Cl(a);for(var f=a.firstChild;f;){var p=f.nextSibling,b=f.nodeName;f[z]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=p}}else a==="body"&&Cl(t.ownerDocument.body);a=h}while(a);ho(n)}function b0(t,n){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function vd(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":vd(a),Us(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function T1(t,n,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[z])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ni(t.nextSibling),t===null)break}return null}function S1(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ni(t.nextSibling),t===null))return null;return t}function T0(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ni(t.nextSibling),t===null))return null;return t}function Ed(t){return t.data==="$?"||t.data==="$~"}function bd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function A1(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ni(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Td=null;function S0(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return ni(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function A0(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function w0(t,n,a){switch(n=Ec(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Cl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Us(t)}var ii=new Map,x0=new Set;function bc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ws=re.d;re.d={f:w1,r:x1,D:R1,C:C1,L:I1,m:N1,X:O1,S:D1,M:M1};function w1(){var t=ws.f(),n=fc();return t||n}function x1(t){var n=oe(t);n!==null&&n.tag===5&&n.type==="form"?Hp(n):ws.r(t)}var lo=typeof document>"u"?null:document;function R0(t,n,a){var o=lo;if(o&&typeof n=="string"&&n){var h=_n(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),x0.has(h)||(x0.add(h),t={rel:t,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),nn(n,"link",t),_e(n),o.head.appendChild(n)))}}function R1(t){ws.D(t),R0("dns-prefetch",t,null)}function C1(t,n){ws.C(t,n),R0("preconnect",t,n)}function I1(t,n,a){ws.L(t,n,a);var o=lo;if(o&&t&&n){var h='link[rel="preload"][as="'+_n(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+_n(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+_n(a.imageSizes)+'"]')):h+='[href="'+_n(t)+'"]';var f=h;switch(n){case"style":f=uo(t);break;case"script":f=co(t)}ii.has(f)||(t=w({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),ii.set(f,t),o.querySelector(h)!==null||n==="style"&&o.querySelector(Il(f))||n==="script"&&o.querySelector(Nl(f))||(n=o.createElement("link"),nn(n,"link",t),_e(n),o.head.appendChild(n)))}}function N1(t,n){ws.m(t,n);var a=lo;if(a&&t){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+_n(o)+'"][href="'+_n(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=co(t)}if(!ii.has(f)&&(t=w({rel:"modulepreload",href:t},n),ii.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Nl(f)))return}o=a.createElement("link"),nn(o,"link",t),_e(o),a.head.appendChild(o)}}}function D1(t,n,a){ws.S(t,n,a);var o=lo;if(o&&t){var h=be(o).hoistableStyles,f=uo(t);n=n||"default";var p=h.get(f);if(!p){var b={loading:0,preload:null};if(p=o.querySelector(Il(f)))b.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":n},a),(a=ii.get(f))&&Sd(t,a);var C=p=o.createElement("link");_e(C),nn(C,"link",t),C._p=new Promise(function(P,$){C.onload=P,C.onerror=$}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Tc(p,n,o)}p={type:"stylesheet",instance:p,count:1,state:b},h.set(f,p)}}}function O1(t,n){ws.X(t,n);var a=lo;if(a&&t){var o=be(a).hoistableScripts,h=co(t),f=o.get(h);f||(f=a.querySelector(Nl(h)),f||(t=w({src:t,async:!0},n),(n=ii.get(h))&&Ad(t,n),f=a.createElement("script"),_e(f),nn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function M1(t,n){ws.M(t,n);var a=lo;if(a&&t){var o=be(a).hoistableScripts,h=co(t),f=o.get(h);f||(f=a.querySelector(Nl(h)),f||(t=w({src:t,async:!0,type:"module"},n),(n=ii.get(h))&&Ad(t,n),f=a.createElement("script"),_e(f),nn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function C0(t,n,a,o){var h=(h=Re.current)?bc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=uo(a.href),a=be(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uo(a.href);var f=be(h).hoistableStyles,p=f.get(t);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,p),(f=h.querySelector(Il(t)))&&!f._p&&(p.instance=f,p.state.loading=5),ii.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ii.set(t,a),f||V1(h,t,a,p.state))),n&&o===null)throw Error(r(528,""));return p}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=co(a),a=be(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function uo(t){return'href="'+_n(t)+'"'}function Il(t){return'link[rel="stylesheet"]['+t+"]"}function I0(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function V1(t,n,a,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),nn(n,"link",a),_e(n),t.head.appendChild(n))}function co(t){return'[src="'+_n(t)+'"]'}function Nl(t){return"script[async]"+t}function N0(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+_n(a.href)+'"]');if(o)return n.instance=o,_e(o),o;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),_e(o),nn(o,"style",h),Tc(o,a.precedence,t),n.instance=o;case"stylesheet":h=uo(a.href);var f=t.querySelector(Il(h));if(f)return n.state.loading|=4,n.instance=f,_e(f),f;o=I0(a),(h=ii.get(h))&&Sd(o,h),f=(t.ownerDocument||t).createElement("link"),_e(f);var p=f;return p._p=new Promise(function(b,C){p.onload=b,p.onerror=C}),nn(f,"link",o),n.state.loading|=4,Tc(f,a.precedence,t),n.instance=f;case"script":return f=co(a.src),(h=t.querySelector(Nl(f)))?(n.instance=h,_e(h),h):(o=a,(h=ii.get(f))&&(o=w({},a),Ad(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),_e(h),nn(h,"link",o),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Tc(o,a.precedence,t));return n.instance}function Tc(t,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,p=0;p<o.length;p++){var b=o[p];if(b.dataset.precedence===n)f=b;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Sd(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Ad(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Sc=null;function D0(t,n,a){if(Sc===null){var o=new Map,h=Sc=new Map;h.set(a,o)}else h=Sc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[z]||f[St]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var p=f.getAttribute(n)||"";p=t+p;var b=o.get(p);b?b.push(f):o.set(p,[f])}}return o}function O0(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function k1(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function M0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function L1(t,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=uo(o.href),f=n.querySelector(Il(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Ac.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=f,_e(f);return}f=n.ownerDocument||n,o=I0(o),(h=ii.get(h))&&Sd(o,h),f=f.createElement("link"),_e(f);var p=f;p._p=new Promise(function(b,C){p.onload=b,p.onerror=C}),nn(f,"link",o),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ac.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var wd=0;function U1(t,n){return t.stylesheets&&t.count===0&&xc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&xc(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+n);0<t.imgBytes&&wd===0&&(wd=62500*y1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&xc(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>wd?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Ac(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wc=null;function xc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wc=new Map,n.forEach(j1,t),wc=null,Ac.call(t))}function j1(t,n){if(!(n.state.loading&4)){var a=wc.get(t);if(a)var o=a.get(null);else{a=new Map,wc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var p=h[f];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),o=p)}o&&a.set(null,o)}h=n.instance,p=h.getAttribute("data-precedence"),f=a.get(p)||o,f===o&&a.set(null,h),a.set(p,h),this.count++,o=Ac.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Dl={$$typeof:Se,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function P1(t,n,a,o,h,f,p,b,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nn(0),this.hiddenUpdates=Nn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function V0(t,n,a,o,h,f,p,b,C,P,$,X){return t=new P1(t,n,a,p,C,P,$,X,b),n=1,f===!0&&(n|=24),f=kn(3,null,null,n),t.current=f,f.stateNode=t,n=sf(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},lf(f),t}function k0(t){return t?(t=Ba,t):Ba}function L0(t,n,a,o,h,f){h=k0(h),o.context===null?o.context=h:o.pendingContext=h,o=tr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=nr(t,o,n),a!==null&&(An(a,t,n),ul(a,t,n))}function U0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function xd(t,n){U0(t,n),(t=t.alternate)&&U0(t,n)}function j0(t){if(t.tag===13||t.tag===31){var n=Xr(t,67108864);n!==null&&An(n,t,67108864),xd(t,67108864)}}function P0(t){if(t.tag===13||t.tag===31){var n=zn();n=as(n);var a=Xr(t,n);a!==null&&An(a,t,n),xd(t,n)}}var Rc=!0;function z1(t,n,a,o){var h=F.T;F.T=null;var f=re.p;try{re.p=2,Rd(t,n,a,o)}finally{re.p=f,F.T=h}}function B1(t,n,a,o){var h=F.T;F.T=null;var f=re.p;try{re.p=8,Rd(t,n,a,o)}finally{re.p=f,F.T=h}}function Rd(t,n,a,o){if(Rc){var h=Cd(o);if(h===null)dd(t,n,o,Cc,a),B0(t,o);else if(H1(h,t,n,a,o))o.stopPropagation();else if(B0(t,o),n&4&&-1<q1.indexOf(t)){for(;h!==null;){var f=oe(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=Gn(f.pendingLanes);if(p!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;p;){var C=1<<31-Ze(p);b.entanglements[1]|=C,p&=~C}Bi(f),(et&6)===0&&(cc=Ot()+500,wl(0))}}break;case 31:case 13:b=Xr(f,2),b!==null&&An(b,f,2),fc(),xd(f,2)}if(f=Cd(o),f===null&&dd(t,n,o,Cc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else dd(t,n,o,null,a)}}function Cd(t){return t=Qn(t),Id(t)}var Cc=null;function Id(t){if(Cc=null,t=q(t),t!==null){var n=c(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=d(n),t!==null)return t;t=null}else if(a===31){if(t=g(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Cc=t,null}function z0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ns()){case xi:return 2;case is:return 8;case Ri:case Sa:return 32;case qn:return 268435456;default:return 32}default:return 32}}var Nd=!1,dr=null,mr=null,gr=null,Ol=new Map,Ml=new Map,pr=[],q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(t,n){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ol.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(n.pointerId)}}function Vl(t,n,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=oe(n),n!==null&&j0(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function H1(t,n,a,o,h){switch(n){case"focusin":return dr=Vl(dr,t,n,a,o,h),!0;case"dragenter":return mr=Vl(mr,t,n,a,o,h),!0;case"mouseover":return gr=Vl(gr,t,n,a,o,h),!0;case"pointerover":var f=h.pointerId;return Ol.set(f,Vl(Ol.get(f)||null,t,n,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Ml.set(f,Vl(Ml.get(f)||null,t,n,a,o,h)),!0}return!1}function q0(t){var n=q(t.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){t.blockedOn=n,Dn(t.priority,function(){P0(a)});return}}else if(n===31){if(n=g(a),n!==null){t.blockedOn=n,Dn(t.priority,function(){P0(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Cd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Qo=o,a.target.dispatchEvent(o),Qo=null}else return n=oe(a),n!==null&&j0(n),t.blockedOn=a,!1;n.shift()}return!0}function H0(t,n,a){Ic(t)&&a.delete(n)}function G1(){Nd=!1,dr!==null&&Ic(dr)&&(dr=null),mr!==null&&Ic(mr)&&(mr=null),gr!==null&&Ic(gr)&&(gr=null),Ol.forEach(H0),Ml.forEach(H0)}function Nc(t,n){t.blockedOn===n&&(t.blockedOn=null,Nd||(Nd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,G1)))}var Dc=null;function G0(t){Dc!==t&&(Dc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Dc===t&&(Dc=null);for(var n=0;n<t.length;n+=3){var a=t[n],o=t[n+1],h=t[n+2];if(typeof o!="function"){if(Id(o||a)===null)continue;break}var f=oe(a);f!==null&&(t.splice(n,3),n-=3,Cf(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function ho(t){function n(C){return Nc(C,t)}dr!==null&&Nc(dr,t),mr!==null&&Nc(mr,t),gr!==null&&Nc(gr,t),Ol.forEach(n),Ml.forEach(n);for(var a=0;a<pr.length;a++){var o=pr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<pr.length&&(a=pr[0],a.blockedOn===null);)q0(a),a.blockedOn===null&&pr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],p=h[Mt]||null;if(typeof f=="function")p||G0(a);else if(p){var b=null;if(f&&f.hasAttribute("formAction")){if(h=f,p=f[Mt]||null)b=p.formAction;else if(Id(h)!==null)continue}else b=p.action;typeof b=="function"?a[o+1]=b:(a.splice(o,3),o-=3),G0(a)}}}function F0(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Dd(t){this._internalRoot=t}Oc.prototype.render=Dd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=zn();L0(a,o,t,n,null,null)},Oc.prototype.unmount=Dd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;L0(t.current,2,null,t,null,null),fc(),n[dn]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var n=xa();t={blockedOn:null,target:t,priority:n};for(var a=0;a<pr.length&&n!==0&&n<pr[a].priority;a++);pr.splice(a,0,t),a===0&&q0(t)}};var $0=e.version;if($0!=="19.2.0")throw Error(r(527,$0,"19.2.0"));re.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=_(n),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var F1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Cn=Mc.inject(F1),Qt=Mc}catch{}}return Ll.createRoot=function(t,n){if(!l(t))throw Error(r(299));var a=!1,o="",h=Wp,f=ey,p=ty;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=V0(t,1,!1,null,null,a,o,null,h,f,p,F0),t[dn]=n.current,fd(t),new Dd(n)},Ll.hydrateRoot=function(t,n,a){if(!l(t))throw Error(r(299));var o=!1,h="",f=Wp,p=ey,b=ty,C=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),n=V0(t,1,!0,n,a??null,o,h,C,f,p,b,F0),n.context=k0(null),a=n.current,o=zn(),o=as(o),h=tr(o),h.callback=null,nr(a,h,o),a=o,n.current.lanes=a,rs(n,a),Bi(n),t[dn]=n.current,fd(t),new Oc(n)},Ll.version="19.2.0",Ll}var n_;function iS(){if(n_)return Vd.exports;n_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Vd.exports=nS(),Vd.exports}var sS=iS();const rS=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aS=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,r)=>r?r.toUpperCase():i.toLowerCase()),i_=s=>{const e=aS(s);return e.charAt(0).toUpperCase()+e.slice(1)},Gv=(...s)=>s.filter((e,i,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===i).join(" ").trim(),oS=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var lS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const uS=ve.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:l="",children:c,iconNode:d,...g},y)=>ve.createElement("svg",{ref:y,...lS,width:e,height:e,stroke:s,strokeWidth:r?Number(i)*24/Number(e):i,className:Gv("lucide",l),...!c&&!oS(g)&&{"aria-hidden":"true"},...g},[...d.map(([_,S])=>ve.createElement(_,S)),...Array.isArray(c)?c:[c]]));const Ke=(s,e)=>{const i=ve.forwardRef(({className:r,...l},c)=>ve.createElement(uS,{ref:c,iconNode:e,className:Gv(`lucide-${rS(i_(s))}`,`lucide-${s}`,r),...l}));return i.displayName=i_(s),i};const cS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vc=Ke("arrow-right",cS);const hS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],fS=Ke("book-open",hS);const dS=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],mS=Ke("book",dS);const gS=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],jd=Ke("brain",gS);const pS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yS=Ke("calendar",pS);const _S=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vS=Ke("chevron-right",_S);const ES=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bS=Ke("chevron-up",ES);const TS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Pd=Ke("circle-check-big",TS);const SS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],AS=Ke("circle-x",SS);const wS=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],xS=Ke("git-compare",wS);const RS=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],kc=Ke("headphones",RS);const CS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],s_=Ke("history",CS);const IS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],r_=Ke("info",IS);const NS=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],DS=Ke("key-round",NS);const OS=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],a_=Ke("lightbulb",OS);const MS=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],VS=Ke("loader-circle",MS);const kS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],LS=Ke("lock",kS);const US=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],jS=Ke("log-out",US);const PS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],o_=Ke("mail",PS);const zS=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Lc=Ke("moon",zS);const BS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],l_=Ke("pause",BS);const qS=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zd=Ke("pen-line",qS);const HS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],GS=Ke("play",HS);const FS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$S=Ke("refresh-cw",FS);const QS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],u_=Ke("rotate-ccw",QS);const KS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],c_=Ke("search",KS);const YS=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],XS=Ke("send",YS);const JS=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],h_=Ke("skip-forward",JS);const ZS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Bd=Ke("sparkles",ZS);const WS=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Uc=Ke("sun",WS);const eA=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tA=Ke("triangle-alert",eA);const nA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],iA=Ke("user",nA);const sA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qd=Ke("x",sA),rA=()=>{};var f_={};const Fv=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},aA=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[i++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[i++],d=s[i++],g=s[i++],y=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[i++],d=s[i++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},$v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,g=d?s[l+1]:0,y=l+2<s.length,_=y?s[l+2]:0,S=c>>2,w=(c&3)<<4|g>>4;let A=(g&15)<<2|_>>6,K=_&63;y||(K=64,d||(A=64)),r.push(i[S],i[w],i[A],i[K])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Fv(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):aA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=i[s.charAt(l++)],g=l<s.length?i[s.charAt(l)]:0;++l;const _=l<s.length?i[s.charAt(l)]:64;++l;const w=l<s.length?i[s.charAt(l)]:64;if(++l,c==null||g==null||_==null||w==null)throw new oA;const A=c<<2|g>>4;if(r.push(A),_!==64){const K=g<<4&240|_>>2;if(r.push(K),w!==64){const W=_<<6&192|w;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class oA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lA=function(s){const e=Fv(s);return $v.encodeByteArray(e,!0)},th=function(s){return lA(s).replace(/\./g,"")},Qv=function(s){try{return $v.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const cA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof f_>"u")return;const s=f_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},fA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Qv(s[1]);return e&&JSON.parse(e)},bh=()=>{try{return rA()||cA()||hA()||fA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Kv=s=>bh()?.emulatorHosts?.[s],dA=s=>{const e=Kv(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},Yv=()=>bh()?.config,Xv=s=>bh()?.[`_${s}`];class mA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}function Oo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jv(s){return(await fetch(s,{credentials:"include"})).ok}function gA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[th(JSON.stringify(i)),th(JSON.stringify(d)),""].join(".")}const Hl={};function pA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?s.emulator.push(e):s.prod.push(e);return s}function yA(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let d_=!1;function Zv(s,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||Hl[s]===e||Hl[s]||d_)return;Hl[s]=e;function i(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=pA().prod.length>0;function d(){const A=document.getElementById(r);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,K){A.setAttribute("width","24"),A.setAttribute("id",K),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function _(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{d_=!0,d()},A}function S(A,K){A.setAttribute("id",K),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function w(){const A=yA(r),K=i("text"),W=document.getElementById(K)||document.createElement("span"),ie=i("learnmore"),ee=document.getElementById(ie)||document.createElement("a"),ge=i("preprendIcon"),Ee=document.getElementById(ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Se=A.element;g(Se),S(ee,ie);const ke=_();y(Ee,ge),Se.append(Ee,W,ee,ke),document.body.appendChild(Se)}c?(W.innerText="Preview backend disconnected.",Ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",K)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function vA(){const s=bh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function TA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SA(){const s=hn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AA(){return!vA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}const RA="FirebaseError";class Ms extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=RA,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?CA(c,r):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Ms(l,g,r)}}function CA(s,e){return s.replace(IA,(i,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const IA=/\{\$([^}]+)}/g;function NA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ma(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const l of i){if(!r.includes(l))return!1;const c=s[l],d=e[l];if(m_(c)&&m_(d)){if(!ma(c,d))return!1}else if(c!==d)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function m_(s){return s!==null&&typeof s=="object"}function ou(s){const e=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ul(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function jl(s){const e=s.indexOf("?");if(!e)return"";const i=s.indexOf("#",e);return s.substring(e,i>0?i:void 0)}function DA(s,e){const i=new OA(s,e);return i.subscribe.bind(i)}class OA{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,r){let l;if(e===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");MA(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:r},l.next===void 0&&(l.next=Hd),l.error===void 0&&(l.error=Hd),l.complete===void 0&&(l.complete=Hd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MA(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function Hd(){}function Jt(s){return s&&s._delegate?s._delegate:s}class ga{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ua="[DEFAULT]";class VA{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new mA;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LA(e))try{this.getOrInitializeService({instanceIdentifier:ua})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ua){return this.instances.has(e)}getOptions(e=ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);r===g&&d.resolve(l)}return l}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kA(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ua){return this.component?this.component.multipleInstances?e:ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kA(s){return s===ua?void 0:s}function LA(s){return s.instantiationMode==="EAGER"}class UA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new VA(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const jA={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},PA=ze.INFO,zA={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},BA=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=zA[e];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Im{constructor(e){this.name=e,this._logLevel=PA,this._logHandler=BA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const qA=(s,e)=>e.some(i=>s instanceof i);let g_,p_;function HA(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GA(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wv=new WeakMap,sm=new WeakMap,eE=new WeakMap,Gd=new WeakMap,Nm=new WeakMap;function FA(s){const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{i(Sr(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&Wv.set(i,s)}).catch(()=>{}),Nm.set(e,s),e}function $A(s){if(sm.has(s))return;const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});sm.set(s,e)}let rm={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return sm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||eE.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Sr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function QA(s){rm=s(rm)}function KA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(Fd(this),e,...i);return eE.set(r,e.sort?e.sort():[e]),Sr(r)}:GA().includes(s)?function(...e){return s.apply(Fd(this),e),Sr(Wv.get(this))}:function(...e){return Sr(s.apply(Fd(this),e))}}function YA(s){return typeof s=="function"?KA(s):(s instanceof IDBTransaction&&$A(s),qA(s,HA())?new Proxy(s,rm):s)}function Sr(s){if(s instanceof IDBRequest)return FA(s);if(Gd.has(s))return Gd.get(s);const e=YA(s);return e!==s&&(Gd.set(s,e),Nm.set(e,s)),e}const Fd=s=>Nm.get(s);function XA(s,e,{blocked:i,upgrade:r,blocking:l,terminated:c}={}){const d=indexedDB.open(s,e),g=Sr(d);return r&&d.addEventListener("upgradeneeded",y=>{r(Sr(d.result),y.oldVersion,y.newVersion,Sr(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const JA=["get","getKey","getAll","getAllKeys","count"],ZA=["put","add","delete","clear"],$d=new Map;function y_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,l=ZA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||JA.includes(i)))return;const c=async function(d,...g){const y=this.transaction(d,l?"readwrite":"readonly");let _=y.store;return r&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&y.done]))[0]};return $d.set(e,c),c}QA(s=>({...s,get:(e,i,r)=>y_(e,i)||s.get(e,i,r),has:(e,i)=>!!y_(e,i)||s.has(e,i)}));class WA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(ew(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function ew(s){return s.getComponent()?.type==="VERSION"}const am="@firebase/app",__="0.14.6";const Is=new Im("@firebase/app"),tw="@firebase/app-compat",nw="@firebase/analytics-compat",iw="@firebase/analytics",sw="@firebase/app-check-compat",rw="@firebase/app-check",aw="@firebase/auth",ow="@firebase/auth-compat",lw="@firebase/database",uw="@firebase/data-connect",cw="@firebase/database-compat",hw="@firebase/functions",fw="@firebase/functions-compat",dw="@firebase/installations",mw="@firebase/installations-compat",gw="@firebase/messaging",pw="@firebase/messaging-compat",yw="@firebase/performance",_w="@firebase/performance-compat",vw="@firebase/remote-config",Ew="@firebase/remote-config-compat",bw="@firebase/storage",Tw="@firebase/storage-compat",Sw="@firebase/firestore",Aw="@firebase/ai",ww="@firebase/firestore-compat",xw="firebase",Rw="12.6.0";const om="[DEFAULT]",Cw={[am]:"fire-core",[tw]:"fire-core-compat",[iw]:"fire-analytics",[nw]:"fire-analytics-compat",[rw]:"fire-app-check",[sw]:"fire-app-check-compat",[aw]:"fire-auth",[ow]:"fire-auth-compat",[lw]:"fire-rtdb",[uw]:"fire-data-connect",[cw]:"fire-rtdb-compat",[hw]:"fire-fn",[fw]:"fire-fn-compat",[dw]:"fire-iid",[mw]:"fire-iid-compat",[gw]:"fire-fcm",[pw]:"fire-fcm-compat",[yw]:"fire-perf",[_w]:"fire-perf-compat",[vw]:"fire-rc",[Ew]:"fire-rc-compat",[bw]:"fire-gcs",[Tw]:"fire-gcs-compat",[Sw]:"fire-fst",[ww]:"fire-fst-compat",[Aw]:"fire-vertex","fire-js":"fire-js",[xw]:"fire-js-all"};const nh=new Map,Iw=new Map,lm=new Map;function v_(s,e){try{s.container.addComponent(e)}catch(i){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function Ao(s){const e=s.name;if(lm.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,s);for(const i of nh.values())v_(i,s);for(const i of Iw.values())v_(i,s);return!0}function Dm(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function pn(s){return s==null?!1:s.settings!==void 0}const Nw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new au("app","Firebase",Nw);class Dw{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const Mo=Rw;function tE(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:om,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Ar.create("bad-app-name",{appName:String(l)});if(i||(i=Yv()),!i)throw Ar.create("no-options");const c=nh.get(l);if(c){if(ma(i,c.options)&&ma(r,c.config))return c;throw Ar.create("duplicate-app",{appName:l})}const d=new UA(l);for(const y of lm.values())d.addComponent(y);const g=new Dw(i,r,d);return nh.set(l,g),g}function nE(s=om){const e=nh.get(s);if(!e&&s===om&&Yv())return tE();if(!e)throw Ar.create("no-app",{appName:s});return e}function wr(s,e,i){let r=Cw[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(d.join(" "));return}Ao(new ga(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Ow="firebase-heartbeat-database",Mw=1,Yl="firebase-heartbeat-store";let Qd=null;function iE(){return Qd||(Qd=XA(Ow,Mw,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Yl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Ar.create("idb-open",{originalErrorMessage:s.message})})),Qd}async function Vw(s){try{const i=(await iE()).transaction(Yl),r=await i.objectStore(Yl).get(sE(s));return await i.done,r}catch(e){if(e instanceof Ms)Is.warn(e.message);else{const i=Ar.create("idb-get",{originalErrorMessage:e?.message});Is.warn(i.message)}}}async function E_(s,e){try{const r=(await iE()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,sE(s)),await r.done}catch(i){if(i instanceof Ms)Is.warn(i.message);else{const r=Ar.create("idb-set",{originalErrorMessage:i?.message});Is.warn(r.message)}}}function sE(s){return`${s.name}!${s.options.appId}`}const kw=1024,Lw=30;class Uw{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Pw(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=b_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>Lw){const l=zw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=b_(),{heartbeatsToSend:i,unsentEntries:r}=jw(this._heartbeatsCache.heartbeats),l=th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Is.warn(e),""}}}function b_(){return new Date().toISOString().substring(0,10)}function jw(s,e=kw){const i=[];let r=s.slice();for(const l of s){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),T_(i)>e){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),T_(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class Pw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Vw(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function T_(s){return th(JSON.stringify({version:2,heartbeats:s})).length}function zw(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}function Bw(s){Ao(new ga("platform-logger",e=>new WA(e),"PRIVATE")),Ao(new ga("heartbeat",e=>new Uw(e),"PRIVATE")),wr(am,__,s),wr(am,__,"esm2020"),wr("fire-js","")}Bw("");var qw="firebase",Hw="12.6.0";wr(qw,Hw,"app");function rE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gw=rE,aE=new au("auth","Firebase",rE());const ih=new Im("@firebase/auth");function Fw(s,...e){ih.logLevel<=ze.WARN&&ih.warn(`Auth (${Mo}): ${s}`,...e)}function Fc(s,...e){ih.logLevel<=ze.ERROR&&ih.error(`Auth (${Mo}): ${s}`,...e)}function ai(s,...e){throw Mm(s,...e)}function bi(s,...e){return Mm(s,...e)}function Om(s,e,i){const r={...Gw(),[e]:i};return new au("auth","Firebase",r).create(e,{appName:s.name})}function Ti(s){return Om(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $w(s,e,i){const r=i;if(!(e instanceof r))throw r.name!==e.constructor.name&&ai(s,"argument-error"),Om(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mm(s,...e){if(typeof s!="string"){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return aE.create(s,...e)}function Ae(s,e,...i){if(!s)throw Mm(e,...i)}function Rs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Fc(e),new Error(e)}function Ns(s,e){s||Rs(e)}function um(){return typeof self<"u"&&self.location?.href||""}function Qw(){return S_()==="http:"||S_()==="https:"}function S_(){return typeof self<"u"&&self.location?.protocol||null}function Kw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qw()||bA()||"connection"in navigator)?navigator.onLine:!0}function Yw(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class lu{constructor(e,i){this.shortDelay=e,this.longDelay=i,Ns(i>e,"Short delay should be less than long delay!"),this.isMobile=_A()||TA()}get(){return Kw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vm(s,e){Ns(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}class oE{static initialize(e,i,r){this.fetchImpl=e,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Jw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Zw=new lu(3e4,6e4);function Zi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Wi(s,e,i,r,l={}){return lE(s,l,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const g=ou({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:y,...c};return EA()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Oo(s.emulatorConfig.host)&&(_.credentials="include"),oE.fetch()(await uE(s,s.config.apiHost,i,g),_)})}async function lE(s,e,i){s._canInitEmulator=!1;const r={...Xw,...e};try{const l=new ex(s),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw jc(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw jc(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw jc(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw jc(s,"user-disabled",d);const S=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Om(s,S,_);ai(s,S)}}catch(l){if(l instanceof Ms)throw l;ai(s,"network-request-failed",{message:String(l)})}}async function Vo(s,e,i,r,l={}){const c=await Wi(s,e,i,r,l);return"mfaPendingCredential"in c&&ai(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function uE(s,e,i,r){const l=`${e}${i}?${r}`,c=s,d=c.config.emulator?Vm(s.config,l):`${s.config.apiScheme}://${l}`;return Jw.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function Ww(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ex{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(bi(this.auth,"network-request-failed")),Zw.get())})}}function jc(s,e,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=bi(s,e,r);return l.customData._tokenResponse=i,l}function A_(s){return s!==void 0&&s.enterprise!==void 0}class tx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return Ww(i.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nx(s,e){return Wi(s,"GET","/v2/recaptchaConfig",Zi(s,e))}async function ix(s,e){return Wi(s,"POST","/v1/accounts:delete",e)}async function sh(s,e){return Wi(s,"POST","/v1/accounts:lookup",e)}function Gl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sx(s,e=!1){const i=Jt(s),r=await i.getIdToken(e),l=km(r);Ae(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:r,authTime:Gl(Kd(l.auth_time)),issuedAtTime:Gl(Kd(l.iat)),expirationTime:Gl(Kd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Kd(s){return Number(s)*1e3}function km(s){const[e,i,r]=s.split(".");if(e===void 0||i===void 0||r===void 0)return Fc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Qv(i);return l?JSON.parse(l):(Fc("Failed to decode base64 JWT payload"),null)}catch(l){return Fc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function w_(s){const e=km(s);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function wo(s,e,i=!1){if(i)return e;try{return await e}catch(r){throw r instanceof Ms&&rx(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function rx({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class ax{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cm{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rh(s){const e=s.auth,i=await s.getIdToken(),r=await wo(s,sh(e,{idToken:i}));Ae(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?cE(l.providerUserInfo):[],d=lx(s.providerData,c),g=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!d?.length,_=g?y:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new cm(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,S)}async function ox(s){const e=Jt(s);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lx(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function cE(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function ux(s,e){const i=await lE(s,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await uE(s,l,"/v1/token",`key=${c}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:r};return s.emulatorConfig&&Oo(s.emulatorConfig.host)&&(y.credentials="include"),oE.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function cx(s,e){return Wi(s,"POST","/v2/accounts:revokeToken",Zi(s,e))}class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const i=w_(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:r,refreshToken:l,expiresIn:c}=await ux(e,i);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,i,r){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,i){const{refreshToken:r,accessToken:l,expirationTime:c}=i,d=new _o;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Ae(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Ae(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Rs("not implemented")}}function _r(s,e){Ae(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new ax(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new cm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const i=await wo(this,this.stsTokenManager.getToken(this.auth,e));return Ae(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return sx(this,e)}reload(){return ox(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),i&&await rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await wo(this,ix(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const r=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:w,emailVerified:A,isAnonymous:K,providerData:W,stsTokenManager:ie}=i;Ae(w&&ie,e,"internal-error");const ee=_o.fromJSON(this.name,ie);Ae(typeof w=="string",e,"internal-error"),_r(r,e.name),_r(l,e.name),Ae(typeof A=="boolean",e,"internal-error"),Ae(typeof K=="boolean",e,"internal-error"),_r(c,e.name),_r(d,e.name),_r(g,e.name),_r(y,e.name),_r(_,e.name),_r(S,e.name);const ge=new vi({uid:w,auth:e,email:l,emailVerified:A,displayName:r,isAnonymous:K,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:ee,createdAt:_,lastLoginAt:S});return W&&Array.isArray(W)&&(ge.providerData=W.map(Ee=>({...Ee}))),y&&(ge._redirectEventId=y),ge}static async _fromIdTokenResponse(e,i,r=!1){const l=new _o;l.updateFromServerResponse(i);const c=new vi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await rh(c),c}static async _fromGetAccountInfoResponse(e,i,r){const l=i.users[0];Ae(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?cE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new _o;g.updateFromIdToken(r);const y=new vi({uid:l.localId,auth:e,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new cm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,_),y}}const x_=new Map;function Cs(s){Ns(s instanceof Function,"Expected a class definition");let e=x_.get(s);return e?(Ns(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,x_.set(s,e),e)}class hE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}hE.type="NONE";const R_=hE;function $c(s,e,i){return`firebase:${s}:${e}:${i}`}class vo{constructor(e,i,r){this.persistence=e,this.auth=i,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=$c(this.userKey,l.apiKey,c),this.fullPersistenceKey=$c("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await sh(this.auth,{idToken:e}).catch(()=>{});return i?vi._fromGetAccountInfoResponse(this.auth,i,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,r="authUser"){if(!i.length)return new vo(Cs(R_),e,r);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||Cs(R_);const d=$c(r,e.config.apiKey,e.name);let g=null;for(const _ of i)try{const S=await _._get(d);if(S){let w;if(typeof S=="string"){const A=await sh(e,{idToken:S}).catch(()=>{});if(!A)break;w=await vi._fromGetAccountInfoResponse(e,A,S)}else w=vi._fromJSON(e,S);_!==c&&(g=w),c=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new vo(c,e,r):(c=y[0],g&&await c._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new vo(c,e,r))}}function C_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yE(e))return"Blackberry";if(_E(e))return"Webos";if(dE(e))return"Safari";if((e.includes("chrome/")||mE(e))&&!e.includes("edge/"))return"Chrome";if(pE(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function fE(s=hn()){return/firefox\//i.test(s)}function dE(s=hn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mE(s=hn()){return/crios\//i.test(s)}function gE(s=hn()){return/iemobile/i.test(s)}function pE(s=hn()){return/android/i.test(s)}function yE(s=hn()){return/blackberry/i.test(s)}function _E(s=hn()){return/webos/i.test(s)}function Lm(s=hn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hx(s=hn()){return Lm(s)&&!!window.navigator?.standalone}function fx(){return SA()&&document.documentMode===10}function vE(s=hn()){return Lm(s)||pE(s)||_E(s)||yE(s)||/windows phone/i.test(s)||gE(s)}function EE(s,e=[]){let i;switch(s){case"Browser":i=C_(hn());break;case"Worker":i=`${C_(hn())}-${s}`;break;default:i=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${Mo}/${r}`}class dx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const r=c=>new Promise((d,g)=>{try{const y=e(c);d(y)}catch(y){g(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function mx(s,e={}){return Wi(s,"GET","/v2/passwordPolicy",Zi(s,e))}const gx=6;class px{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??gx,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=e.length>=r),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,i,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class yx{constructor(e,i,r,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new dx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=Cs(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await sh(this,{idToken:e}),r=await vi._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(pn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===d)&&g?.user&&(r=g.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Yw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Ti(this));const i=e?Jt(e):null;return i&&Ae(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mx(this),i=new px(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,i,r){return this.registerStateListener(this.authStateSubscription,e,i,r)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,r){return this.registerStateListener(this.idTokenSubscription,e,i,r)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await cx(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const r=await this.getOrInitRedirectPersistenceManager(i);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&Cs(e)||this._popupRedirectResolver;Ae(i,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Cs(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,r,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const y=e.addObserver(i,r,l);return()=>{d=!0,y()}}else{const y=e.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Fw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ai(s){return Jt(s)}class I_{constructor(e){this.auth=e,this.observer=null,this.addObserver=DA(i=>this.observer=i)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _x(s){Th=s}function bE(s){return Th.loadJS(s)}function vx(){return Th.recaptchaEnterpriseScript}function Ex(){return Th.gapiScript}function bx(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Tx{constructor(){this.enterprise=new Sx}ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}class Sx{ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}const Ax="recaptcha-enterprise",TE="NO_RECAPTCHA";class wx{constructor(e){this.type=Ax,this.auth=Ai(e)}async verify(e="verify",i=!1){async function r(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,g)=>{nx(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const _=new tx(y);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,d(_.siteKey)}}).catch(y=>{g(y)})})}function l(c,d,g){const y=window.grecaptcha;A_(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(_=>{d(_)}).catch(()=>{d(TE)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tx().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(g=>{if(!i&&A_(window.grecaptcha))l(g,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=vx();y.length!==0&&(y+=g),bE(y).then(()=>{l(g,c,d)}).catch(_=>{d(_)})}}).catch(g=>{d(g)})})}}async function N_(s,e,i,r=!1,l=!1){const c=new wx(s);let d;if(l)d=TE;else try{d=await c.verify(i)}catch{d=await c.verify(i,!0)}const g={...e};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const y=g.phoneEnrollmentInfo.phoneNumber,_=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const y=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:d}):Object.assign(g,{captchaResponse:d}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function ah(s,e,i,r,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await N_(s,e,i,i==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await N_(s,e,i,i==="getOobCode");return r(s,d)}else return Promise.reject(c)})}function xx(s,e){const i=Dm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(ma(c,e??{}))return l;ai(l,"already-initialized")}return i.initialize({options:e})}function Rx(s,e){const i=e?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Cs);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function Cx(s,e,i){const r=Ai(s);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=SE(e),{host:d,port:g}=Ix(e),y=g===null?"":`:${g}`,_={url:`${c}//${d}${y}/`},S=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(ma(_,r.config.emulator)&&ma(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,Oo(d)?(Jv(`${c}//${d}${y}`),Zv("Auth",!0)):Nx()}function SE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Ix(s){const e=SE(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:D_(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:D_(d)}}}function D_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Nx(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Um{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,i){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}async function Dx(s,e){return Wi(s,"POST","/v1/accounts:signUp",e)}async function Ox(s,e){return Vo(s,"POST","/v1/accounts:signInWithPassword",Zi(s,e))}async function AE(s,e){return Wi(s,"POST","/v1/accounts:sendOobCode",Zi(s,e))}async function Mx(s,e){return AE(s,e)}async function Vx(s,e){return AE(s,e)}async function kx(s,e){return Vo(s,"POST","/v1/accounts:signInWithEmailLink",Zi(s,e))}async function Lx(s,e){return Vo(s,"POST","/v1/accounts:signInWithEmailLink",Zi(s,e))}class Xl extends Um{constructor(e,i,r,l=null){super("password",r),this._email=e,this._password=i,this._tenantId=l}static _fromEmailAndPassword(e,i){return new Xl(e,i,"password")}static _fromEmailAndCode(e,i,r=null){return new Xl(e,i,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ah(e,i,"signInWithPassword",Ox);case"emailLink":return kx(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":const r={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ah(e,r,"signUpPassword",Dx);case"emailLink":return Lx(e,{idToken:i,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Eo(s,e){return Vo(s,"POST","/v1/accounts:signInWithIdp",Zi(s,e))}const Ux="http://localhost";class pa extends Um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):ai("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=i;if(!r||!l)return null;const d=new pa(r,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const i=this.buildRequest();return Eo(e,i)}_linkToIdToken(e,i){const r=this.buildRequest();return r.idToken=i,Eo(e,r)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,Eo(e,i)}buildRequest(){const e={requestUri:Ux,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=ou(i)}return e}}function jx(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Px(s){const e=Ul(jl(s)).link,i=e?Ul(jl(e)).deep_link_id:null,r=Ul(jl(s)).deep_link_id;return(r?Ul(jl(r)).link:null)||r||i||e||s}class jm{constructor(e){const i=Ul(jl(e)),r=i.apiKey??null,l=i.oobCode??null,c=jx(i.mode??null);Ae(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(e){const i=Px(e);try{return new jm(i)}catch{return null}}}class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,i){return Xl._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const r=jm.parseLink(i);return Ae(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class uu extends Pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class vr extends uu{constructor(){super("facebook.com")}static credential(e){return pa._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";class xs extends uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return pa._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return xs.credential(i,r)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";class Er extends uu{constructor(){super("github.com")}static credential(e){return pa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";class br extends uu{constructor(){super("twitter.com")}static credential(e,i){return pa._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=e;if(!i||!r)return null;try{return br.credential(i,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";async function wE(s,e){return Vo(s,"POST","/v1/accounts:signUp",Zi(s,e))}class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,r,l=!1){const c=await vi._fromIdTokenResponse(e,r,l),d=O_(r);return new Xi({user:c,providerId:d,_tokenResponse:r,operationType:i})}static async _forOperation(e,i,r){await e._updateTokensIfNecessary(r,!0);const l=O_(r);return new Xi({user:e,providerId:l,_tokenResponse:r,operationType:i})}}function O_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function zx(s){if(pn(s.app))return Promise.reject(Ti(s));const e=Ai(s);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Xi({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await wE(e,{returnSecureToken:!0}),r=await Xi._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(r.user),r}class oh extends Ms{constructor(e,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,i,r,l){return new oh(e,i,r,l)}}function xE(s,e,i,r){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?oh._fromErrorAndOperation(s,c,e,r):c})}async function Bx(s,e,i=!1){const r=await wo(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return Xi._forOperation(s,"link",r)}async function qx(s,e,i=!1){const{auth:r}=s;if(pn(r.app))return Promise.reject(Ti(r));const l="reauthenticate";try{const c=await wo(s,xE(r,l,e,s),i);Ae(c.idToken,r,"internal-error");const d=km(c.idToken);Ae(d,r,"internal-error");const{sub:g}=d;return Ae(s.uid===g,r,"user-mismatch"),Xi._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ai(r,"user-mismatch"),c}}async function RE(s,e,i=!1){if(pn(s.app))return Promise.reject(Ti(s));const r="signIn",l=await xE(s,r,e),c=await Xi._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(c.user),c}async function Hx(s,e){return RE(Ai(s),e)}async function Gx(s,e){return Vo(s,"POST","/v1/accounts:signInWithCustomToken",Zi(s,e))}async function Fx(s,e){if(pn(s.app))return Promise.reject(Ti(s));const i=Ai(s),r=await Gx(i,{token:e,returnSecureToken:!0}),l=await Xi._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(l.user),l}async function CE(s){const e=Ai(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $x(s,e,i){const r=Ai(s);await ah(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Vx)}async function Qx(s,e,i){if(pn(s.app))return Promise.reject(Ti(s));const r=Ai(s),d=await ah(r,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wE).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&CE(s),y}),g=await Xi._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(g.user),g}function Kx(s,e,i){return pn(s.app)?Promise.reject(Ti(s)):Hx(Jt(s),ko.credential(e,i)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CE(s),r})}async function Yx(s,e){const i=Jt(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:c}=await Mx(i.auth,l);c!==s.email&&await s.reload()}async function Xx(s,e){return Wi(s,"POST","/v1/accounts:update",e)}async function Jx(s,{displayName:e,photoURL:i}){if(e===void 0&&i===void 0)return;const r=Jt(s),c={idToken:await r.getIdToken(),displayName:e,photoUrl:i,returnSecureToken:!0},d=await wo(r,Xx(r.auth,c));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const g=r.providerData.find(({providerId:y})=>y==="password");g&&(g.displayName=r.displayName,g.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function Zx(s,e,i,r){return Jt(s).onIdTokenChanged(e,i,r)}function Wx(s,e,i){return Jt(s).beforeAuthStateChanged(e,i)}function e2(s,e,i,r){return Jt(s).onAuthStateChanged(e,i,r)}function Yd(s){return Jt(s).signOut()}const lh="__sak";class IE{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const t2=1e3,n2=10;class NE extends IE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&e(i,l,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const r=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!i&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);fx()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,n2):l()}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}NE.type="LOCAL";const i2=NE;class DE extends IE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}DE.type="SESSION";const OE=DE;function s2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:r,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,c)),y=await s2(g);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];function zm(s="",e=10){let i="";for(let r=0;r<e;r++)i+=Math.floor(Math.random()*10);return s+i}class r2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,y)=>{const _=zm("",20);l.port1.start();const S=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(w){const A=w;if(A.data.eventId===_)switch(A.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(A.data.response);break;default:clearTimeout(S),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Gi(){return window}function a2(s){Gi().location.href=s}function ME(){return typeof Gi().WorkerGlobalScope<"u"&&typeof Gi().importScripts=="function"}async function o2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function l2(){return navigator?.serviceWorker?.controller||null}function u2(){return ME()?self:null}const VE="firebaseLocalStorageDb",c2=1,uh="firebaseLocalStorage",kE="fbase_key";class cu{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Ah(s,e){return s.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function h2(){const s=indexedDB.deleteDatabase(VE);return new cu(s).toPromise()}function hm(){const s=indexedDB.open(VE,c2);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(uh,{keyPath:kE})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await h2(),e(await hm()))})})}async function M_(s,e,i){const r=Ah(s,!0).put({[kE]:e,value:i});return new cu(r).toPromise()}async function f2(s,e){const i=Ah(s,!1).get(e),r=await new cu(i).toPromise();return r===void 0?null:r.value}function V_(s,e){const i=Ah(s,!0).delete(e);return new cu(i).toPromise()}const d2=800,m2=3;class LE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hm(),this.db)}async _withRetries(e){let i=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(i++>m2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ME()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(u2()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await o2(),!this.activeServiceWorker)return;this.sender=new r2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hm();return await M_(e,lh,"1"),await V_(e,lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>M_(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(r=>f2(r,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>V_(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Ah(l,!1).getAll();return new cu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LE.type="LOCAL";const g2=LE;new lu(3e4,6e4);function UE(s,e){return e?Cs(e):(Ae(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Bm extends Um{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,i){return Eo(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function p2(s){return RE(s.auth,new Bm(s),s.bypassAuthState)}function y2(s){const{auth:e,user:i}=s;return Ae(i,e,"internal-error"),qx(i,new Bm(s),s.bypassAuthState)}async function _2(s){const{auth:e,user:i}=s;return Ae(i,e,"internal-error"),Bx(i,new Bm(s),s.bypassAuthState)}class jE{constructor(e,i,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:r,postBody:l,tenantId:c,error:d,type:g}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p2;case"linkViaPopup":case"linkViaRedirect":return _2;case"reauthViaPopup":case"reauthViaRedirect":return y2;default:ai(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const v2=new lu(2e3,1e4);async function E2(s,e,i){if(pn(s.app))return Promise.reject(bi(s,"operation-not-supported-in-this-environment"));const r=Ai(s);$w(s,e,Pm);const l=UE(r,i);return new ca(r,"signInViaPopup",e,l).executeNotNull()}class ca extends jE{constructor(e,i,r,l,c){super(e,i,l,c),this.provider=r,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const e=zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v2.get())};e()}}ca.currentPopupAction=null;const b2="pendingRedirect",Qc=new Map;class T2 extends jE{constructor(e,i,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let e=Qc.get(this.auth._key());if(!e){try{const r=await S2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(i){e=()=>Promise.reject(i)}Qc.set(this.auth._key(),e)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function S2(s,e){const i=x2(e),r=w2(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function A2(s,e){Qc.set(s._key(),e)}function w2(s){return Cs(s._redirectPersistence)}function x2(s){return $c(b2,s.config.apiKey,s.name)}async function R2(s,e,i=!1){if(pn(s.app))return Promise.reject(Ti(s));const r=Ai(s),l=UE(r,e),d=await new T2(r,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const C2=600*1e3;class I2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(i=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N2(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!PE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";i.onError(bi(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const r=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C2&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function PE({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function N2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PE(s);default:return!1}}async function D2(s,e={}){return Wi(s,"GET","/v1/projects",e)}const O2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M2=/^https?/;async function V2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await D2(s);for(const i of e)try{if(k2(i))return}catch{}ai(s,"unauthorized-domain")}function k2(s){const e=um(),{protocol:i,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===r}if(!M2.test(i))return!1;if(O2.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}const L2=new lu(3e4,6e4);function L_(){const s=Gi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function U2(s){return new Promise((e,i)=>{function r(){L_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L_(),i(bi(s,"network-request-failed"))},timeout:L2.get()})}if(Gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Gi().gapi?.load)r();else{const l=bx("iframefcb");return Gi()[l]=()=>{gapi.load?r():i(bi(s,"network-request-failed"))},bE(`${Ex()}?onload=${l}`).catch(c=>i(c))}}).catch(e=>{throw Kc=null,e})}let Kc=null;function j2(s){return Kc=Kc||U2(s),Kc}const P2=new lu(5e3,15e3),z2="__/auth/iframe",B2="emulator/auth/iframe",q2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G2(s){const e=s.config;Ae(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?Vm(e,B2):`https://${s.config.authDomain}/${z2}`,r={apiKey:e.apiKey,appName:s.name,v:Mo},l=H2.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${i}?${ou(r).slice(1)}`}async function F2(s){const e=await j2(s),i=Gi().gapi;return Ae(i,s,"internal-error"),e.open({where:document.body,url:G2(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q2,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const d=bi(s,"network-request-failed"),g=Gi().setTimeout(()=>{c(d)},P2.get());function y(){Gi().clearTimeout(g),l(r)}r.ping(y).then(y,()=>{c(d)})}))}const $2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q2=500,K2=600,Y2="_blank",X2="http://localhost";class U_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J2(s,e,i,r=Q2,l=K2){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const y={...$2,width:r.toString(),height:l.toString(),top:c,left:d},_=hn().toLowerCase();i&&(g=mE(_)?Y2:i),fE(_)&&(e=e||X2,y.scrollbars="yes");const S=Object.entries(y).reduce((A,[K,W])=>`${A}${K}=${W},`,"");if(hx(_)&&g!=="_self")return Z2(e||"",g),new U_(null);const w=window.open(e||"",g,S);Ae(w,s,"popup-blocked");try{w.focus()}catch{}return new U_(w)}function Z2(s,e){const i=document.createElement("a");i.href=s,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}const W2="__/auth/handler",eR="emulator/auth/handler",tR=encodeURIComponent("fac");async function j_(s,e,i,r,l,c){Ae(s.config.authDomain,s,"auth-domain-config-required"),Ae(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:Mo,eventId:l};if(e instanceof Pm){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",NA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,w]of Object.entries({}))d[S]=w}if(e instanceof uu){const S=e.getScopes().filter(w=>w!=="");S.length>0&&(d.scopes=S.join(","))}s.tenantId&&(d.tid=s.tenantId);const g=d;for(const S of Object.keys(g))g[S]===void 0&&delete g[S];const y=await s._getAppCheckToken(),_=y?`#${tR}=${encodeURIComponent(y)}`:"";return`${nR(s)}?${ou(g).slice(1)}${_}`}function nR({config:s}){return s.emulator?Vm(s,eR):`https://${s.authDomain}/${W2}`}const Xd="webStorageSupport";class iR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=R2,this._overrideRedirectResult=A2}async _openPopup(e,i,r,l){Ns(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await j_(e,i,r,um(),l);return J2(e,c,zm())}async _openRedirect(e,i,r,l){await this._originValidation(e);const c=await j_(e,i,r,um(),l);return a2(c),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(Ns(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){const i=await F2(e),r=new I2(e);return i.register("authEvent",l=>(Ae(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=i,r}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(Xd,{type:Xd},l=>{const c=l?.[0]?.[Xd];c!==void 0&&i(!!c),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=V2(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return vE()||dE()||Lm()}}const sR=iR;var P_="@firebase/auth",z_="1.11.1";class rR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function aR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oR(s){Ao(new ga("auth",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=r.options;Ae(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EE(s)},_=new yx(r,l,c,y);return Rx(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,r)=>{e.getProvider("auth-internal").initialize()})),Ao(new ga("auth-internal",e=>{const i=Ai(e.getProvider("auth").getImmediate());return(r=>new rR(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(P_,z_,aR(s)),wr(P_,z_,"esm2020")}const lR=300,uR=Xv("authIdTokenMaxAge")||lR;let B_=null;const cR=s=>async e=>{const i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>uR)return;const l=i?.token;B_!==l&&(B_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function hR(s=nE()){const e=Dm(s,"auth");if(e.isInitialized())return e.getImmediate();const i=xx(s,{popupRedirectResolver:sR,persistence:[g2,i2,OE]}),r=Xv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=cR(c.toString());Wx(i,d,()=>d(i.currentUser)),Zx(i,g=>d(g))}}const l=Kv("auth");return l&&Cx(i,`http://${l}`),i}function fR(){return document.getElementsByTagName("head")?.[0]??document}_x({loadJS(s){return new Promise((e,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=bi("internal-error");c.customData=l,i(c)},r.type="text/javascript",r.charset="UTF-8",fR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oR("Browser");var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xr,zE;(function(){var s;function e(N,R){function I(){}I.prototype=R.prototype,N.F=R.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(V,D,L){for(var x=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)x[ht-2]=arguments[ht];return R.prototype[D].apply(V,x)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,R,I){I||(I=0);const V=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)V[D]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(D=0;D<16;++D)V[D]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=N.g[0],I=N.g[1],D=N.g[2];let L=N.g[3],x;x=R+(L^I&(D^L))+V[0]+3614090360&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+V[1]+3905402710&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+V[2]+606105819&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+V[3]+3250441966&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(L^I&(D^L))+V[4]+4118548399&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+V[5]+1200080426&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+V[6]+2821735955&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+V[7]+4249261313&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(L^I&(D^L))+V[8]+1770035416&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+V[9]+2336552879&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+V[10]+4294925233&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+V[11]+2304563134&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(L^I&(D^L))+V[12]+1804603682&4294967295,R=I+(x<<7&4294967295|x>>>25),x=L+(D^R&(I^D))+V[13]+4254626195&4294967295,L=R+(x<<12&4294967295|x>>>20),x=D+(I^L&(R^I))+V[14]+2792965006&4294967295,D=L+(x<<17&4294967295|x>>>15),x=I+(R^D&(L^R))+V[15]+1236535329&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(D^L&(I^D))+V[1]+4129170786&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+V[6]+3225465664&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+V[11]+643717713&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+V[0]+3921069994&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^L&(I^D))+V[5]+3593408605&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+V[10]+38016083&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+V[15]+3634488961&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+V[4]+3889429448&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^L&(I^D))+V[9]+568446438&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+V[14]+3275163606&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+V[3]+4107603335&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+V[8]+1163531501&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^L&(I^D))+V[13]+2850285829&4294967295,R=I+(x<<5&4294967295|x>>>27),x=L+(I^D&(R^I))+V[2]+4243563512&4294967295,L=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(L^R))+V[7]+1735328473&4294967295,D=L+(x<<14&4294967295|x>>>18),x=I+(L^R&(D^L))+V[12]+2368359562&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(I^D^L)+V[5]+4294588738&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+V[8]+2272392833&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+V[11]+1839030562&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+V[14]+4259657740&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^L)+V[1]+2763975236&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+V[4]+1272893353&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+V[7]+4139469664&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+V[10]+3200236656&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^L)+V[13]+681279174&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+V[0]+3936430074&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+V[3]+3572445317&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+V[6]+76029189&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^L)+V[9]+3654602809&4294967295,R=I+(x<<4&4294967295|x>>>28),x=L+(R^I^D)+V[12]+3873151461&4294967295,L=R+(x<<11&4294967295|x>>>21),x=D+(L^R^I)+V[15]+530742520&4294967295,D=L+(x<<16&4294967295|x>>>16),x=I+(D^L^R)+V[2]+3299628645&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(D^(I|~L))+V[0]+4096336452&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+V[7]+1126891415&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+V[14]+2878612391&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+V[5]+4237533241&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~L))+V[12]+1700485571&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+V[3]+2399980690&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+V[10]+4293915773&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+V[1]+2240044497&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~L))+V[8]+1873313359&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+V[15]+4264355552&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+V[6]+2734768916&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+V[13]+1309151649&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~L))+V[4]+4149444226&4294967295,R=I+(x<<6&4294967295|x>>>26),x=L+(I^(R|~D))+V[11]+3174756917&4294967295,L=R+(x<<10&4294967295|x>>>22),x=D+(R^(L|~I))+V[2]+718787259&4294967295,D=L+(x<<15&4294967295|x>>>17),x=I+(L^(D|~R))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+L&4294967295}r.prototype.v=function(N,R){R===void 0&&(R=N.length);const I=R-this.blockSize,V=this.C;let D=this.h,L=0;for(;L<R;){if(D==0)for(;L<=I;)l(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<R;)if(V[D++]=N.charCodeAt(L++),D==this.blockSize){l(this,V),D=0;break}}else for(;L<R;)if(V[D++]=N[L++],D==this.blockSize){l(this,V),D=0;break}}this.h=D,this.o+=R},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;R=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=R&255,R/=256;for(this.v(N),N=Array(16),R=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)N[R++]=this.g[I]>>>V&255;return N};function c(N,R){var I=g;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=R(N)}function d(N,R){this.h=R;const I=[];let V=!0;for(let D=N.length-1;D>=0;D--){const L=N[D]|0;V&&L==R||(I[D]=L,V=!1)}this.g=I}var g={};function y(N){return-128<=N&&N<128?c(N,function(R){return new d([R|0],R<0?-1:0)}):new d([N|0],N<0?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return ee(_(-N));const R=[];let I=1;for(let V=0;N>=I;V++)R[V]=N/I|0,I*=4294967296;return new d(R,0)}function S(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return ee(S(N.substring(1),R));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=_(Math.pow(R,8));let V=w;for(let L=0;L<N.length;L+=8){var D=Math.min(8,N.length-L);const x=parseInt(N.substring(L,L+D),R);D<8?(D=_(Math.pow(R,D)),V=V.j(D).add(_(x))):(V=V.j(I),V=V.add(_(x)))}return V}var w=y(0),A=y(1),K=y(16777216);s=d.prototype,s.m=function(){if(ie(this))return-ee(this).m();let N=0,R=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);N+=(V>=0?V:4294967296+V)*R,R*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(W(this))return"0";if(ie(this))return"-"+ee(this).toString(N);const R=_(Math.pow(N,6));var I=this;let V="";for(;;){const D=ke(I,R).g;I=ge(I,D.j(R));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=D,W(I))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function W(N){if(N.h!=0)return!1;for(let R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function ie(N){return N.h==-1}s.l=function(N){return N=ge(this,N),ie(N)?-1:W(N)?0:1};function ee(N){const R=N.g.length,I=[];for(let V=0;V<R;V++)I[V]=~N.g[V];return new d(I,~N.h).add(A)}s.abs=function(){return ie(this)?ee(this):this},s.add=function(N){const R=Math.max(this.g.length,N.g.length),I=[];let V=0;for(let D=0;D<=R;D++){let L=V+(this.i(D)&65535)+(N.i(D)&65535),x=(L>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);V=x>>>16,L&=65535,x&=65535,I[D]=x<<16|L}return new d(I,I[I.length-1]&-2147483648?-1:0)};function ge(N,R){return N.add(ee(R))}s.j=function(N){if(W(this)||W(N))return w;if(ie(this))return ie(N)?ee(this).j(ee(N)):ee(ee(this).j(N));if(ie(N))return ee(this.j(ee(N)));if(this.l(K)<0&&N.l(K)<0)return _(this.m()*N.m());const R=this.g.length+N.g.length,I=[];for(var V=0;V<2*R;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<N.g.length;D++){const L=this.i(V)>>>16,x=this.i(V)&65535,ht=N.i(D)>>>16,_t=N.i(D)&65535;I[2*V+2*D]+=x*_t,Ee(I,2*V+2*D),I[2*V+2*D+1]+=L*_t,Ee(I,2*V+2*D+1),I[2*V+2*D+1]+=x*ht,Ee(I,2*V+2*D+1),I[2*V+2*D+2]+=L*ht,Ee(I,2*V+2*D+2)}for(N=0;N<R;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=R;N<2*R;N++)I[N]=0;return new d(I,0)};function Ee(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function Se(N,R){this.g=N,this.h=R}function ke(N,R){if(W(R))throw Error("division by zero");if(W(N))return new Se(w,w);if(ie(N))return R=ke(ee(N),R),new Se(ee(R.g),ee(R.h));if(ie(R))return R=ke(N,ee(R)),new Se(ee(R.g),R.h);if(N.g.length>30){if(ie(N)||ie(R))throw Error("slowDivide_ only works with positive integers.");for(var I=A,V=R;V.l(N)<=0;)I=Ye(I),V=Ye(V);var D=Me(I,1),L=Me(V,1);for(V=Me(V,2),I=Me(I,2);!W(V);){var x=L.add(V);x.l(N)<=0&&(D=D.add(I),L=x),V=Me(V,1),I=Me(I,1)}return R=ge(N,D.j(R)),new Se(D,R)}for(D=w;N.l(R)>=0;){for(I=Math.max(1,Math.floor(N.m()/R.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=_(I),x=L.j(R);ie(x)||x.l(N)>0;)I-=V,L=_(I),x=L.j(R);W(L)&&(L=A),D=D.add(L),N=ge(N,x)}return new Se(D,N)}s.B=function(N){return ke(this,N).h},s.and=function(N){const R=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)&N.i(V);return new d(I,this.h&N.h)},s.or=function(N){const R=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)|N.i(V);return new d(I,this.h|N.h)},s.xor=function(N){const R=Math.max(this.g.length,N.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)^N.i(V);return new d(I,this.h^N.h)};function Ye(N){const R=N.g.length+1,I=[];for(let V=0;V<R;V++)I[V]=N.i(V)<<1|N.i(V-1)>>>31;return new d(I,N.h)}function Me(N,R){const I=R>>5;R%=32;const V=N.g.length-I,D=[];for(let L=0;L<V;L++)D[L]=R>0?N.i(L+I)>>>R|N.i(L+I+1)<<32-R:N.i(L+I);return new d(D,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zE=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=S,xr=d}).apply(typeof q_<"u"?q_:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var BE,Pl,qE,Yc,fm,HE,GE,FE;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=i(this);function l(u,m){if(m)e:{var v=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in v))break e;v=v[U]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var v=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&v.push([T,m[T]]);return v}});var c=c||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,v){return u.call.apply(u.bind,arguments)}function _(u,m,v){return _=y,_.apply(null,arguments)}function S(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function w(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,U,H){for(var se=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)se[Ne-2]=arguments[Ne];return m.prototype[U].apply(T,se)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function K(u){const m=u.length;if(m>0){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function W(u,m){for(let T=1;T<arguments.length;T++){const U=arguments[T];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=u.length||0;const H=U.length||0;u.length=v+H;for(let se=0;se<H;se++)u[v+se]=U[se]}else u.push(U)}}class ie{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ee(u){d.setTimeout(()=>{throw u},0)}function ge(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ee{constructor(){this.h=this.g=null}add(m,v){const T=Se.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Se=new ie(()=>new ke,u=>u.reset());class ke{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,Me=!1,N=new Ee,R=()=>{const u=Promise.resolve(void 0);Ye=()=>{u.then(I)}};function I(){for(var u;u=ge();){try{u.h.call(u.g)}catch(v){ee(v)}var m=Se;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Me=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function x(u){return/^[\s\xa0]*$/.test(u)}function ht(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}w(ht,D),ht.prototype.init=function(u,m){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var _t="closure_listenable_"+(Math.random()*1e6|0),F=0;function re(u,m,v,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=U,this.key=++F,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function He(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function ye(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function M(u){const m={};for(const v in u)m[v]=u[v];return m}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(u,m){let v,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(v in T)u[v]=T[v];for(let H=0;H<Q.length;H++)v=Q[H],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function te(u){this.src=u,this.g={},this.h=0}te.prototype.add=function(u,m,v,T,U){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const se=Re(u,m,T,U);return se>-1?(m=u[se],v||(m.fa=!1)):(m=new re(m,this.src,H,!!T,U),m.fa=v,u.push(m)),m};function pe(u,m){const v=m.type;if(v in u.g){var T=u.g[v],U=Array.prototype.indexOf.call(T,m,void 0),H;(H=U>=0)&&Array.prototype.splice.call(T,U,1),H&&(ne(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Re(u,m,v,T){for(let U=0;U<u.length;++U){const H=u[U];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return U}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),vt={};function Qe(u,m,v,T,U){if(Array.isArray(m)){for(let H=0;H<m.length;H++)Qe(u,m[H],v,T,U);return null}return v=ks(v),u&&u[_t]?u.J(m,v,g(T)?!!T.capture:!1,U):wi(u,m,v,!1,T,U)}function wi(u,m,v,T,U,H){if(!m)throw Error("Invalid event type");const se=g(U)?!!U.capture:!!U;let Ne=fn(u);if(Ne||(u[Ve]=Ne=new te(u)),v=Ne.add(m,v,T,se,H),v.proxy)return v;if(T=Bn(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)L||(U=se),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(xn(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Bn(){function u(v){return m.call(u.src,u.listener,v)}const m=ts;return u}function es(u,m,v,T,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)es(u,m[H],v,T,U);else T=g(T)?!!T.capture:!!T,v=ks(v),u&&u[_t]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],v=Re(m,v,T,U),v>-1&&(ne(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=fn(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Re(m,v,T,U)),(v=u>-1?m[u]:null)&&oi(v))}function oi(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[_t])pe(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(xn(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=fn(m))?(pe(v,u),v.h==0&&(v.src=null,m[Ve]=null)):ne(u)}}}function xn(u){return u in vt?vt[u]:vt[u]="on"+u}function ts(u,m){if(u.da)u=!0;else{m=new ht(m,this);const v=u.listener,T=u.ha||u.src;u.fa&&oi(u),u=v.call(T,m)}return u}function fn(u){return u=u[Ve],u instanceof te?u:null}var Vs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ks(u){return typeof u=="function"?u:(u[Vs]||(u[Vs]=function(m){return u.handleEvent(m)}),u[Vs])}function Et(){V.call(this),this.i=new te(this),this.M=this,this.G=null}w(Et,V),Et.prototype[_t]=!0,Et.prototype.removeEventListener=function(u,m,v,T){es(this,u,m,v,T)};function Rt(u,m){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var U=m;m=new D(T,u),ae(m,U)}U=!0;let H,se;if(v)for(se=v.length-1;se>=0;se--)H=m.g=v[se],U=Rn(H,T,!0,m)&&U;if(H=m.g=u,U=Rn(H,T,!0,m)&&U,U=Rn(H,T,!1,m)&&U,v)for(se=0;se<v.length;se++)H=m.g=v[se],U=Rn(H,T,!1,m)&&U}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let T=0;T<v.length;T++)ne(v[T]);delete u.g[m],u.h--}}this.G=null},Et.prototype.J=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},Et.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function Rn(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let H=0;H<m.length;++H){const se=m[H];if(se&&!se.da&&se.capture==v){const Ne=se.listener,Ct=se.ha||se.src;se.fa&&pe(u.i,se),U=Ne.call(Ct,T)!==!1&&U}}return U&&!T.defaultPrevented}function $t(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function Ls(u){u.g=$t(()=>{u.g=null,u.i&&(u.i=!1,Ls(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ot extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){V.call(this),this.h=u,this.g={}}w(ns,V);var xi=[];function is(u){He(u.g,function(m,v){this.g.hasOwnProperty(v)&&oi(m)},u),u.g={}}ns.prototype.N=function(){ns.Z.N.call(this),is(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ri=d.JSON.stringify,Sa=d.JSON.parse,qn=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function li(){}function kr(){}var Cn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){D.call(this,"d")}w(Qt,D);function yn(){D.call(this,"c")}w(yn,D);var Ze={},ui=null;function Ci(){return ui=ui||new Et}Ze.Ia="serverreachability";function Lr(u){D.call(this,Ze.Ia,u)}w(Lr,D);function Hn(u){const m=Ci();Rt(m,new Lr(m))}Ze.STAT_EVENT="statevent";function ss(u,m){D.call(this,Ze.STAT_EVENT,u),this.stat=m}w(ss,D);function Tt(u){const m=Ci();Rt(m,new ss(m,u))}Ze.Ja="timingevent";function Gn(u,m){D.call(this,Ze.Ja,u),this.size=m}w(Gn,D);function Fn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function Bo(u,m,v,T,U,H){u.info(function(){if(u.g)if(H){var se="",Ne=H.split("&");for(let We=0;We<Ne.length;We++){var Ct=Ne[We].split("=");if(Ct.length>1){const pt=Ct[0];Ct=Ct[1];const Yn=pt.split("_");se=Yn.length>=2&&Yn[1]=="type"?se+(pt+"="+Ct+"&"):se+(pt+"=redacted&")}}}else se=null;else se=H;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+v+`
`+se})}function Aa(u,m,v,T,U,H,se){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+v+`
`+H+" "+se})}function Nn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+wa(u,v)+(T?" "+T:"")})}function rs(u,m){u.info(function(){return"TIMEOUT: "+m})}In.prototype.info=function(){};function wa(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var v=H[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var U=T[0];if(U!="noop"&&U!="stop"&&U!="close")for(let se=1;se<T.length;se++)T[se]=""}}}}return Ri(H)}catch{return m}}var Ii={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ur={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jr;function as(){}w(as,li),as.prototype.g=function(){return new XMLHttpRequest},jr=new as;function ci(u){return encodeURIComponent(String(u))}function xa(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Dn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.S=T||1,this.V=new ns(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}var St={},Mt={};function dn(u,m,v){u.M=1,u.A=Pr(kt(m)),u.u=v,u.R=!0,os(u,null)}function os(u,m){u.F=Date.now(),z(u),u.B=kt(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Na(v.i,"t",T),u.C=0,v=u.j.L,u.h=new On,u.g=Ru(u.j,v?m:null,!u.u),u.P>0&&(u.O=new Ot(_(u.Y,u,u.g),u.P)),m=u.V,v=u.g,T=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(xi[0]=U.toString()),U=xi);for(let H=0;H<U.length;H++){const se=Qe(v,U[H],T||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Hn(),Bo(u.i,u.v,u.B,u.l,u.S,u.u)}Dn.prototype.ba=function(u){u=u.target;const m=this.O;m&&di(u)==3?m.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const Ne=di(this.g),Ct=this.g.ya(),We=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Ne!=4||Ct==7||(Ct==8||We<=0?Hn(3):Hn(2)),q(this);var m=this.g.ca();this.X=m;var v=qo(this);if(this.o=m==200,Aa(this.i,this.v,this.B,this.l,this.S,Ne,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,U=this.g;if((T=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(T)){var H=T;break t}}H=null}if(u=H)Nn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,be(this,u);else{this.o=!1,this.m=3,Tt(12),fe(this),oe(this);break e}}if(this.R){u=!0;let pt;for(;!this.K&&this.C<v.length;)if(pt=Ca(this,v),pt==Mt){Ne==4&&(this.m=4,Tt(14),u=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==St){this.m=4,Tt(15),Nn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Nn(this.i,this.l,pt,null),be(this,pt);if(Ra(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||v.length!=0||this.h.h||(this.m=1,Tt(16),u=!1),this.o=this.o&&u,!u)Nn(this.i,this.l,v,"[Invalid Chunked Response]"),fe(this),oe(this);else if(v.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Zo(se),se.P=!0,Tt(11))}}else Nn(this.i,this.l,v,null),be(this,v);Ne==4&&fe(this),this.o&&!this.K&&(Ne==4?Su(this.j,this):(this.o=!1,z(this)))}else us(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),fe(this),oe(this)}}}catch{}finally{}};function qo(u){if(!Ra(u))return u.g.la();const m=Zt(u.g);if(m==="")return"";let v="";const T=m.length,U=di(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return fe(u),oe(u),"";u.h.i=new d.TextDecoder}for(let H=0;H<T;H++)u.h.h=!0,v+=u.h.i.decode(m[H],{stream:!(U&&H==T-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function Ra(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ca(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?Mt:(v=Number(m.substring(v,T)),isNaN(v)?St:(T+=1,T+v>m.length?Mt:(m=m.slice(T,T+v),u.C=T+v,m)))}Dn.prototype.cancel=function(){this.K=!0,fe(this)};function z(u){u.T=Date.now()+u.H,Us(u,u.H)}function Us(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Fn(_(u.aa,u),m)}function q(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Dn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(rs(this.i,this.B),this.M!=2&&(Hn(),Tt(17)),fe(this),this.m=2,oe(this)):Us(this,this.T-u)};function oe(u){u.j.I==0||u.K||Su(u.j,u)}function fe(u){q(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,is(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function be(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||Vt(v.h,u))){if(!u.L&&Vt(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ka(v),Ks(v);else break e;$r(v),Tt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Fn(_(v.Va,v),6e3));Fe(v.h)<=1&&v.ta&&(v.ta=void 0)}else Li(v,11)}else if((u.L||v.g==u)&&ka(v),!x(m))for(U=v.Ba.g.parse(m),m=0;m<U.length;m++){let We=U[m];const pt=We[0];if(!(pt<=v.K))if(v.K=pt,We=We[1],v.I==2)if(We[0]=="c"){v.M=We[1],v.ba=We[2];const Yn=We[3];Yn!=null&&(v.ka=Yn,v.j.info("VER="+v.ka));const Ui=We[4];Ui!=null&&(v.za=Ui,v.j.info("SVER="+v.za));const mi=We[5];mi!=null&&typeof mi=="number"&&mi>0&&(T=1.5*mi,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const gi=u.g;if(gi){const Qr=gi.g?gi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qr){var H=T.h;H.g||Qr.indexOf("spdy")==-1&&Qr.indexOf("quic")==-1&&Qr.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(js(H,H.h),H.h=null))}if(T.G){const La=gi.g?gi.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(T.wa=La,nt(T.J,T.G,La))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var se=u;if(T.na=xu(T,T.L?T.ba:null,T.W),se.L){Ni(T.h,se);var Ne=se,Ct=T.O;Ct&&(Ne.H=Ct),Ne.D&&(q(Ne),z(Ne)),T.g=se}else bu(T);v.i.length>0&&ki(v)}else We[0]!="stop"&&We[0]!="close"||Li(v,7);else v.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Li(v,7):Xo(v):We[0]!="noop"&&v.l&&v.l.qa(We),v.A=0)}}Hn(4)}catch{}}var _e=class{constructor(u,m){this.g=u,this.map=m}};function At(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Fe(u){return u.h?1:u.g?u.g.size:0}function Vt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function js(u,m){u.g?u.g.add(m):u.h=m}function Ni(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}At.prototype.cancel=function(){if(this.i=$n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function $n(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return K(u.i)}var Ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let U,H=null;T>=0?(U=u[v].substring(0,T),H=u[v].substring(T+1)):U=u[v],m(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Mn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Mn?(this.l=u.l,Kt(this,u.j),this.o=u.o,this.g=u.g,Bs(this,u.u),this.h=u.h,Ho(this,vu(u.i)),this.m=u.m):u&&(m=String(u).match(Ps))?(this.l=!1,Kt(this,m[1]||"",!0),this.o=Di(m[2]||""),this.g=Di(m[3]||"",!0),Bs(this,m[4]),this.h=Di(m[5]||"",!0),Ho(this,m[6]||"",!0),this.m=Di(m[7]||"")):(this.l=!1,this.i=new Hs(null,this.l))}Mn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(zr(m,Ia,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(zr(m,Ia,!0),"@"),u.push(ci(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(zr(v,v.charAt(0)=="/"?Go:pu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",zr(v,yu)),u.join("")},Mn.prototype.resolve=function(u){const m=kt(this);let v=!!u.j;v?Kt(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var T=u.h;if(v)Bs(m,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var U=m.h.lastIndexOf("/");U!=-1&&(T=m.h.slice(0,U+1)+T)}if(U=T,U==".."||U==".")T="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){T=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let se=0;se<U.length;){const Ne=U[se++];Ne=="."?T&&se==U.length&&H.push(""):Ne==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),T&&se==U.length&&H.push("")):(H.push(Ne),T=!0)}T=H.join("/")}else T=U}return v?m.h=T:v=u.i.toString()!=="",v?Ho(m,vu(u.i)):v=!!u.m,v&&(m.m=u.m),m};function kt(u){return new Mn(u)}function Kt(u,m,v){u.j=v?Di(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Bs(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Ho(u,m,v){m instanceof Hs?(u.i=m,Da(u.i,u.l)):(v||(m=zr(m,qs)),u.i=new Hs(m,u.l))}function nt(u,m,v){u.i.set(m,v)}function Pr(u){return nt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Di(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,_n),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function _n(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ia=/[#\/\?@]/g,pu=/[#\?:]/g,Go=/[#\?]/g,qs=/[#\?@]/g,yu=/#/g;function Hs(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vn(u){u.g||(u.g=new Map,u.h=0,u.i&&zs(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=Hs.prototype,s.add=function(u,m){vn(this),this.i=null,u=Gs(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function _u(u,m){vn(u),m=Gs(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Fo(u,m){return vn(u),m=Gs(u,m),u.g.has(m)}s.forEach=function(u,m){vn(this),this.g.forEach(function(v,T){v.forEach(function(U){u.call(m,U,T,this)},this)},this)};function $o(u,m){vn(u);let v=[];if(typeof m=="string")Fo(u,m)&&(v=v.concat(u.g.get(Gs(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}s.set=function(u,m){return vn(this),this.i=null,u=Gs(this,u),Fo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=$o(this,u),u.length>0?String(u[0]):m):m};function Na(u,m,v){_u(u,m),v.length>0&&(u.i=null,u.g.set(Gs(u,m),K(v)),u.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var v=m[T];const U=ci(v);v=$o(this,v);for(let H=0;H<v.length;H++){let se=U;v[H]!==""&&(se+="="+ci(v[H])),u.push(se)}}return this.i=u.join("&")};function vu(u){const m=new Hs;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Gs(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Da(u,m){m&&!u.j&&(vn(u),u.i=null,u.g.forEach(function(v,T){const U=T.toLowerCase();T!=U&&(_u(this,T),Na(this,U,v))},u)),u.j=m}function hi(u,m){const v=new In;if(d.Image){const T=new Image;T.onload=S(Qn,v,"TestLoadImage: loaded",!0,m,T),T.onerror=S(Qn,v,"TestLoadImage: error",!1,m,T),T.onabort=S(Qn,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=S(Qn,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Qo(u,m){const v=new In,T=new AbortController,U=setTimeout(()=>{T.abort(),Qn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(U),H.ok?Qn(v,"TestPingServer: ok",!0,m):Qn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),Qn(v,"TestPingServer: error",!1,m)})}function Qn(u,m,v,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(v)}catch{}}function Fs(){this.g=new qn}function Oi(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Oi,li),Oi.prototype.g=function(){return new Br(this.i,this.h)};function Br(u,m){Et.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Br,Et),s=Br.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,fi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$s(this):fi(this),this.readyState==3&&Oa(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,$s(this))},s.Na=function(u){this.g&&(this.response=u,$s(this))},s.ga=function(){this.g&&$s(this)};function $s(u){u.readyState=4,u.l=null,u.j=null,u.B=null,fi(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function fi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kn(u){let m="";return He(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function qr(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Kn(v),typeof u=="string"?v!=null&&ci(v):nt(u,m,v))}function at(u){Et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(at,Et);var Mi=/^https?$/i,Ko=["POST","PUT"];s=at.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jr.g(),this.g.onreadystatechange=A(_(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Hr(this,H);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)v.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Ko,m,void 0)>=0)||T||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,se]of v)this.g.setRequestHeader(H,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){Hr(this,H)}};function Hr(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Yo(u),ls(u)}function Yo(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Rt(this,"complete"),Rt(this,"abort"),ls(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),at.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Gr(this):this.Xa())},s.Xa=function(){Gr(this)};function Gr(u){if(u.h&&typeof c<"u"){if(u.v&&di(u)==4)setTimeout(u.Ca.bind(u),0);else if(Rt(u,"readystatechange"),di(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=H===0){let se=String(u.D).match(Ps)[1]||null;!se&&d.self&&d.self.location&&(se=d.self.location.protocol.slice(0,-1)),T=!Mi.test(se?se.toLowerCase():"")}v=T}if(v)Rt(u,"complete"),Rt(u,"success");else{u.o=6;try{var U=di(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",Yo(u)}}finally{ls(u)}}}}function ls(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||Rt(u,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function di(u){return u.g?u.g.readyState:0}s.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Sa(m)}};function Zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function us(u){const m={};u=(u.g&&di(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(x(u[T]))continue;var v=xa(u[T]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[U]||[];m[U]=H,H.push(v)}ye(m,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Qs(u){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,u),this.Za=Vi("retryDelaySeedMs",1e4,u),this.Ta=Vi("forwardChannelMaxRetries",2,u),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new At(u&&u.concurrentRequestLimit),this.Ba=new Fs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Qs.prototype,s.ka=8,s.I=1,s.connect=function(u,m,v,T){Tt(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=xu(this,null,this.W),ki(this)};function Xo(u){if(Ma(u),u.I==3){var m=u.V++,v=kt(u.J);if(nt(v,"SID",u.M),nt(v,"RID",m),nt(v,"TYPE","terminate"),Fr(u,v),m=new Dn(u,u.j,m),m.M=2,m.A=Pr(kt(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=Ru(m.j,null),m.g.ea(m.A)),m.F=Date.now(),z(m)}wu(u)}function Ks(u){u.g&&(Zo(u),u.g.cancel(),u.g=null)}function Ma(u){Ks(u),u.v&&(d.clearTimeout(u.v),u.v=null),ka(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ki(u){if(!rt(u.h)&&!u.m){u.m=!0;var m=u.Ea;Ye||R(),Me||(Ye(),Me=!0),N.add(m,u),u.D=0}}function Va(u,m){return Fe(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Fn(_(u.Ea,u,m),Au(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new Dn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=M(H),ae(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Eu(this,U,m),v=kt(this.J),nt(v,"RID",u),nt(v,"CVER",22),this.G&&nt(v,"X-HTTP-Session-Id",this.G),Fr(this,v),H&&(this.R?m="headers="+ci(Kn(H))+"&"+m:this.u&&qr(v,this.u,H)),js(this.h,U),this.Ra&&nt(v,"TYPE","init"),this.S?(nt(v,"$req",m),nt(v,"SID","null"),U.U=!0,dn(U,v,null)):dn(U,v,m),this.I=2}}else this.I==3&&(u?Jo(this,u):this.i.length==0||rt(this.h)||Jo(this))};function Jo(u,m){var v;m?v=m.l:v=u.V++;const T=kt(u.J);nt(T,"SID",u.M),nt(T,"RID",v),nt(T,"AID",u.K),Fr(u,T),u.u&&u.o&&qr(T,u.u,u.o),v=new Dn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Eu(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),js(u.h,v),dn(v,T,m)}function Fr(u,m){u.H&&He(u.H,function(v,T){nt(m,T,v)}),u.l&&He({},function(v,T){nt(m,T,v)})}function Eu(u,m,v){v=Math.min(u.i.length,v);const T=u.l?_(u.l.Ka,u.l,u):null;e:{var U=u.i;let Ne=-1;for(;;){const Ct=["count="+v];Ne==-1?v>0?(Ne=U[0].g,Ct.push("ofs="+Ne)):Ne=0:Ct.push("ofs="+Ne);let We=!0;for(let pt=0;pt<v;pt++){var H=U[pt].g;const Yn=U[pt].map;if(H-=Ne,H<0)Ne=Math.max(0,U[pt].g-100),We=!1;else try{H="req"+H+"_"||"";try{var se=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Ui,mi]of se){let gi=mi;g(mi)&&(gi=Ri(mi)),Ct.push(H+Ui+"="+encodeURIComponent(gi))}}catch(Ui){throw Ct.push(H+"type="+encodeURIComponent("_badmap")),Ui}}catch{T&&T(Yn)}}if(We){se=Ct.join("&");break e}}se=void 0}return u=u.i.splice(0,v),m.G=u,se}function bu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Ye||R(),Me||(Ye(),Me=!0),N.add(m,u),u.A=0}}function $r(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Fn(_(u.Da,u),Au(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Tu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Fn(_(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Ks(this),Tu(this))};function Zo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Tu(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=kt(u.na);nt(m,"RID","rpc"),nt(m,"SID",u.M),nt(m,"AID",u.K),nt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&nt(m,"TO",u.ia),nt(m,"TYPE","xmlhttp"),Fr(u,m),u.u&&u.o&&qr(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Pr(kt(m)),v.u=null,v.R=!0,os(v,u)}s.Va=function(){this.C!=null&&(this.C=null,Ks(this),$r(this),Tt(19))};function ka(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Su(u,m){var v=null;if(u.g==m){ka(u),Zo(u),u.g=null;var T=2}else if(Vt(u.h,m))v=m.G,Ni(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var U=u.D;T=Ci(),Rt(T,new Gn(T,v)),ki(u)}else bu(u);else if(U=m.m,U==3||U==0&&m.X>0||!(T==1&&Va(u,m)||T==2&&$r(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),U){case 1:Li(u,5);break;case 4:Li(u,10);break;case 3:Li(u,6);break;default:Li(u,2)}}}function Au(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function Li(u,m){if(u.j.info("Error code "+m),m==2){var v=_(u.bb,u),T=u.Ua;const U=!T;T=new Mn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Kt(T,"https"),Pr(T),U?hi(T.toString(),v):Qo(T.toString(),v)}else Tt(2);u.I=0,u.l&&u.l.pa(m),wu(u),Ma(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function wu(u){if(u.I=0,u.ja=[],u.l){const m=$n(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,K(u.i),u.i.length=0),u.l.oa()}}function xu(u,m,v){var T=v instanceof Mn?kt(v):new Mn(v);if(T.g!="")m&&(T.g=m+"."+T.g),Bs(T,T.u);else{var U=d.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const H=new Mn(null);T&&Kt(H,T),m&&(H.g=m),U&&Bs(H,U),v&&(H.h=v),T=H}return v=u.G,m=u.wa,v&&m&&nt(T,v,m),nt(T,"VER",u.ka),Fr(u,T),T}function Ru(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new at(new Oi({ab:v})):new at(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}s=Cu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ys(){}Ys.prototype.g=function(u,m){return new mn(u,m)};function mn(u,m){Et.call(this),this.g=new Qs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!x(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!x(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new cs(this)}w(mn,Et),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Xo(this.g)},mn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Ri(u),u=v);m.i.push(new _e(m.Ya++,u)),m.I==3&&ki(m)},mn.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,mn.Z.N.call(this)};function Iu(u){Qt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Iu,Qt);function Nu(){yn.call(this),this.status=1}w(Nu,yn);function cs(u){this.g=u}w(cs,Cu),cs.prototype.ra=function(){Rt(this.g,"a")},cs.prototype.qa=function(u){Rt(this.g,new Iu(u))},cs.prototype.pa=function(u){Rt(this.g,new Nu)},cs.prototype.oa=function(){Rt(this.g,"b")},Ys.prototype.createWebChannel=Ys.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,FE=function(){return new Ys},GE=function(){return Ci()},HE=Ze,fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,Yc=Ii,Ur.COMPLETE="complete",qE=Ur,kr.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Pl=kr,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,BE=at}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const H_="@firebase/firestore",G_="4.9.2";class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let Lo="12.3.0";const ya=new Im("@firebase/firestore");function mo(){return ya.logLevel}function ue(s,...e){if(ya.logLevel<=ze.DEBUG){const i=e.map(qm);ya.debug(`Firestore (${Lo}): ${s}`,...i)}}function Ds(s,...e){if(ya.logLevel<=ze.ERROR){const i=e.map(qm);ya.error(`Firestore (${Lo}): ${s}`,...i)}}function xo(s,...e){if(ya.logLevel<=ze.WARN){const i=e.map(qm);ya.warn(`Firestore (${Lo}): ${s}`,...i)}}function qm(s){if(typeof s=="string")return s;try{return(function(i){return JSON.stringify(i)})(s)}catch{return s}}function we(s,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,$E(s,r,i)}function $E(s,e,i){let r=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw Ds(r),new Error(r)}function tt(s,e,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||$E(e,l,r)}function Ie(s,e){return s}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Ms{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fa{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}class QE{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(un.UNAUTHENTICATED)))}shutdown(){}}class mR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class gR{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){tt(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let c=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new fa,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},g=y=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new fa)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string",31837,{l:r}),new QE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class pR{constructor(e,i,r){this.P=e,this.T=i,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yR{constructor(e,i,r){this.P=e,this.T=i,this.I=r}getToken(){return Promise.resolve(new pR(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class F_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){tt(this.o===void 0,3512);const r=c=>{c.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new F_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(tt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new F_(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}class Hm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=vR(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<i&&(r+=e.charAt(l[c]%62))}return r}}function Be(s,e){return s<e?-1:s>e?1:0}function dm(s,e){const i=Math.min(s.length,e.length);for(let r=0;r<i;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return Jd(l)===Jd(c)?Be(l,c):Jd(l)?1:-1}return Be(s.length,e.length)}const ER=55296,bR=57343;function Jd(s){const e=s.charCodeAt(0);return e>=ER&&e<=bR}function Ro(s,e,i){return s.length===e.length&&s.every(((r,l)=>i(r,e[l])))}const $_="__name__";class Hi{constructor(e,i,r){i===void 0?i=0:i>e.length&&we(637,{offset:i,range:e.length}),r===void 0?r=e.length-i:r>e.length-i&&we(1746,{length:r,range:e.length-i}),this.segments=e,this.offset=i,this.len=r}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((r=>{i.push(r)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,r=this.limit();i<r;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const r=Math.min(e.length,i.length);for(let l=0;l<r;l++){const c=Hi.compareSegments(e.get(l),i.get(l));if(c!==0)return c}return Be(e.length,i.length)}static compareSegments(e,i){const r=Hi.isNumericId(e),l=Hi.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Hi.extractNumericId(e).compare(Hi.extractNumericId(i)):dm(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}}class ft extends Hi{construct(e,i,r){return new ft(e,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new ft(i)}static emptyPath(){return new ft([])}}const TR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Hi{construct(e,i,r){return new rn(e,i,r)}static isValidIdentifier(e){return TR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$_}static keyField(){return new rn([$_])}static fromServerFormat(e){const i=[];let r="",l=0;const c=()=>{if(r.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let d=!1;for(;l<e.length;){const g=e[l];if(g==="\\"){if(l+1===e.length)throw new le(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new le(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(r+=g,l++):(c(),l++)}if(c(),d)throw new le(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(i)}static emptyPath(){return new rn([])}}class me{constructor(e){this.path=e}static fromPath(e){return new me(ft.fromString(e))}static fromName(e){return new me(ft.fromString(e).popFirst(5))}static empty(){return new me(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return ft.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new ft(e.slice()))}}function KE(s,e,i){if(!i)throw new le(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function SR(s,e,i,r){if(e===!0&&r===!0)throw new le(J.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function Q_(s){if(!me.isDocumentKey(s))throw new le(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function K_(s){if(me.isDocumentKey(s))throw new le(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function YE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function wh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function bo(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new le(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=wh(s);throw new le(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}function qt(s,e){const i={typeString:s};return e&&(i.value=e),i}function hu(s,e){if(!YE(s))throw new le(J.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${r}' field to equal '${c.value}'`;break}}if(i)throw new le(J.INVALID_ARGUMENT,i);return!0}const Y_=-62135596800,X_=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),r=Math.floor((e-1e3*i)*X_);return new gt(i,r)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new le(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Y_)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X_}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:qt("string",gt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new gt(0,0))}static max(){return new xe(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jl=-1;function AR(s,e){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=xe.fromTimestamp(r===1e9?new gt(i+1,0):new gt(i,r));return new Cr(l,me.empty(),e)}function wR(s){return new Cr(s.readTime,s.key,Jl)}class Cr{constructor(e,i,r){this.readTime=e,this.documentKey=i,this.largestBatchId=r}static min(){return new Cr(xe.min(),me.empty(),Jl)}static max(){return new Cr(xe.max(),me.empty(),Jl)}}function xR(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=me.comparator(s.documentKey,e.documentKey),i!==0?i:Be(s.largestBatchId,e.largestBatchId))}const RR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Uo(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==RR)throw s;ue("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new Z(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(r,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.reject(i)}static resolve(e){return new Z(((i,r)=>{i(e)}))}static reject(e){return new Z(((i,r)=>{r(e)}))}static waitFor(e){return new Z(((i,r)=>{let l=0,c=0,d=!1;e.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&i()}),(y=>r(y)))})),d=!0,c===l&&i()}))}static or(e){let i=Z.resolve(!1);for(const r of e)i=i.next((l=>l?Z.resolve(l):r()));return i}static forEach(e,i){const r=[];return e.forEach(((l,c)=>{r.push(i.call(this,l,c))})),this.waitFor(r)}static mapArray(e,i){return new Z(((r,l)=>{const c=e.length,d=new Array(c);let g=0;for(let y=0;y<c;y++){const _=y;i(e[_]).next((S=>{d[_]=S,++g,g===c&&r(d)}),(S=>l(S)))}}))}static doWhile(e,i){return new Z(((r,l)=>{const c=()=>{e()===!0?i().next((()=>{c()}),l):r()};c()}))}}function IR(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function jo(s){return s.name==="IndexedDbTransactionError"}class xh{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xh.ce=-1;const Gm=-1;function Rh(s){return s==null}function ch(s){return s===0&&1/s==-1/0}function NR(s){return typeof s=="number"&&Number.isInteger(s)&&!ch(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const XE="";function DR(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=J_(e)),e=OR(s.get(i),e);return J_(e)}function OR(s,e){let i=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":i+="";break;case XE:i+="";break;default:i+=c}}return i}function J_(s){return s+XE+""}function Z_(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function va(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function JE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class bt{constructor(e,i){this.comparator=e,this.root=i||sn.EMPTY}insert(e,i){return new bt(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(e){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,r)=>(e(i,r),!1)))}toString(){const e=[];return this.inorderTraversal(((i,r)=>(e.push(`${i}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,i,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?r(e.key,i):1,i&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,i,r,l,c){this.key=e,this.value=i,this.color=r??sn.RED,this.left=l??sn.EMPTY,this.right=c??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,r,l,c){return new sn(e??this.key,i??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,i,r),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let r,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return sn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,i,r,l,c){return this}insert(e,i,r){return new sn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ft{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,r)=>(e(i),!1)))}forEachInRange(e,i){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new W_(this.data.getIterator())}getIteratorFrom(e){return new W_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((r=>{i=i.add(r)})),i}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const i=this.data.getIterator(),r=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Ft(this.comparator);return i.data=e,i}}class W_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ei{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new Ei([])}unionWith(e){let i=new Ft(rn.comparator);for(const r of this.fields)i=i.add(r);for(const r of e)i=i.add(r);return new Ei(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((i,r)=>i.isEqual(r)))}}class ZE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class an{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ZE("Invalid base64 string: "+c):c}})(e);return new an(i)}static fromUint8Array(e){const i=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new an(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const MR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(s){if(tt(!!s,39018),typeof s=="string"){let e=0;const i=MR.exec(s);if(tt(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(s.seconds),nanos:Dt(s.nanos)}}function Dt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Nr(s){return typeof s=="string"?an.fromBase64String(s):an.fromUint8Array(s)}const WE="server_timestamp",eb="__type__",tb="__previous_value__",nb="__local_write_time__";function Fm(s){return(s?.mapValue?.fields||{})[eb]?.stringValue===WE}function Ch(s){const e=s.mapValue.fields[tb];return Fm(e)?Ch(e):e}function Zl(s){const e=Ir(s.mapValue.fields[nb].timestampValue);return new gt(e.seconds,e.nanos)}class VR{constructor(e,i,r,l,c,d,g,y,_,S){this.databaseId=e,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=S}}const hh="(default)";class Wl{constructor(e,i){this.projectId=e,this.database=i||hh}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}const ib="__type__",kR="__max__",Bc={mapValue:{}},sb="__vector__",fh="value";function Dr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Fm(s)?4:UR(s)?9007199254740991:LR(s)?10:11:we(28295,{value:s})}function Ji(s,e){if(s===e)return!0;const i=Dr(s);if(i!==Dr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Zl(s).isEqual(Zl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Ir(l.timestampValue),g=Ir(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Nr(l.bytesValue).isEqual(Nr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return Dt(l.geoPointValue.latitude)===Dt(c.geoPointValue.latitude)&&Dt(l.geoPointValue.longitude)===Dt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Dt(l.integerValue)===Dt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Dt(l.doubleValue),g=Dt(c.doubleValue);return d===g?ch(d)===ch(g):isNaN(d)&&isNaN(g)}return!1})(s,e);case 9:return Ro(s.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(Z_(d)!==Z_(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!Ji(d[y],g[y])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function eu(s,e){return(s.values||[]).find((i=>Ji(i,e)))!==void 0}function Co(s,e){if(s===e)return 0;const i=Dr(s),r=Dr(e);if(i!==r)return Be(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Be(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const g=Dt(c.integerValue||c.doubleValue),y=Dt(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(s,e);case 3:return ev(s.timestampValue,e.timestampValue);case 4:return ev(Zl(s),Zl(e));case 5:return dm(s.stringValue,e.stringValue);case 6:return(function(c,d){const g=Nr(c),y=Nr(d);return g.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const g=c.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const S=Be(g[_],y[_]);if(S!==0)return S}return Be(g.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const g=Be(Dt(c.latitude),Dt(d.latitude));return g!==0?g:Be(Dt(c.longitude),Dt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return tv(s.arrayValue,e.arrayValue);case 10:return(function(c,d){const g=c.fields||{},y=d.fields||{},_=g[fh]?.arrayValue,S=y[fh]?.arrayValue,w=Be(_?.values?.length||0,S?.values?.length||0);return w!==0?w:tv(_,S)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Bc.mapValue&&d===Bc.mapValue)return 0;if(c===Bc.mapValue)return 1;if(d===Bc.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),_=d.fields||{},S=Object.keys(_);y.sort(),S.sort();for(let w=0;w<y.length&&w<S.length;++w){const A=dm(y[w],S[w]);if(A!==0)return A;const K=Co(g[y[w]],_[S[w]]);if(K!==0)return K}return Be(y.length,S.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:i})}}function ev(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Be(s,e);const i=Ir(s),r=Ir(e),l=Be(i.seconds,r.seconds);return l!==0?l:Be(i.nanos,r.nanos)}function tv(s,e){const i=s.values||[],r=e.values||[];for(let l=0;l<i.length&&l<r.length;++l){const c=Co(i[l],r[l]);if(c)return c}return Be(i.length,r.length)}function Io(s){return mm(s)}function mm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Ir(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Nr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return me.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const c of i.values||[])l?l=!1:r+=",",r+=mm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of r)c?c=!1:l+=",",l+=`${d}:${mm(i.fields[d])}`;return l+"}"})(s.mapValue):we(61005,{value:s})}function Xc(s){switch(Dr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ch(s);return e?16+Xc(e):16;case 5:return 2*s.stringValue.length;case 6:return Nr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Xc(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return va(r.fields,((c,d)=>{l+=c.length+Xc(d)})),l})(s.mapValue);default:throw we(13486,{value:s})}}function nv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function gm(s){return!!s&&"integerValue"in s}function $m(s){return!!s&&"arrayValue"in s}function iv(s){return!!s&&"nullValue"in s}function sv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Jc(s){return!!s&&"mapValue"in s}function LR(s){return(s?.mapValue?.fields||{})[ib]?.stringValue===sb}function Fl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return va(s.mapValue.fields,((i,r)=>e.mapValue.fields[i]=Fl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Fl(s.arrayValue.values[i]);return e}return{...s}}function UR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===kR}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let r=0;r<e.length-1;++r)if(i=(i.mapValue.fields||{})[e.get(r)],!Jc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fl(i)}setAll(e){let i=rn.emptyPath(),r={},l=[];e.forEach(((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=g.popLast()}d?r[g.lastSegment()]=Fl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,r,l)}delete(e){const i=this.field(e.popLast());Jc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=i.mapValue.fields[e.get(r)];Jc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,r){va(i,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new si(Fl(this.value))}}function rb(s){const e=[];return va(s.fields,((i,r)=>{const l=new rn([i]);if(Jc(r)){const c=rb(r.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new Ei(e)}class cn{constructor(e,i,r,l,c,d,g){this.key=e,this.documentType=i,this.version=r,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new cn(e,0,xe.min(),xe.min(),xe.min(),si.empty(),0)}static newFoundDocument(e,i,r,l){return new cn(e,1,i,xe.min(),r,l,0)}static newNoDocument(e,i){return new cn(e,2,i,xe.min(),xe.min(),si.empty(),0)}static newUnknownDocument(e,i){return new cn(e,3,i,xe.min(),xe.min(),si.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dh{constructor(e,i){this.position=e,this.inclusive=i}}function rv(s,e,i){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],d=s.position[l];if(c.field.isKeyField()?r=me.comparator(me.fromName(d.referenceValue),i.key):r=Co(d,i.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function av(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ji(s.position[i],e.position[i]))return!1;return!0}class tu{constructor(e,i="asc"){this.field=e,this.dir=i}}function jR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class ab{}class Bt extends ab{constructor(e,i,r){super(),this.field=e,this.op=i,this.value=r}static create(e,i,r){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,r):new zR(e,i,r):i==="array-contains"?new HR(e,r):i==="in"?new GR(e,r):i==="not-in"?new FR(e,r):i==="array-contains-any"?new $R(e,r):new Bt(e,i,r)}static createKeyFieldInFilter(e,i,r){return i==="in"?new BR(e,r):new qR(e,r)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Co(i,this.value)):i!==null&&Dr(this.value)===Dr(i)&&this.matchesComparison(Co(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends ab{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new Si(e,i)}matches(e){return ob(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ob(s){return s.op==="and"}function lb(s){return PR(s)&&ob(s)}function PR(s){for(const e of s.filters)if(e instanceof Si)return!1;return!0}function pm(s){if(s instanceof Bt)return s.field.canonicalString()+s.op.toString()+Io(s.value);if(lb(s))return s.filters.map((e=>pm(e))).join(",");{const e=s.filters.map((i=>pm(i))).join(",");return`${s.op}(${e})`}}function ub(s,e){return s instanceof Bt?(function(r,l){return l instanceof Bt&&r.op===l.op&&r.field.isEqual(l.field)&&Ji(r.value,l.value)})(s,e):s instanceof Si?(function(r,l){return l instanceof Si&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,d,g)=>c&&ub(d,l.filters[g])),!0):!1})(s,e):void we(19439)}function cb(s){return s instanceof Bt?(function(i){return`${i.field.canonicalString()} ${i.op} ${Io(i.value)}`})(s):s instanceof Si?(function(i){return i.op.toString()+" {"+i.getFilters().map(cb).join(" ,")+"}"})(s):"Filter"}class zR extends Bt{constructor(e,i,r){super(e,i,r),this.key=me.fromName(r.referenceValue)}matches(e){const i=me.comparator(e.key,this.key);return this.matchesComparison(i)}}class BR extends Bt{constructor(e,i){super(e,"in",i),this.keys=hb("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class qR extends Bt{constructor(e,i){super(e,"not-in",i),this.keys=hb("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function hb(s,e){return(e.arrayValue?.values||[]).map((i=>me.fromName(i.referenceValue)))}class HR extends Bt{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return $m(i)&&eu(i.arrayValue,this.value)}}class GR extends Bt{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&eu(this.value.arrayValue,i)}}class FR extends Bt{constructor(e,i){super(e,"not-in",i)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!eu(this.value.arrayValue,i)}}class $R extends Bt{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!$m(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>eu(this.value.arrayValue,r)))}}class QR{constructor(e,i=null,r=[],l=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function ov(s,e=null,i=[],r=[],l=null,c=null,d=null){return new QR(s,e,i,r,l,c,d)}function Qm(s){const e=Ie(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((r=>pm(r))).join(","),i+="|ob:",i+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Rh(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>Io(r))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>Io(r))).join(",")),e.Te=i}return e.Te}function Km(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!jR(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!ub(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!av(s.startAt,e.startAt)&&av(s.endAt,e.endAt)}function ym(s){return me.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Po{constructor(e,i=null,r=[],l=[],c=null,d="F",g=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KR(s,e,i,r,l,c,d,g){return new Po(s,e,i,r,l,c,d,g)}function Ym(s){return new Po(s)}function lv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function fb(s){return s.collectionGroup!==null}function $l(s){const e=Ie(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),i.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ft(rn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(e).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new tu(c,r))})),i.has(rn.keyField().canonicalString())||e.Ie.push(new tu(rn.keyField(),r))}return e.Ie}function Fi(s){const e=Ie(s);return e.Ee||(e.Ee=YR(e,$l(s))),e.Ee}function YR(s,e){if(s.limitType==="F")return ov(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new tu(l.field,c)}));const i=s.endAt?new dh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new dh(s.startAt.position,s.startAt.inclusive):null;return ov(s.path,s.collectionGroup,e,s.filters,s.limit,i,r)}}function _m(s,e){const i=s.filters.concat([e]);return new Po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function mh(s,e,i){return new Po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function Ih(s,e){return Km(Fi(s),Fi(e))&&s.limitType===e.limitType}function db(s){return`${Qm(Fi(s))}|lt:${s.limitType}`}function go(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>cb(l))).join(", ")}]`),Rh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>Io(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>Io(l))).join(",")),`Target(${r})`})(Fi(s))}; limitType=${s.limitType})`}function Nh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):me.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of $l(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(d,g,y){const _=rv(d,g,y);return d.inclusive?_<=0:_<0})(r.startAt,$l(r),l)||r.endAt&&!(function(d,g,y){const _=rv(d,g,y);return d.inclusive?_>=0:_>0})(r.endAt,$l(r),l))})(s,e)}function XR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function mb(s){return(e,i)=>{let r=!1;for(const l of $l(s)){const c=JR(l,e,i);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function JR(s,e,i){const r=s.field.isKeyField()?me.comparator(e.key,i.key):(function(c,d,g){const y=d.data.field(c),_=g.data.field(c);return y!==null&&_!==null?Co(y,_):we(42886)})(s.field,e,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:s.dir})}}class Ea{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((i,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}const ZR=new bt(me.comparator);function Os(){return ZR}const gb=new bt(me.comparator);function zl(...s){let e=gb;for(const i of s)e=e.insert(i.key,i);return e}function pb(s){let e=gb;return s.forEach(((i,r)=>e=e.insert(i,r.overlayedDocument))),e}function ha(){return Ql()}function yb(){return Ql()}function Ql(){return new Ea((s=>s.toString()),((s,e)=>s.isEqual(e)))}const WR=new bt(me.comparator),eC=new Ft(me.comparator);function qe(...s){let e=eC;for(const i of s)e=e.add(i);return e}const tC=new Ft(Be);function nC(){return tC}function Xm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function _b(s){return{integerValue:""+s}}function iC(s,e){return NR(e)?_b(e):Xm(s,e)}class Dh{constructor(){this._=void 0}}function sC(s,e,i){return s instanceof nu?(function(l,c){const d={fields:{[eb]:{stringValue:WE},[nb]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Fm(c)&&(c=Ch(c)),c&&(d.fields[tb]=c),{mapValue:d}})(i,e):s instanceof iu?Eb(s,e):s instanceof su?bb(s,e):(function(l,c){const d=vb(l,c),g=uv(d)+uv(l.Ae);return gm(d)&&gm(l.Ae)?_b(g):Xm(l.serializer,g)})(s,e)}function rC(s,e,i){return s instanceof iu?Eb(s,e):s instanceof su?bb(s,e):i}function vb(s,e){return s instanceof gh?(function(r){return gm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class nu extends Dh{}class iu extends Dh{constructor(e){super(),this.elements=e}}function Eb(s,e){const i=Tb(e);for(const r of s.elements)i.some((l=>Ji(l,r)))||i.push(r);return{arrayValue:{values:i}}}class su extends Dh{constructor(e){super(),this.elements=e}}function bb(s,e){let i=Tb(e);for(const r of s.elements)i=i.filter((l=>!Ji(l,r)));return{arrayValue:{values:i}}}class gh extends Dh{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function uv(s){return Dt(s.integerValue||s.doubleValue)}function Tb(s){return $m(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class aC{constructor(e,i){this.field=e,this.transform=i}}function oC(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof iu&&l instanceof iu||r instanceof su&&l instanceof su?Ro(r.elements,l.elements,Ji):r instanceof gh&&l instanceof gh?Ji(r.Ae,l.Ae):r instanceof nu&&l instanceof nu})(s.transform,e.transform)}class lC{constructor(e,i){this.version=e,this.transformResults=i}}class $i{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Oh{}function Sb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Jm(s.key,$i.none()):new fu(s.key,s.data,$i.none());{const i=s.data,r=si.empty();let l=new Ft(rn.comparator);for(let c of e.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?r.delete(c):r.set(c,d),l=l.add(c)}return new ba(s.key,r,new Ei(l.toArray()),$i.none())}}function uC(s,e,i){s instanceof fu?(function(l,c,d){const g=l.value.clone(),y=hv(l.fieldTransforms,c,d.transformResults);g.setAll(y),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,i):s instanceof ba?(function(l,c,d){if(!Zc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=hv(l.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(Ab(l)),y.setAll(g),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,i):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function Kl(s,e,i,r){return s instanceof fu?(function(c,d,g,y){if(!Zc(c.precondition,d))return g;const _=c.value.clone(),S=fv(c.fieldTransforms,y,d);return _.setAll(S),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(s,e,i,r):s instanceof ba?(function(c,d,g,y){if(!Zc(c.precondition,d))return g;const _=fv(c.fieldTransforms,y,d),S=d.data;return S.setAll(Ab(c)),S.setAll(_),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,e,i,r):(function(c,d,g){return Zc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(s,e,i)}function cC(s,e){let i=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=vb(r.transform,l||null);c!=null&&(i===null&&(i=si.empty()),i.set(r.field,c))}return i||null}function cv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&Ro(r,l,((c,d)=>oC(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fu extends Oh{constructor(e,i,r,l=[]){super(),this.key=e,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ba extends Oh{constructor(e,i,r,l,c=[]){super(),this.key=e,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ab(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);e.set(i,r)}})),e}function hv(s,e,i){const r=new Map;tt(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const c=s[l],d=c.transform,g=e.data.field(c.field);r.set(c.field,rC(d,g,i[l]))}return r}function fv(s,e,i){const r=new Map;for(const l of s){const c=l.transform,d=i.data.field(l.field);r.set(l.field,sC(c,d,e))}return r}class Jm extends Oh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hC extends Oh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fC{constructor(e,i,r,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&uC(c,e,r[l])}}applyToLocalView(e,i){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(i=Kl(r,e,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(i=Kl(r,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const r=yb();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=i.has(l.key)?null:g;const y=Sb(d,g);y!==null&&r.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(xe.min())})),r}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((i,r)=>cv(i,r)))&&Ro(this.baseMutations,e.baseMutations,((i,r)=>cv(i,r)))}}class Zm{constructor(e,i,r,l){this.batch=e,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(e,i,r){tt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return WR})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,r[d].version);return new Zm(e,i,r,l)}}class dC{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mC{constructor(e,i){this.count=e,this.unchangedNames=i}}var zt,$e;function gC(s){switch(s){case J.OK:return we(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function wb(s){if(s===void 0)return Ds("GRPC error has no .code"),J.UNKNOWN;switch(s){case zt.OK:return J.OK;case zt.CANCELLED:return J.CANCELLED;case zt.UNKNOWN:return J.UNKNOWN;case zt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case zt.INTERNAL:return J.INTERNAL;case zt.UNAVAILABLE:return J.UNAVAILABLE;case zt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case zt.NOT_FOUND:return J.NOT_FOUND;case zt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case zt.ABORTED:return J.ABORTED;case zt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case zt.DATA_LOSS:return J.DATA_LOSS;default:return we(39323,{code:s})}}($e=zt||(zt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function pC(){return new TextEncoder}const yC=new xr([4294967295,4294967295],0);function dv(s){const e=pC().encode(s),i=new zE;return i.update(e),new Uint8Array(i.digest())}function mv(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new xr([i,r],0),new xr([l,c],0)]}class Wm{constructor(e,i,r){if(this.bitmap=e,this.padding=i,this.hashCount=r,i<0||i>=8)throw new Bl(`Invalid padding: ${i}`);if(r<0)throw new Bl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${r}`);if(e.length===0&&i!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=xr.fromNumber(this.ge)}ye(e,i,r){let l=e.add(i.multiply(xr.fromNumber(r)));return l.compare(yC)===1&&(l=new xr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=dv(e),[r,l]=mv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);if(!this.we(d))return!1}return!0}static create(e,i,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Wm(c,l,i);return r.forEach((g=>d.insert(g))),d}insert(e){if(this.ge===0)return;const i=dv(e),[r,l]=mv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);this.Se(d)}}Se(e){const i=Math.floor(e/8),r=e%8;this.bitmap[i]|=1<<r}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mh{constructor(e,i,r,l,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,r){const l=new Map;return l.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,i,r)),new Mh(xe.min(),l,new bt(Be),Os(),qe())}}class du{constructor(e,i,r,l,c){this.resumeToken=e,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,r){return new du(r,i,qe(),qe(),qe())}}class Wc{constructor(e,i,r,l){this.be=e,this.removedTargetIds=i,this.key=r,this.De=l}}class xb{constructor(e,i){this.targetId=e,this.Ce=i}}class Rb{constructor(e,i,r=an.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=r,this.cause=l}}class gv{constructor(){this.ve=0,this.Fe=pv(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),i=qe(),r=qe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:we(38017,{changeType:c})}})),new du(this.Me,this.xe,e,i,r)}qe(){this.Oe=!1,this.Fe=pv()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _C{constructor(e){this.Ge=e,this.ze=new Map,this.je=Os(),this.Je=qc(),this.He=qc(),this.Ye=new bt(Be)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const r=this.nt(i);switch(e.state){case 0:this.rt(i)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,r=e.Ce.count,l=this.ot(i);if(l){const c=l.target;if(ym(c))if(r===0){const d=new me(c.path);this.et(i,d,cn.newNoDocument(d,xe.min()))}else tt(r===1,20013,{expectedCount:r});else{const d=this._t(i);if(d!==r){const g=this.ut(e),y=g?this.ct(g,e,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=i;let d,g;try{d=Nr(r).toUint8Array()}catch(y){if(y instanceof ZE)return xo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Wm(d,l,c)}catch(y){return xo(y instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,i,r){return i.Ce.count===r-this.Pt(e,i.targetId)?0:2}Pt(e,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(i,c,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&ym(g.target)){const y=new me(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,cn.newNoDocument(y,e))}c.Be&&(i.set(d,c.ke()),c.qe())}}));let r=qe();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Mh(e,i,this.Ye,this.je,r);return this.je=Os(),this.Je=qc(),this.He=qc(),this.Ye=new bt(Be),l}Xe(e,i){if(!this.rt(e))return;const r=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),r&&(this.je=this.je.insert(i,r))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new gv,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Ft(Be),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Ft(Be),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||ue("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gv),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function qc(){return new bt(me.comparator)}function pv(){return new bt(me.comparator)}const vC={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class TC{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function vm(s,e){return s.useProto3Json||Rh(e)?e:{value:e}}function ph(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cb(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function SC(s,e){return ph(s,e.toTimestamp())}function Qi(s){return tt(!!s,49232),xe.fromTimestamp((function(i){const r=Ir(i);return new gt(r.seconds,r.nanos)})(s))}function eg(s,e){return Em(s,e).canonicalString()}function Em(s,e){const i=(function(l){return new ft(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function Ib(s){const e=ft.fromString(s);return tt(Vb(e),10190,{key:e.toString()}),e}function bm(s,e){return eg(s.databaseId,e.path)}function Zd(s,e){const i=Ib(e);if(i.get(1)!==s.databaseId.projectId)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new le(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new me(Db(i))}function Nb(s,e){return eg(s.databaseId,e)}function AC(s){const e=Ib(s);return e.length===4?ft.emptyPath():Db(e)}function Tm(s){return new ft(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Db(s){return tt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function yv(s,e,i){return{name:bm(s,e),fields:i.value.mapValue.fields}}function wC(s,e){let i;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:we(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(_,S){return _.useProto3Json?(tt(S===void 0||typeof S=="string",58123),an.fromBase64String(S||"")):(tt(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),an.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&(function(_){const S=_.code===void 0?J.UNKNOWN:wb(_.code);return new le(S,_.message||"")})(d);i=new Rb(r,l,c,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Zd(s,r.document.name),c=Qi(r.document.updateTime),d=r.document.createTime?Qi(r.document.createTime):xe.min(),g=new si({mapValue:{fields:r.document.fields}}),y=cn.newFoundDocument(l,c,d,g),_=r.targetIds||[],S=r.removedTargetIds||[];i=new Wc(_,S,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Zd(s,r.document),c=r.readTime?Qi(r.readTime):xe.min(),d=cn.newNoDocument(l,c),g=r.removedTargetIds||[];i=new Wc([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Zd(s,r.document),c=r.removedTargetIds||[];i=new Wc([],c,l,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,d=new mC(l,c),g=r.targetId;i=new xb(g,d)}}return i}function xC(s,e){let i;if(e instanceof fu)i={update:yv(s,e.key,e.value)};else if(e instanceof Jm)i={delete:bm(s,e.key)};else if(e instanceof ba)i={update:yv(s,e.key,e.data),updateMask:kC(e.fieldMask)};else{if(!(e instanceof hC))return we(16599,{Vt:e.type});i={verify:bm(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const g=d.transform;if(g instanceof nu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof iu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof su)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof gh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw we(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:SC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),i}function RC(s,e){return s&&s.length>0?(tt(e!==void 0,14353),s.map((i=>(function(l,c){let d=l.updateTime?Qi(l.updateTime):Qi(c);return d.isEqual(xe.min())&&(d=Qi(c)),new lC(d,l.transformResults||[])})(i,e)))):[]}function CC(s,e){return{documents:[Nb(s,e.path)]}}function IC(s,e){const i={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=Nb(s,l);const c=(function(_){if(_.length!==0)return Mb(Si.create(_,"and"))})(e.filters);c&&(i.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((S=>(function(A){return{field:po(A.field),direction:OC(A.dir)}})(S)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=vm(s,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:i,parent:l}}function NC(s){let e=AC(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){tt(r===1,65062);const S=i.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let c=[];i.where&&(c=(function(w){const A=Ob(w);return A instanceof Si&&lb(A)?A.getFilters():[A]})(i.where));let d=[];i.orderBy&&(d=(function(w){return w.map((A=>(function(W){return new tu(yo(W.field),(function(ee){switch(ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(A)))})(i.orderBy));let g=null;i.limit&&(g=(function(w){let A;return A=typeof w=="object"?w.value:w,Rh(A)?null:A})(i.limit));let y=null;i.startAt&&(y=(function(w){const A=!!w.before,K=w.values||[];return new dh(K,A)})(i.startAt));let _=null;return i.endAt&&(_=(function(w){const A=!w.before,K=w.values||[];return new dh(K,A)})(i.endAt)),KR(e,l,d,c,g,"F",y,_)}function DC(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Ob(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=yo(i.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=yo(i.unaryFilter.field);return Bt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=yo(i.unaryFilter.field);return Bt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=yo(i.unaryFilter.field);return Bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Bt.create(yo(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Si.create(i.compositeFilter.filters.map((r=>Ob(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(i.compositeFilter.op))})(s):we(30097,{filter:s})}function OC(s){return vC[s]}function MC(s){return EC[s]}function VC(s){return bC[s]}function po(s){return{fieldPath:s.canonicalString()}}function yo(s){return rn.fromServerFormat(s.fieldPath)}function Mb(s){return s instanceof Bt?(function(i){if(i.op==="=="){if(sv(i.value))return{unaryFilter:{field:po(i.field),op:"IS_NAN"}};if(iv(i.value))return{unaryFilter:{field:po(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(sv(i.value))return{unaryFilter:{field:po(i.field),op:"IS_NOT_NAN"}};if(iv(i.value))return{unaryFilter:{field:po(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(i.field),op:MC(i.op),value:i.value}}})(s):s instanceof Si?(function(i){const r=i.getFilters().map((l=>Mb(l)));return r.length===1?r[0]:{compositeFilter:{op:VC(i.op),filters:r}}})(s):we(54877,{filter:s})}function kC(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Vb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Tr{constructor(e,i,r,l,c=xe.min(),d=xe.min(),g=an.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class LC{constructor(e){this.yt=e}}function UC(s){const e=NC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?mh(e,e.limit,"L"):e}class jC{constructor(){this.Cn=new PC}addToCollectionParentIndex(e,i){return this.Cn.add(i),Z.resolve()}getCollectionParents(e,i){return Z.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return Z.resolve()}deleteFieldIndex(e,i){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,i){return Z.resolve()}getDocumentsMatchingTarget(e,i){return Z.resolve(null)}getIndexType(e,i){return Z.resolve(0)}getFieldIndexes(e,i){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,i){return Z.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,i){return Z.resolve(Cr.min())}updateCollectionGroup(e,i,r){return Z.resolve()}updateIndexEntries(e,i){return Z.resolve()}}class PC{constructor(){this.index={}}add(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i]||new Ft(ft.comparator),c=!l.has(r);return this.index[i]=l.add(r),c}has(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Ft(ft.comparator)).toArray()}}const _v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kb=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(kb,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}const vv="LruGarbageCollector",zC=1048576;function Ev([s,e],[i,r]){const l=Be(s,i);return l===0?Be(e,r):l}class BC{constructor(e){this.Ir=e,this.buffer=new Ft(Ev),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();Ev(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class qC{constructor(e,i,r){this.garbageCollector=e,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(vv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){jo(i)?ue(vv,"Ignoring IndexedDB error during garbage collection: ",i):await Uo(i)}await this.Vr(3e5)}))}}class HC{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(e,i){if(i===0)return Z.resolve(xh.ce);const r=new BC(i);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,i,r){return this.mr.removeTargets(e,i,r)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(_v)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_v):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let r,l,c,d,g,y,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(r=w,g=Date.now(),this.removeTargets(e,r,i)))).next((w=>(c=w,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(_=Date.now(),mo()<=ze.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(y-g)+`ms
	Removed ${w} documents in `+(_-y)+`ms
Total Duration: ${_-S}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function GC(s,e){return new HC(s,e)}class FC{constructor(){this.changes=new Ea((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?Z.resolve(r):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $C{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class QC{constructor(e,i,r,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,i){let r=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(r!==null&&Kl(r.mutation,l,Ei.empty(),gt.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.getLocalViewOfDocuments(e,r,qe()).next((()=>r))))}getLocalViewOfDocuments(e,i,r=qe()){const l=ha();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,r).next((c=>{let d=zl();return c.forEach(((g,y)=>{d=d.insert(g,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const r=ha();return this.populateOverlays(e,r,i).next((()=>this.computeViews(e,i,r,qe())))}populateOverlays(e,i,r){const l=[];return r.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,g)=>{i.set(d,g)}))}))}computeViews(e,i,r,l){let c=Os();const d=Ql(),g=(function(){return Ql()})();return i.forEach(((y,_)=>{const S=r.get(_.key);l.has(_.key)&&(S===void 0||S.mutation instanceof ba)?c=c.insert(_.key,_):S!==void 0?(d.set(_.key,S.mutation.getFieldMask()),Kl(S.mutation,_,S.mutation.getFieldMask(),gt.now())):d.set(_.key,Ei.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((_,S)=>d.set(_,S))),i.forEach(((_,S)=>g.set(_,new $C(S,d.get(_)??null)))),g)))}recalculateAndSaveOverlays(e,i){const r=Ql();let l=new bt(((d,g)=>d-g)),c=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const g of d)g.keys().forEach((y=>{const _=i.get(y);if(_===null)return;let S=r.get(y)||Ei.empty();S=g.applyToLocalView(_,S),r.set(y,S);const w=(l.get(g.batchId)||qe()).add(y);l=l.insert(g.batchId,w)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,S=y.value,w=yb();S.forEach((A=>{if(!c.has(A)){const K=Sb(i.get(A),r.get(A));K!==null&&w.set(A,K),c=c.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,w))}return Z.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,i,r,l){return(function(d){return me.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):fb(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,r,l):this.getDocumentsMatchingCollectionQuery(e,i,r,l)}getNextDocuments(e,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,r,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,r.largestBatchId,l-c.size):Z.resolve(ha());let g=Jl,y=c;return d.next((_=>Z.forEach(_,((S,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),c.get(S)?Z.resolve():this.remoteDocumentCache.getEntry(e,S).next((A=>{y=y.insert(S,A)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,y,_,qe()))).next((S=>({batchId:g,changes:pb(S)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new me(i)).next((r=>{let l=zl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,r,l){const c=i.collectionGroup;let d=zl();return this.indexManager.getCollectionParents(e,c).next((g=>Z.forEach(g,(y=>{const _=(function(w,A){return new Po(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(i,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,r,l).next((S=>{S.forEach(((w,A)=>{d=d.insert(w,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,r,c,l)))).next((d=>{c.forEach(((y,_)=>{const S=_.getKey();d.get(S)===null&&(d=d.insert(S,cn.newInvalidDocument(S)))}));let g=zl();return d.forEach(((y,_)=>{const S=c.get(y);S!==void 0&&Kl(S.mutation,_,Ei.empty(),gt.now()),Nh(i,_)&&(g=g.insert(y,_))})),g}))}}class KC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return Z.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Qi(l.createTime)}})(i)),Z.resolve()}getNamedQuery(e,i){return Z.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:UC(l.bundledQuery),readTime:Qi(l.readTime)}})(i)),Z.resolve()}}class YC{constructor(){this.overlays=new bt(me.comparator),this.qr=new Map}getOverlay(e,i){return Z.resolve(this.overlays.get(i))}getOverlays(e,i){const r=ha();return Z.forEach(i,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,i,r){return r.forEach(((l,c)=>{this.St(e,i,c)})),Z.resolve()}removeOverlaysForBatchId(e,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,i,r){const l=ha(),c=i.length+1,d=new me(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return Z.resolve(l)}getOverlaysForCollectionGroup(e,i,r,l){let c=new bt(((_,S)=>_-S));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>r){let S=c.get(_.largestBatchId);S===null&&(S=ha(),c=c.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const g=ha(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,S)=>g.set(_,S))),!(g.size()>=l)););return Z.resolve(g)}St(e,i,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new dC(i,r));let c=this.qr.get(i);c===void 0&&(c=qe(),this.qr.set(i,c)),this.qr.set(i,c.add(r.key))}}class XC{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,Z.resolve()}}class tg{constructor(){this.Qr=new Ft(Xt.$r),this.Ur=new Ft(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const r=new Xt(e,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,i){e.forEach((r=>this.addReference(r,i)))}removeReference(e,i){this.Gr(new Xt(e,i))}zr(e,i){e.forEach((r=>this.removeReference(r,i)))}jr(e){const i=new me(new ft([])),r=new Xt(i,e),l=new Xt(i,e+1),c=[];return this.Ur.forEachInRange([r,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new me(new ft([])),r=new Xt(i,e),l=new Xt(i,e+1);let c=qe();return this.Ur.forEachInRange([r,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const i=new Xt(e,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return me.comparator(e.key,i.key)||Be(e.Yr,i.Yr)}static Kr(e,i){return Be(e.Yr,i.Yr)||me.comparator(e.key,i.key)}}class JC{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Xt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new fC(c,i,r,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new Xt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,i){return Z.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const r=i+1,l=this.ei(r),c=l<0?0:l;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Gm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const r=new Xt(i,0),l=new Xt(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let r=new Ft(Be);return i.forEach((l=>{const c=new Xt(l,0),d=new Xt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{r=r.add(g.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,i){const r=i.path,l=r.length+1;let c=r;me.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new me(c),0);let g=new Ft(Be);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!r.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)}),d),Z.resolve(this.ti(g))}ti(e){const i=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){tt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(i.mutations,(l=>{const c=new Xt(l.key,i.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,i){const r=new Xt(i,0),l=this.Zr.firstAfterOrEqual(r);return Z.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class ZC{constructor(e){this.ri=e,this.docs=(function(){return new bt(me.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const r=i.key,l=this.docs.get(r),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const r=this.docs.get(i);return Z.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(i))}getEntries(e,i){let r=Os();return i.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():cn.newInvalidDocument(l))})),Z.resolve(r)}getDocumentsMatchingQuery(e,i,r,l){let c=Os();const d=i.path,g=new me(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:S}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||xR(wR(S),r)<=0||(l.has(S.key)||Nh(i,S))&&(c=c.insert(S.key,S.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,i,r,l){we(9500)}ii(e,i){return Z.forEach(this.docs,(r=>i(r)))}newChangeBuffer(e){return new WC(this)}getSize(e){return Z.resolve(this.size)}}class WC extends FC{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),Z.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}class eI{constructor(e){this.persistence=e,this.si=new Ea((i=>Qm(i)),Km),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new tg,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,i){return this.si.forEach(((r,l)=>i(l))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),Z.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new No(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,Z.resolve()}updateTargetData(e,i){return this.Pr(i),Z.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,i,r){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=i&&r.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),l++)})),Z.waitFor(c).next((()=>l))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,i){const r=this.si.get(i)||null;return Z.resolve(r)}addMatchingKeys(e,i,r){return this._i.Wr(i,r),Z.resolve()}removeMatchingKeys(e,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),Z.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),Z.resolve()}getMatchingKeysForTargetId(e,i){const r=this._i.Hr(i);return Z.resolve(r)}containsKey(e,i){return Z.resolve(this._i.containsKey(i))}}class Lb{constructor(e,i){this.ui={},this.overlays={},this.ci=new xh(0),this.li=!1,this.li=!0,this.hi=new XC,this.referenceDelegate=e(this),this.Pi=new eI(this),this.indexManager=new jC,this.remoteDocumentCache=(function(l){return new ZC(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new LC(i),this.Ii=new KC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new YC,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let r=this.ui[e.toKey()];return r||(r=new JC(i,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,r){ue("MemoryPersistence","Starting transaction:",e);const l=new tI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,i){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,i))))}}class tI extends CR{constructor(e){super(),this.currentSequenceNumber=e}}class ng{constructor(e){this.persistence=e,this.Ri=new tg,this.Vi=null}static mi(e){return new ng(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),Z.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const l=me.fromPath(r);return this.gi(e,l).next((c=>{c||i.removeEntry(l,xe.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return Z.or([()=>Z.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class yh{constructor(e,i){this.persistence=e,this.pi=new Ea((r=>DR(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=GC(this,i)}static mi(e,i){return new yh(e,i)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>i.next((l=>r+l))))}wr(e){let i=0;return this.pr(e,(r=>{i++})).next((()=>i))}pr(e,i){return Z.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?Z.resolve():i(l)))))}removeTargets(e,i,r){return this.persistence.getTargetCache().removeTargets(e,i,r)}removeOrphanedDocuments(e,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,i).next((g=>{g||(r++,c.removeEntry(d,xe.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeTarget(e,i){const r=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Xc(e.data.value)),i}br(e,i,r){return Z.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return Z.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ig{constructor(e,i,r,l){this.targetId=e,this.fromCache=i,this.Es=r,this.ds=l}static As(e,i){let r=qe(),l=qe();for(const c of i.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new ig(e,i.fromCache,r,l)}}class nI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AA()?8:IR(hn())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,r,l){const c={result:null};return this.ys(e,i).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,i,l,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new nI;return this.Ss(e,i,d).next((g=>{if(c.result=g,this.Vs)return this.bs(e,i,d,g.size)}))})).next((()=>c.result))}bs(e,i,r,l){return r.documentReadCount<this.fs?(mo()<=ze.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",go(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(mo()<=ze.DEBUG&&ue("QueryEngine","Query:",go(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(mo()<=ze.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",go(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(i))):Z.resolve())}ys(e,i){if(lv(i))return Z.resolve(null);let r=Fi(i);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=mh(i,null,"F"),r=Fi(i)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=qe(...c);return this.ps.getDocuments(e,d).next((g=>this.indexManager.getMinOffset(e,r).next((y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(e,mh(i,null,"F")):this.vs(e,_,i,y)}))))})))))}ws(e,i,r,l){return lv(i)||l.isEqual(xe.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((c=>{const d=this.Ds(i,c);return this.Cs(i,d,r,l)?Z.resolve(null):(mo()<=ze.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),go(i)),this.vs(e,d,i,AR(l,Jl)).next((g=>g)))}))}Ds(e,i){let r=new Ft(mb(e));return i.forEach(((l,c)=>{Nh(e,c)&&(r=r.add(c))})),r}Cs(e,i,r,l){if(e.limit===null)return!1;if(r.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,i,r){return mo()<=ze.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",go(i)),this.ps.getDocumentsMatchingQuery(e,i,Cr.min(),r)}vs(e,i,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(i.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const sg="LocalStore",sI=3e8;class rI{constructor(e,i,r,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new bt(Be),this.xs=new Ea((c=>Qm(c)),Km),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function aI(s,e,i,r){return new rI(s,e,i,r)}async function Ub(s,e){const i=Ie(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,i.Bs(e),i.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],g=[];let y=qe();for(const _ of l){d.push(_.batchId);for(const S of _.mutations)y=y.add(S.key)}for(const _ of c){g.push(_.batchId);for(const S of _.mutations)y=y.add(S.key)}return i.localDocuments.getDocuments(r,y).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:g})))}))}))}function oI(s,e){const i=Ie(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,_,S){const w=_.batch,A=w.keys();let K=Z.resolve();return A.forEach((W=>{K=K.next((()=>S.getEntry(y,W))).next((ie=>{const ee=_.docVersions.get(W);tt(ee!==null,48541),ie.version.compareTo(ee)<0&&(w.applyToRemoteDocument(ie,_),ie.isValidDocument()&&(ie.setReadTime(_.commitVersion),S.addEntry(ie)))}))})),K.next((()=>g.mutationQueue.removeMutationBatch(y,w)))})(i,r,e,c).next((()=>c.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(g){let y=qe();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y})(e)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function jb(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function lI(s,e){const i=Ie(s),r=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];e.targetChanges.forEach(((S,w)=>{const A=l.get(w);if(!A)return;g.push(i.Pi.removeMatchingKeys(c,S.removedDocuments,w).next((()=>i.Pi.addMatchingKeys(c,S.addedDocuments,w))));let K=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?K=K.withResumeToken(an.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),l=l.insert(w,K),(function(ie,ee,ge){return ie.resumeToken.approximateByteSize()===0||ee.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=sI?!0:ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0})(A,K,S)&&g.push(i.Pi.updateTargetData(c,K))}));let y=Os(),_=qe();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,S))})),g.push(uI(c,d,e.documentUpdates).next((S=>{y=S.ks,_=S.qs}))),!r.isEqual(xe.min())){const S=i.Pi.getLastRemoteSnapshotVersion(c).next((w=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));g.push(S)}return Z.waitFor(g).next((()=>d.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,y,_))).next((()=>y))})).then((c=>(i.Ms=l,c)))}function uI(s,e,i){let r=qe(),l=qe();return i.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let d=Os();return i.forEach(((g,y)=>{const _=c.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(xe.min())?(e.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),d=d.insert(g,y)):ue(sg,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function cI(s,e){const i=Ie(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Gm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function hI(s,e){const i=Ie(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,e).next((c=>c?(l=c,Z.resolve(l)):i.Pi.allocateTargetId(r).next((d=>(l=new Tr(e,d,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(e,r.targetId)),r}))}async function Sm(s,e,i){const r=Ie(s),l=r.Ms.get(e),c=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!jo(d))throw d;ue(sg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function bv(s,e,i){const r=Ie(s);let l=xe.min(),c=qe();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,_,S){const w=Ie(y),A=w.xs.get(S);return A!==void 0?Z.resolve(w.Ms.get(A)):w.Pi.getTargetData(_,S)})(r,d,Fi(e)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,g.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,i?l:xe.min(),i?c:qe()))).next((g=>(fI(r,XR(e),g),{documents:g,Qs:c})))))}function fI(s,e,i){let r=s.Os.get(e)||xe.min();i.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class Tv{constructor(){this.activeTargetIds=nC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dI{constructor(){this.Mo=new Tv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,r){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,r){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tv,Promise.resolve()}handleUserChange(e,i,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mI{Oo(e){}shutdown(){}}const Sv="ConnectivityMonitor";class Av{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Sv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hc=null;function Am(){return Hc===null?Hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hc++,"0x"+Hc.toString(16)}const Wd="RestConnection",gI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===hh?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,i,r,l,c){const d=Am(),g=this.zo(e,i.toUriEncodedString());ue(Wd,`Sending RPC '${e}' ${d}:`,g,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:_}=new URL(g),S=Oo(_);return this.Jo(e,g,y,r,S).then((w=>(ue(Wd,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw xo(Wd,`RPC '${e}' ${d} failed with error: `,w,"url: ",g,"request:",r),w}))}Ho(e,i,r,l,c,d){return this.Go(e,i,r,l,c)}jo(e,i,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,i){const r=gI[e];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}class yI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ln="WebChannelConnection";class _I extends pI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,r,l,c){const d=Am();return new Promise(((g,y)=>{const _=new BE;_.setWithCredentials(!0),_.listenOnce(qE.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Yc.NO_ERROR:const w=_.getResponseJson();ue(ln,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),g(w);break;case Yc.TIMEOUT:ue(ln,`RPC '${e}' ${d} timed out`),y(new le(J.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:const A=_.getStatus();if(ue(ln,`RPC '${e}' ${d} failed with status:`,A,"response text:",_.getResponseText()),A>0){let K=_.getResponseJson();Array.isArray(K)&&(K=K[0]);const W=K?.error;if(W&&W.status&&W.message){const ie=(function(ge){const Ee=ge.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Ee)>=0?Ee:J.UNKNOWN})(W.status);y(new le(ie,W.message))}else y(new le(J.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new le(J.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{ue(ln,`RPC '${e}' ${d} completed.`)}}));const S=JSON.stringify(l);ue(ln,`RPC '${e}' ${d} sending request:`,l),_.send(i,"POST",S,r,15)}))}T_(e,i,r){const l=Am(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=FE(),g=GE(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const S=c.join("");ue(ln,`Creating RPC '${e}' stream ${l}: ${S}`,y);const w=d.createWebChannel(S,y);this.I_(w);let A=!1,K=!1;const W=new yI({Yo:ee=>{K?ue(ln,`Not sending because RPC '${e}' stream ${l} is closed:`,ee):(A||(ue(ln,`Opening RPC '${e}' stream ${l} transport.`),w.open(),A=!0),ue(ln,`RPC '${e}' stream ${l} sending:`,ee),w.send(ee))},Zo:()=>w.close()}),ie=(ee,ge,Ee)=>{ee.listen(ge,(Se=>{try{Ee(Se)}catch(ke){setTimeout((()=>{throw ke}),0)}}))};return ie(w,Pl.EventType.OPEN,(()=>{K||(ue(ln,`RPC '${e}' stream ${l} transport opened.`),W.o_())})),ie(w,Pl.EventType.CLOSE,(()=>{K||(K=!0,ue(ln,`RPC '${e}' stream ${l} transport closed`),W.a_(),this.E_(w))})),ie(w,Pl.EventType.ERROR,(ee=>{K||(K=!0,xo(ln,`RPC '${e}' stream ${l} transport errored. Name:`,ee.name,"Message:",ee.message),W.a_(new le(J.UNAVAILABLE,"The operation could not be completed")))})),ie(w,Pl.EventType.MESSAGE,(ee=>{if(!K){const ge=ee.data[0];tt(!!ge,16349);const Ee=ge,Se=Ee?.error||Ee[0]?.error;if(Se){ue(ln,`RPC '${e}' stream ${l} received error:`,Se);const ke=Se.status;let Ye=(function(R){const I=zt[R];if(I!==void 0)return wb(I)})(ke),Me=Se.message;Ye===void 0&&(Ye=J.INTERNAL,Me="Unknown error status: "+ke+" with message "+Se.message),K=!0,W.a_(new le(Ye,Me)),w.close()}else ue(ln,`RPC '${e}' stream ${l} received:`,ge),W.u_(ge)}})),ie(g,HE.STAT_EVENT,(ee=>{ee.stat===fm.PROXY?ue(ln,`RPC '${e}' stream ${l} detected buffering proxy`):ee.stat===fm.NOPROXY&&ue(ln,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function em(){return typeof document<"u"?document:null}function Vh(s){return new TC(s,!0)}class Pb{constructor(e,i,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=i,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&ue("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const wv="PersistentStream";class zb{constructor(e,i,r,l,c,d,g,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pb(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===J.RESOURCE_EXHAUSTED?(Ds(i.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{e((()=>{const l=new le(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,i){const r=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(wv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(ue(wv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends zb{constructor(e,i,r,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,d),this.serializer=c}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=wC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return xe.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?Qi(d.readTime):xe.min()})(e);return this.listener.H_(i,r)}Y_(e){const i={};i.database=Tm(this.serializer),i.addTarget=(function(c,d){let g;const y=d.target;if(g=ym(y)?{documents:CC(c,y)}:{query:IC(c,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Cb(c,d.resumeToken);const _=vm(c,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(xe.min())>0){g.readTime=ph(c,d.snapshotVersion.toTimestamp());const _=vm(c,d.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,e);const r=DC(this.serializer,e);r&&(i.labels=r),this.q_(i)}Z_(e){const i={};i.database=Tm(this.serializer),i.removeTarget=e,this.q_(i)}}class EI extends zb{constructor(e,i,r,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=RC(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.na(r,i)}ra(){const e={};e.database=Tm(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((r=>xC(this.serializer,r)))};this.q_(i)}}class bI{}class TI extends bI{constructor(e,i,r,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Em(i,r),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(J.UNKNOWN,c.toString())}))}Ho(e,i,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(e,Em(i,r),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new le(J.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SI{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(i),this.aa=!1):ue("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _a="RemoteStore";class AI{constructor(e,i,r,l,c){this.localStore=e,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{Ta(this)&&(ue(_a,"Restarting streams for network reachability change."),await(async function(y){const _=Ie(y);_.Ea.add(4),await mu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await kh(_)})(this))}))})),this.Ra=new SI(r,l)}}async function kh(s){if(Ta(s))for(const e of s.da)await e(!0)}async function mu(s){for(const e of s.da)await e(!1)}function Bb(s,e){const i=Ie(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),lg(i)?og(i):zo(i).O_()&&ag(i,e))}function rg(s,e){const i=Ie(s),r=zo(i);i.Ia.delete(e),r.O_()&&qb(i,e),i.Ia.size===0&&(r.O_()?r.L_():Ta(i)&&i.Ra.set("Unknown"))}function ag(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}zo(s).Y_(e)}function qb(s,e){s.Va.Ue(e),zo(s).Z_(e)}function og(s){s.Va=new _C({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),zo(s).start(),s.Ra.ua()}function lg(s){return Ta(s)&&!zo(s).x_()&&s.Ia.size>0}function Ta(s){return Ie(s).Ea.size===0}function Hb(s){s.Va=void 0}async function wI(s){s.Ra.set("Online")}async function xI(s){s.Ia.forEach(((e,i)=>{ag(s,e)}))}async function RI(s,e){Hb(s),lg(s)?(s.Ra.ha(e),og(s)):s.Ra.set("Unknown")}async function CI(s,e,i){if(s.Ra.set("Online"),e instanceof Rb&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(s,e)}catch(r){ue(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _h(s,r)}else if(e instanceof Wc?s.Va.Ze(e):e instanceof xb?s.Va.st(e):s.Va.tt(e),!i.isEqual(xe.min()))try{const r=await jb(s.localStore);i.compareTo(r)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const S=c.Ia.get(_);S&&c.Ia.set(_,S.withResumeToken(y.resumeToken,d))}})),g.targetMismatches.forEach(((y,_)=>{const S=c.Ia.get(y);if(!S)return;c.Ia.set(y,S.withResumeToken(an.EMPTY_BYTE_STRING,S.snapshotVersion)),qb(c,y);const w=new Tr(S.target,y,_,S.sequenceNumber);ag(c,w)})),c.remoteSyncer.applyRemoteEvent(g)})(s,i)}catch(r){ue(_a,"Failed to raise snapshot:",r),await _h(s,r)}}async function _h(s,e,i){if(!jo(e))throw e;s.Ea.add(1),await mu(s),s.Ra.set("Offline"),i||(i=()=>jb(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ue(_a,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await kh(s)}))}function Gb(s,e){return e().catch((i=>_h(s,i,e)))}async function Lh(s){const e=Ie(s),i=Or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gm;for(;II(e);)try{const l=await cI(e.localStore,r);if(l===null){e.Ta.length===0&&i.L_();break}r=l.batchId,NI(e,l)}catch(l){await _h(e,l)}Fb(e)&&$b(e)}function II(s){return Ta(s)&&s.Ta.length<10}function NI(s,e){s.Ta.push(e);const i=Or(s);i.O_()&&i.X_&&i.ea(e.mutations)}function Fb(s){return Ta(s)&&!Or(s).x_()&&s.Ta.length>0}function $b(s){Or(s).start()}async function DI(s){Or(s).ra()}async function OI(s){const e=Or(s);for(const i of s.Ta)e.ea(i.mutations)}async function MI(s,e,i){const r=s.Ta.shift(),l=Zm.from(r,e,i);await Gb(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Lh(s)}async function VI(s,e){e&&Or(s).X_&&await(async function(r,l){if((function(d){return gC(d)&&d!==J.ABORTED})(l.code)){const c=r.Ta.shift();Or(r).B_(),await Gb(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Lh(r)}})(s,e),Fb(s)&&$b(s)}async function xv(s,e){const i=Ie(s);i.asyncQueue.verifyOperationInProgress(),ue(_a,"RemoteStore received new credentials");const r=Ta(i);i.Ea.add(3),await mu(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await kh(i)}async function kI(s,e){const i=Ie(s);e?(i.Ea.delete(2),await kh(i)):e||(i.Ea.add(2),await mu(i),i.Ra.set("Unknown"))}function zo(s){return s.ma||(s.ma=(function(i,r,l){const c=Ie(i);return c.sa(),new vI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:wI.bind(null,s),t_:xI.bind(null,s),r_:RI.bind(null,s),H_:CI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),lg(s)?og(s):s.Ra.set("Unknown")):(await s.ma.stop(),Hb(s))}))),s.ma}function Or(s){return s.fa||(s.fa=(function(i,r,l){const c=Ie(i);return c.sa(),new EI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:DI.bind(null,s),r_:VI.bind(null,s),ta:OI.bind(null,s),na:MI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Lh(s)):(await s.fa.stop(),s.Ta.length>0&&(ue(_a,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class ug{constructor(e,i,r,l,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,r,l,c){const d=Date.now()+r,g=new ug(e,i,d,l,c);return g.start(r),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(s,e){if(Ds("AsyncQueue",`${e}: ${s}`),jo(s))return new le(J.UNAVAILABLE,`${e}: ${s}`);throw s}class To{static emptySet(e){return new To(e.comparator)}constructor(e){this.comparator=e?(i,r)=>e(i,r)||me.comparator(i.key,r.key):(i,r)=>me.comparator(i.key,r.key),this.keyedMap=zl(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,r)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const r=new To;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=i,r}}class Rv{constructor(){this.ga=new bt(me.comparator)}track(e){const i=e.doc.key,r=this.ga.get(i);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(i,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(i):e.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,r)=>{e.push(r)})),e}}class Do{constructor(e,i,r,l,c,d,g,y,_){this.query=e,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,i,r,l,c){const d=[];return i.forEach((g=>{d.push({type:0,doc:g})})),new Do(e,i,To.emptySet(i),d,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,r=e.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}class LI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UI{constructor(){this.queries=Cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Ie(i),c=l.queries;l.queries=Cv(),c.forEach(((d,g)=>{for(const y of g.Sa)y.onError(r)}))})(this,new le(J.ABORTED,"Firestore shutting down"))}}function Cv(){return new Ea((s=>db(s)),Ih)}async function jI(s,e){const i=Ie(s);let r=3;const l=e.query;let c=i.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new LI,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=cg(d,`Initialization of query '${go(e.query)}' failed`);return void e.onError(g)}i.queries.set(l,c),c.Sa.push(e),e.va(i.onlineState),c.wa&&e.Fa(c.wa)&&hg(i)}async function PI(s,e){const i=Ie(s),r=e.query;let l=3;const c=i.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function zI(s,e){const i=Ie(s);let r=!1;for(const l of e){const c=l.query,d=i.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(r=!0);d.wa=l}}r&&hg(i)}function BI(s,e,i){const r=Ie(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(i);r.queries.delete(e)}function hg(s){s.Ca.forEach((e=>{e.next()}))}var wm,Iv;(Iv=wm||(wm={})).Ma="default",Iv.Cache="cache";class qI{constructor(e,i,r){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new Do(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Do.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wm.Cache}}class Qb{constructor(e){this.key=e}}class Kb{constructor(e){this.key=e}}class HI{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=mb(e),this.tu=new To(this.eu)}get nu(){return this.Ya}ru(e,i){const r=i?i.iu:new Rv,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((S,w)=>{const A=l.get(S),K=Nh(this.query,w)?w:null,W=!!A&&this.mutatedKeys.has(A.key),ie=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let ee=!1;A&&K?A.data.isEqual(K.data)?W!==ie&&(r.track({type:3,doc:K}),ee=!0):this.su(A,K)||(r.track({type:2,doc:K}),ee=!0,(y&&this.eu(K,y)>0||_&&this.eu(K,_)<0)&&(g=!0)):!A&&K?(r.track({type:0,doc:K}),ee=!0):A&&!K&&(r.track({type:1,doc:A}),ee=!0,(y||_)&&(g=!0)),ee&&(K?(d=d.add(K),c=ie?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),r.track({type:1,doc:S})}return{tu:d,iu:r,Cs:g,mutatedKeys:c}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((S,w)=>(function(K,W){const ie=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:ee})}};return ie(K)-ie(W)})(S.type,w.type)||this.eu(S.doc,w.doc))),this.ou(r),l=l??!1;const g=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new Do(this.query,e.tu,c,d,e.mutatedKeys,y===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return e.forEach((r=>{this.Xa.has(r)||i.push(new Kb(r))})),this.Xa.forEach((r=>{e.has(r)||i.push(new Qb(r))})),i}cu(e){this.Ya=e.Qs,this.Xa=qe();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Do.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fg="SyncEngine";class GI{constructor(e,i,r){this.query=e,this.targetId=i,this.view=r}}class FI{constructor(e){this.key=e,this.hu=!1}}class $I{constructor(e,i,r,l,c,d){this.localStore=e,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ea((g=>db(g)),Ih),this.Iu=new Map,this.Eu=new Set,this.du=new bt(me.comparator),this.Au=new Map,this.Ru=new tg,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QI(s,e,i=!0){const r=eT(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await Yb(r,e,i,!0),l}async function KI(s,e){const i=eT(s);await Yb(i,e,!0,!1)}async function Yb(s,e,i,r){const l=await hI(s.localStore,Fi(e)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,i);let g;return r&&(g=await YI(s,e,c,d==="current",l.resumeToken)),s.isPrimaryClient&&i&&Bb(s.remoteStore,l),g}async function YI(s,e,i,r,l){s.pu=(w,A,K)=>(async function(ie,ee,ge,Ee){let Se=ee.view.ru(ge);Se.Cs&&(Se=await bv(ie.localStore,ee.query,!1).then((({documents:N})=>ee.view.ru(N,Se))));const ke=Ee&&Ee.targetChanges.get(ee.targetId),Ye=Ee&&Ee.targetMismatches.get(ee.targetId)!=null,Me=ee.view.applyChanges(Se,ie.isPrimaryClient,ke,Ye);return Dv(ie,ee.targetId,Me.au),Me.snapshot})(s,w,A,K);const c=await bv(s.localStore,e,!0),d=new HI(e,c.Qs),g=d.ru(c.documents),y=du.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),_=d.applyChanges(g,s.isPrimaryClient,y);Dv(s,i,_.au);const S=new GI(e,i,d);return s.Tu.set(e,S),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),_.snapshot}async function XI(s,e,i){const r=Ie(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((d=>!Ih(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Sm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&rg(r.remoteStore,l.targetId),xm(r,l.targetId)})).catch(Uo)):(xm(r,l.targetId),await Sm(r.localStore,l.targetId,!0))}async function JI(s,e){const i=Ie(s),r=i.Tu.get(e),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),rg(i.remoteStore,r.targetId))}async function ZI(s,e,i){const r=rN(s);try{const l=await(function(d,g){const y=Ie(d),_=gt.now(),S=g.reduce(((K,W)=>K.add(W.key)),qe());let w,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(K=>{let W=Os(),ie=qe();return y.Ns.getEntries(K,S).next((ee=>{W=ee,W.forEach(((ge,Ee)=>{Ee.isValidDocument()||(ie=ie.add(ge))}))})).next((()=>y.localDocuments.getOverlayedDocuments(K,W))).next((ee=>{w=ee;const ge=[];for(const Ee of g){const Se=cC(Ee,w.get(Ee.key).overlayedDocument);Se!=null&&ge.push(new ba(Ee.key,Se,rb(Se.value.mapValue),$i.exists(!0)))}return y.mutationQueue.addMutationBatch(K,_,ge,g)})).next((ee=>{A=ee;const ge=ee.applyToLocalDocumentSet(w,ie);return y.documentOverlayCache.saveOverlays(K,ee.batchId,ge)}))})).then((()=>({batchId:A.batchId,changes:pb(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new bt(Be)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_})(r,l.batchId,i),await gu(r,l.changes),await Lh(r.remoteStore)}catch(l){const c=cg(l,"Failed to persist write");i.reject(c)}}async function Xb(s,e){const i=Ie(s);try{const r=await lI(i.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=i.Au.get(c);d&&(tt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?tt(d.hu,14607):l.removedDocuments.size>0&&(tt(d.hu,42227),d.hu=!1))})),await gu(i,r,e)}catch(r){await Uo(r)}}function Nv(s,e,i){const r=Ie(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((c,d)=>{const g=d.view.va(e);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const y=Ie(d);y.onlineState=g;let _=!1;y.queries.forEach(((S,w)=>{for(const A of w.Sa)A.va(g)&&(_=!0)})),_&&hg(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WI(s,e,i){const r=Ie(s);r.sharedClientState.updateQueryState(e,"rejected",i);const l=r.Au.get(e),c=l&&l.key;if(c){let d=new bt(me.comparator);d=d.insert(c,cn.newNoDocument(c,xe.min()));const g=qe().add(c),y=new Mh(xe.min(),new Map,new bt(Be),d,g);await Xb(r,y),r.du=r.du.remove(c),r.Au.delete(e),dg(r)}else await Sm(r.localStore,e,!1).then((()=>xm(r,e,i))).catch(Uo)}async function eN(s,e){const i=Ie(s),r=e.batch.batchId;try{const l=await oI(i.localStore,e);Zb(i,r,null),Jb(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await gu(i,l)}catch(l){await Uo(l)}}async function tN(s,e,i){const r=Ie(s);try{const l=await(function(d,g){const y=Ie(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return y.mutationQueue.lookupMutationBatch(_,g).next((w=>(tt(w!==null,37113),S=w.keys(),y.mutationQueue.removeMutationBatch(_,w)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,S,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>y.localDocuments.getDocuments(_,S)))}))})(r.localStore,e);Zb(r,e,i),Jb(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await gu(r,l)}catch(l){await Uo(l)}}function Jb(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function Zb(s,e,i){const r=Ie(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(i?c.reject(i):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function xm(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||Wb(s,r)}))}function Wb(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(rg(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),dg(s))}function Dv(s,e,i){for(const r of i)r instanceof Qb?(s.Ru.addReference(r.key,e),nN(s,r)):r instanceof Kb?(ue(fg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||Wb(s,r.key)):we(19791,{wu:r})}function nN(s,e){const i=e.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(ue(fg,"New document in limbo: "+i),s.Eu.add(r),dg(s))}function dg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new me(ft.fromString(e)),r=s.fu.next();s.Au.set(r,new FI(i)),s.du=s.du.insert(i,r),Bb(s.remoteStore,new Tr(Fi(Ym(i.path)),r,"TargetPurposeLimboResolution",xh.ce))}}async function gu(s,e,i){const r=Ie(s),l=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((g,y)=>{d.push(r.pu(y,e,i).then((_=>{if((_||i)&&r.isPrimaryClient){const S=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(_){l.push(_);const S=ig.As(y.targetId,_);c.push(S)}})))})),await Promise.all(d),r.Pu.H_(l),await(async function(y,_){const S=Ie(y);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>Z.forEach(_,(A=>Z.forEach(A.Es,(K=>S.persistence.referenceDelegate.addReference(w,A.targetId,K))).next((()=>Z.forEach(A.ds,(K=>S.persistence.referenceDelegate.removeReference(w,A.targetId,K)))))))))}catch(w){if(!jo(w))throw w;ue(sg,"Failed to update sequence numbers: "+w)}for(const w of _){const A=w.targetId;if(!w.fromCache){const K=S.Ms.get(A),W=K.snapshotVersion,ie=K.withLastLimboFreeSnapshotVersion(W);S.Ms=S.Ms.insert(A,ie)}}})(r.localStore,c))}async function iN(s,e){const i=Ie(s);if(!i.currentUser.isEqual(e)){ue(fg,"User change. New user:",e.toKey());const r=await Ub(i.localStore,e);i.currentUser=e,(function(c,d){c.mu.forEach((g=>{g.forEach((y=>{y.reject(new le(J.CANCELLED,d))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gu(i,r.Ls)}}function sN(s,e){const i=Ie(s),r=i.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let l=qe();const c=i.Iu.get(e);if(!c)return l;for(const d of c){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function eT(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.Pu.H_=zI.bind(null,e.eventManager),e.Pu.yu=BI.bind(null,e.eventManager),e}function rN(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tN.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return aI(this.persistence,new iI,e.initialUser,this.serializer)}Cu(e){return new Lb(ng.mi,this.serializer)}Du(e){return new dI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class aN extends vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){tt(this.persistence.referenceDelegate instanceof yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qC(r,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Lb((r=>yh.mi(r,i)),this.serializer)}}class Rm{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iN.bind(null,this.syncEngine),await kI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const i=Vh(e.databaseInfo.databaseId),r=(function(c){return new _I(c)})(e.databaseInfo);return(function(c,d,g,y){return new TI(c,d,g,y)})(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return(function(r,l,c,d,g){return new AI(r,l,c,d,g)})(this.localStore,this.datastore,e.asyncQueue,(i=>Nv(this.syncEngine,i,0)),(function(){return Av.v()?new Av:new mI})())}createSyncEngine(e,i){return(function(l,c,d,g,y,_,S){const w=new $I(l,c,d,g,y,_);return S&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Ie(i);ue(_a,"RemoteStore shutting down."),r.Ea.add(5),await mu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Rm.provider={build:()=>new Rm};class oN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}const Mr="FirestoreClient";class lN{constructor(e,i,r,l,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=un.UNAUTHENTICATED,this.clientId=Hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{ue(Mr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ue(Mr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=cg(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function tm(s,e){s.asyncQueue.verifyOperationInProgress(),ue(Mr,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await Ub(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Ov(s,e){s.asyncQueue.verifyOperationInProgress();const i=await uN(s);ue(Mr,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((r=>xv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>xv(e.remoteStore,l))),s._onlineComponents=e}async function uN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ue(Mr,"Using user provided OfflineComponentProvider");try{await tm(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===J.FAILED_PRECONDITION||l.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;xo("Error using user provided cache. Falling back to memory cache: "+i),await tm(s,new vh)}}else ue(Mr,"Using default OfflineComponentProvider"),await tm(s,new aN(void 0));return s._offlineComponents}async function tT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ue(Mr,"Using user provided OnlineComponentProvider"),await Ov(s,s._uninitializedComponentsProvider._online)):(ue(Mr,"Using default OnlineComponentProvider"),await Ov(s,new Rm))),s._onlineComponents}function cN(s){return tT(s).then((e=>e.syncEngine))}async function Mv(s){const e=await tT(s),i=e.eventManager;return i.onListen=QI.bind(null,e.syncEngine),i.onUnlisten=XI.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=KI.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=JI.bind(null,e.syncEngine),i}function nT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Vv=new Map;const iT="firestore.googleapis.com",kv=!0;class Lv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iT,this.ssl=kv}else this.host=e.host,this.ssl=e.ssl??kv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zC)throw new le(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uh{constructor(e,i,r,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dR;switch(r.type){case"firstParty":return new yR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=Vv.get(i);r&&(ue("ComponentProvider","Removing Datastore"),Vv.delete(i),r.terminate())})(this),Promise.resolve()}}function hN(s,e,i,r={}){s=bo(s,Uh);const l=Oo(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},g=`${e}:${i}`;l&&(Jv(`https://${g}`),Zv("Firestore",!0)),c.host!==iT&&c.host!==g&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:g,ssl:l,emulatorOptions:r};if(!ma(y,d)&&(s._setSettings(y),r.mockUserToken)){let _,S;if(typeof r.mockUserToken=="string")_=r.mockUserToken,S=un.MOCK_USER;else{_=gA(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new le(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new un(w)}s._authCredentials=new mR(new QE(_,S))}}class Vr{constructor(e,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vr(this.firestore,e,this._query)}}class Gt{constructor(e,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,r){if(hu(i,Gt._jsonSchema))return new Gt(e,r||null,new me(ft.fromString(i.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:qt("string",Gt._jsonSchemaVersion),referencePath:qt("string")};class Rr extends Vr{constructor(e,i,r){super(e,i,Ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new me(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function Uv(s,e,...i){if(s=Jt(s),KE("collection","path",e),s instanceof Uh){const r=ft.fromString(e,...i);return K_(r),new Rr(s,null,r)}{if(!(s instanceof Gt||s instanceof Rr))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ft.fromString(e,...i));return K_(r),new Rr(s.firestore,null,r)}}function sT(s,e,...i){if(s=Jt(s),arguments.length===1&&(e=Hm.newId()),KE("doc","path",e),s instanceof Uh){const r=ft.fromString(e,...i);return Q_(r),new Gt(s,null,new me(r))}{if(!(s instanceof Gt||s instanceof Rr))throw new le(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(ft.fromString(e,...i));return Q_(r),new Gt(s.firestore,s instanceof Rr?s.converter:null,new me(r))}}const jv="AsyncQueue";class Pv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pb(this,"async_queue_retry"),this._c=()=>{const r=em();r&&ue(jv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const i=em();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=em();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new fa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!jo(e))throw e;ue(jv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",zv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(e,i,r){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=ug.createAndSchedule(this,e,i,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&we(47125,{Pc:zv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function zv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function Bv(s){return(function(i,r){if(typeof i!="object"||i===null)return!1;const l=i;for(const c of r)if(c in l&&typeof l[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ru extends Uh{constructor(e,i,r,l){super(e,i,r,l),this.type="firestore",this._queue=new Pv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pv(e),this._firestoreClient=void 0,await e}}}function fN(s,e){const i=typeof s=="object"?s:nE(),r=typeof s=="string"?s:hh,l=Dm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=dA("firestore");c&&hN(l,...c)}return l}function rT(s){if(s._terminated)throw new le(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||dN(s),s._firestoreClient}function dN(s){const e=s._freezeSettings(),i=(function(l,c,d,g){return new VR(l,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,nT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new lN(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(an.fromBase64String(e))}catch(i){throw new le(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new ri(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,ri._jsonSchema))return ri.fromBase64String(e.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:qt("string",ri._jsonSchemaVersion),bytes:qt("string")};class mg{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new le(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._methodName=e}}class Ki{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new le(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new le(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(hu(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:qt("string",Ki._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};class Yi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Yi(e.vectorValues);throw new le(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:qt("string",Yi._jsonSchemaVersion),vectorValues:qt("object")};const mN=/^__.*__$/;class gN{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return this.fieldMask!==null?new ba(e,this.data,this.fieldMask,i,this.fieldTransforms):new fu(e,this.data,i,this.fieldTransforms)}}function aT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:s})}}class pg{constructor(e,i,r,l,c,d){this.settings=e,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.gc(e),r}yc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aT(this.Ac)&&mN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pN{constructor(e,i,r){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=r||Vh(e)}Cc(e,i,r,l=!1){return new pg({Ac:e,methodName:i,Dc:r,path:rn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oT(s){const e=s._freezeSettings(),i=Vh(s._databaseId);return new pN(s._databaseId,!!e.ignoreUndefinedProperties,i)}function yN(s,e,i,r,l,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,i,l);cT("Data must be an object, but it was:",d,r);const g=lT(r,d);let y,_;if(c.merge)y=new Ei(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const w of c.mergeFields){const A=vN(e,w,i);if(!d.contains(A))throw new le(J.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);bN(S,A)||S.push(A)}y=new Ei(S),_=d.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,_=d.fieldTransforms;return new gN(new si(g),y,_)}class yg extends gg{_toFieldTransform(e){return new aC(e.path,new nu)}isEqual(e){return e instanceof yg}}function _N(s,e,i,r=!1){return _g(i,s.Cc(r?4:3,e))}function _g(s,e){if(uT(s=Jt(s)))return cT("Unsupported field value:",e,s),lT(s,e);if(s instanceof gg)return(function(r,l){if(!aT(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let d=0;for(const g of r){let y=_g(g,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=Jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iC(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=gt.fromDate(r);return{timestampValue:ph(l.serializer,c)}}if(r instanceof gt){const c=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ph(l.serializer,c)}}if(r instanceof Ki)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ri)return{bytesValue:Cb(l.serializer,r._byteString)};if(r instanceof Gt){const c=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:eg(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Yi)return(function(d,g){return{mapValue:{fields:{[ib]:{stringValue:sb},[fh]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Xm(g.serializer,_)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${wh(r)}`)})(s,e)}function lT(s,e){const i={};return JE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(s,((r,l)=>{const c=_g(l,e.mc(r));c!=null&&(i[r]=c)})),{mapValue:{fields:i}}}function uT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof gt||s instanceof Ki||s instanceof ri||s instanceof Gt||s instanceof gg||s instanceof Yi)}function cT(s,e,i){if(!uT(i)||!YE(i)){const r=wh(i);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function vN(s,e,i){if((e=Jt(e))instanceof mg)return e._internalPath;if(typeof e=="string")return hT(s,e);throw Eh("Field path arguments must be of type string or ",s,!1,void 0,i)}const EN=new RegExp("[~\\*/\\[\\]]");function hT(s,e,i){if(e.search(EN)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new mg(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Eh(s,e,i,r,l){const c=r&&!r.isEmpty(),d=l!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${r}`),d&&(y+=` in document ${l}`),y+=")"),new le(J.INVALID_ARGUMENT,g+s+y)}function bN(s,e){return s.some((i=>i.isEqual(e)))}class fT{constructor(e,i,r,l,c){this._firestore=e,this._userDataWriter=i,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(vg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class TN extends fT{data(){return super.data()}}function vg(s,e){return typeof e=="string"?hT(s,e):e instanceof mg?e._internalPath:e._delegate._internalPath}function SN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new le(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class bg extends Eg{}function AN(s,e,...i){let r=[];e instanceof Eg&&r.push(e),r=r.concat(i),(function(c){const d=c.filter((y=>y instanceof Sg)).length,g=c.filter((y=>y instanceof Tg)).length;if(d>1||d>0&&g>0)throw new le(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const l of r)s=l._apply(s);return s}class Tg extends bg{constructor(e,i,r){super(),this._field=e,this._op=i,this._value=r,this.type="where"}static _create(e,i,r){return new Tg(e,i,r)}_apply(e){const i=this._parse(e);return dT(e._query,i),new Vr(e.firestore,e.converter,_m(e._query,i))}_parse(e){const i=oT(e.firestore);return(function(c,d,g,y,_,S,w){let A;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new le(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Hv(w,S);const W=[];for(const ie of w)W.push(qv(y,c,ie));A={arrayValue:{values:W}}}else A=qv(y,c,w)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Hv(w,S),A=_N(g,d,w,S==="in"||S==="not-in");return Bt.create(_,S,A)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class Sg extends Eg{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Sg(e,i)}_parse(e){const i=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return i.length===1?i[0]:Si.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(l,c){let d=l;const g=c.getFlattenedFilters();for(const y of g)dT(d,y),d=_m(d,y)})(e._query,i),new Vr(e.firestore,e.converter,_m(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends bg{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new Ag(e,i)}_apply(e){const i=(function(l,c,d){if(l.startAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new le(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tu(c,d)})(e._query,this._field,this._direction);return new Vr(e.firestore,e.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new Po(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,i))}}function wN(s,e="asc"){const i=e,r=vg("orderBy",s);return Ag._create(r,i)}class wg extends bg{constructor(e,i,r){super(),this.type=e,this._limit=i,this._limitType=r}static _create(e,i,r){return new wg(e,i,r)}_apply(e){return new Vr(e.firestore,e.converter,mh(e._query,this._limit,this._limitType))}}function xN(s){return wg._create("limit",s,"F")}function qv(s,e,i){if(typeof(i=Jt(i))=="string"){if(i==="")throw new le(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fb(e)&&i.indexOf("/")!==-1)throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const r=e.path.child(ft.fromString(i));if(!me.isDocumentKey(r))throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nv(s,new me(r))}if(i instanceof Gt)return nv(s,i._key);throw new le(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wh(i)}.`)}function Hv(s,e){if(!Array.isArray(s)||s.length===0)throw new le(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dT(s,e){const i=(function(l,c){for(const d of l)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class RN{convertValue(e,i="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const r={};return va(e,((l,c)=>{r[l]=this.convertValue(c,i)})),r}convertVectorValue(e){const i=e.fields?.[fh].arrayValue?.values?.map((r=>Dt(r.doubleValue)));return new Yi(i)}convertGeoPoint(e){return new Ki(Dt(e.latitude),Dt(e.longitude))}convertArray(e,i){return(e.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const r=Ch(e);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const i=Ir(e);return new gt(i.seconds,i.nanos)}convertDocumentKey(e,i){const r=ft.fromString(e);tt(Vb(r),9688,{name:e});const l=new Wl(r.get(1),r.get(3)),c=new me(r.popFirst(5));return l.isEqual(i)||Ds(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}function CN(s,e,i){let r;return r=s?s.toFirestore(e):e,r}class ql{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends fT{constructor(e,i,r,l,c,d){super(e,i,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const r=this._document.data.field(vg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=da._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:qt("string",da._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class eh extends da{data(e={}){return super.data(e)}}class So{constructor(e,i,r,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new ql(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((r=>{e.call(i,new eh(this._firestore,this._userDataWriter,r.key,r,new ql(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new le(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const y=new eh(l._firestore,l._userDataWriter,g.doc.key,g.doc,new ql(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const y=new eh(l._firestore,l._userDataWriter,g.doc.key,g.doc,new ql(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,S=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),S=d.indexOf(g.doc.key)),{type:IN(g.type),doc:y,oldIndex:_,newIndex:S}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=So._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:qt("string",So._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class mT extends RN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,i)}}function NN(s){return gT(bo(s.firestore,ru),[new Jm(s._key,$i.none())])}function DN(s,e){const i=bo(s.firestore,ru),r=sT(s),l=CN(s.converter,e);return gT(i,[yN(oT(s.firestore),"addDoc",r._key,l,s.converter!==null,{}).toMutation(r._key,$i.exists(!1))]).then((()=>r))}function ON(s,...e){s=Jt(s);let i={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Bv(e[r])||(i=e[r++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Bv(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,d,g;if(s instanceof Gt)d=bo(s.firestore,ru),g=Ym(s._key.path),c={next:y=>{e[r]&&e[r](MN(d,s,y))},error:e[r+1],complete:e[r+2]};else{const y=bo(s,Vr);d=bo(y.firestore,ru),g=y._query;const _=new mT(d);c={next:S=>{e[r]&&e[r](new So(d,_,y,S))},error:e[r+1],complete:e[r+2]},SN(s._query)}return(function(_,S,w,A){const K=new oN(A),W=new qI(S,K,w);return _.asyncQueue.enqueueAndForget((async()=>jI(await Mv(_),W))),()=>{K.Nu(),_.asyncQueue.enqueueAndForget((async()=>PI(await Mv(_),W)))}})(rT(d),g,l,c)}function gT(s,e){return(function(r,l){const c=new fa;return r.asyncQueue.enqueueAndForget((async()=>ZI(await cN(r),l,c))),c.promise})(rT(s),e)}function MN(s,e,i){const r=i.docs.get(e._key),l=new mT(s);return new da(s,l,e._key,r,new ql(i.hasPendingWrites,i.fromCache),e.converter)}function VN(){return new yg("serverTimestamp")}(function(e,i=!0){(function(l){Lo=l})(Mo),Ao(new ga("firestore",((r,{instanceIdentifier:l,options:c})=>{const d=r.getProvider("app").getImmediate(),g=new ru(new gR(r.getProvider("auth-internal")),new _R(d,r.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new le(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(_.options.projectId,S)})(d,l),d);return c={useFetchStreams:i,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),wr(H_,G_,e),wr(H_,G_,"esm2020")})();const kN={apiKey:"AIzaSyBeQemubnB8jBWLiPZob5HiDC4yubuxupI",authDomain:"learn-d8e71.firebaseapp.com",projectId:"learn-d8e71",storageBucket:"learn-d8e71.firebasestorage.app",messagingSenderId:"1098133970936",appId:"1:1098133970936:web:fed75c94fc73c36585000d",measurementId:"G-VH6H0XJKLP"},LN=typeof __firebase_config<"u"?JSON.parse(__firebase_config):kN,pT=tE(LN),qi=hR(pT),nm=fN(pT),Gc=typeof __app_id<"u"?__app_id:"default-app-id",fo=()=>E.jsx("style",{children:`
    @import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
    body, textarea, input, button { font-family: 'Be Vietnam Pro', sans-serif !important; }
    .diff-anim { animation: fadeIn 0.5s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.5); border-radius: 20px; }
    .score-circle { transition: stroke-dashoffset 1s ease-in-out; transform: rotate(-90deg); transform-origin: 50% 50%; }
    .tooltip-word { position: relative; z-index: 10; }
    .tooltip-word:hover { z-index: 999999; }
    .tooltip-content { z-index: 999999 !important; }
  `}),UN=["Startup cng ngh","Tr tu nhn to","Khoa hc v tr","Cng ngh Blockchain","Du lch bi","m thc ng ph","Li sng ti gin","Sc khe tinh thn","Email cng vic","K nng m phn","Ti chnh c nhn","Lnh o nhm","Review phim","Lch s th gii","Nhip nh ng ph","Bin i kh hu"],jN=(s,e)=>{const i=W=>W.replace(/[']/g,"'"),r=W=>i(W).replace(/([.,!?;:()])/g," $1 ").trim().split(/\s+/),l=W=>W.toLowerCase().replace(/[.,/#!$%^&*;:{}=\-_`~()?"']/g,""),c=r(s),d=r(e),g=c.length,y=d.length,_=Array(g+1).fill().map(()=>Array(y+1).fill(0));for(let W=1;W<=g;W++)for(let ie=1;ie<=y;ie++){const ee=l(c[W-1]),ge=l(d[ie-1]);c[W-1].toLowerCase()===d[ie-1].toLowerCase()||ee!==""&&ee===ge?_[W][ie]=_[W-1][ie-1]+1:_[W][ie]=Math.max(_[W-1][ie],_[W][ie-1])}let S=g,w=y;const A=[];for(;S>0&&w>0;){const W=l(c[S-1]),ie=l(d[w-1]);c[S-1].toLowerCase()===d[w-1].toLowerCase()||W!==""&&W===ie?(A.unshift({type:"same",value:c[S-1]}),S--,w--):_[S-1][w]>_[S][w-1]?(A.unshift({type:"remove",value:c[S-1]}),S--):(A.unshift({type:"add",value:d[w-1]}),w--)}for(;S>0;)A.unshift({type:"remove",value:c[S-1]}),S--;for(;w>0;)A.unshift({type:"add",value:d[w-1]}),w--;const K=[];for(let W=0;W<A.length;W++)A[W].type==="remove"&&A[W+1]?.type==="add"?(K.push({type:"replace",oldVal:A[W].value,newVal:A[W+1].value}),W++):K.push(A[W]);return K},xg="AIzaSyDqDfB3lsg11GFoIarvbL_B7H1EKkm4aKo",PN=async(s,e)=>{let i="";switch(e){case"short":i="Generate a SHORT story/essay (approx 5-8 sentences). Keep it concise.";break;case"medium":i="Generate a MEDIUM length story/essay (approx 12-15 sentences).";break;case"long":i="Generate a LONG, DETAILED story/essay (more than 20 sentences). Elaborate on details.";break;default:i="Generate a MEDIUM length story/essay (approx 10-15 sentences)."}const r=`
    You are an expert English tutor for Vietnamese students.
    Task: Create a translation lesson based on the topic: "${s}".
    CRITICAL REQUIREMENT: ${i}. Split content into logical sentences.
    Output Format: STRICT JSON ONLY. No markdown.
    JSON Structure: {
      "title": "Short catchy title in Vietnamese",
      "type": "Story/Article/Email/Essay",
      "sentences": [
        {
          "id": 1,
          "vietnamese_full": "Full Vietnamese sentence",
          "segments": [{"text": "VN word", "trans": "EN meaning"}],
          "acceptableAnswers": ["Full English sentence 1", "Full English sentence 2"],
          "grammar_hint": "Explain grammar/usage in Vietnamese",
          "structure": "Formula (S+V+O)",
          "example_en": "English example",
          "example_vi": "Vietnamese example",
          "vocabulary": [{"word": "Word", "meaning": "Meaning"}]
        }
      ]
    }
  `;try{const l=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${xg}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}],generationConfig:{responseMimeType:"application/json"}})});if(!l.ok)throw console.error("API Error:",l.status,await l.text()),new Error("API Call Failed");const c=await l.json();return JSON.parse(c.candidates[0].content.parts[0].text)}catch(l){return console.error("AI Generation Error:",l),null}},zN=async(s,e,i)=>{const r=`
        You are a strict translation judge for English learners.
        
        Vietnamese original: "${e}"
        User's English translation: "${s}"
        Correct answers: ${i.join(" OR ")}
        
        STRICT RULES:
        1. Check spelling FIRST - if there are obvious typos (like "daiy" instead of "daily"), mark as INCORRECT
        2. Only accept minor typos like: "teh""the" (adjacent keys), "recieve""receive" (common mistakes)
        3. Do NOT accept: completely wrong letters, missing letters that change meaning
        4. Check grammar - subject-verb agreement, tense, articles
        5. Check meaning accuracy - must convey the SAME meaning as Vietnamese
        
        Scoring logic:
        - If spelling errors are obvious/multiple: isCorrect = false
        - If meaning is wrong: isCorrect = false
        - If grammar is severely wrong: isCorrect = false
        - Only mark as correct if both meaning AND form are acceptable
        
        In feedback (Vietnamese):
        - List ALL errors specifically: "Li chnh t: 'daiy' phi l 'daily', 'toughts' phi l 'thoughts'"
        - Mention grammar errors if any
        - Explain meaning differences if wrong
        
        Return JSON ONLY: { "isCorrect": boolean, "feedback": "detailed Vietnamese explanation" }
    `;try{const c=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${xg}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}],generationConfig:{responseMimeType:"application/json"}})})).json();return JSON.parse(c.candidates[0].content.parts[0].text)}catch(l){return console.error("API Error:",l),{isCorrect:null,feedback:"Li kt ni API. Vui lng th li.",apiError:!0}}},BN=async(s,e)=>{let i="";switch(e){case"short":i="Generate 5-8 sentences for dictation practice.";break;case"medium":i="Generate 12-15 sentences for dictation practice.";break;case"long":i="Generate 20-25 sentences for dictation practice.";break;default:i="Generate 10-15 sentences for dictation practice."}const r=`
You are an English dictation teacher for Vietnamese students.
Topic: "${s}"
Task: Create an English dictation exercise. ${i}

Requirements:
- All sentences in ENGLISH only
- Natural, conversational English
- Varied difficulty (mix of easy/medium/hard)
- Clear, complete sentences
- Contextually connected to the topic

Output JSON ONLY:
{
  "title": "Catchy title in Vietnamese (VD: 'Nghe Chnh T: Cuc Sng Trn Sao Ha')",
  "type": "Dictation",
  "learningMode": "listen",
  "sentences": [
    {
      "id": 1,
      "english": "The full English sentence to dictate",
      "hint": "Optional Vietnamese hint about context",
      "difficulty": "easy|medium|hard"
    }
  ]
}
  `;try{const l=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${xg}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}],generationConfig:{responseMimeType:"application/json"}})});if(!l.ok)throw console.error("API Error:",l.status,await l.text()),new Error("API Call Failed");const c=await l.json();return JSON.parse(c.candidates[0].content.parts[0].text)}catch(l){return console.error("AI Generation Error:",l),null}},im=()=>[...UN].sort(()=>.5-Math.random()).slice(0,4);function qN(){const[s,e]=ve.useState(null),[i,r]=ve.useState(!0),[l,c]=ve.useState("login"),[d,g]=ve.useState(""),[y,_]=ve.useState("medium"),[S,w]=ve.useState("write"),[A,K]=ve.useState(!0),[W,ie]=ve.useState(()=>im()),[ee,ge]=ve.useState([]),[Ee,Se]=ve.useState("all"),[ke,Ye]=ve.useState("login"),[Me,N]=ve.useState(""),[R,I]=ve.useState(""),[V,D]=ve.useState(""),[L,x]=ve.useState(""),[ht,_t]=ve.useState(!1),[F,re]=ve.useState(!1),[ne,He]=ve.useState(null),[ye,M]=ve.useState(0),[Q,ae]=ve.useState(""),[te,pe]=ve.useState("idle"),[Re,Ve]=ve.useState(null),[vt,Qe]=ve.useState(""),[wi,Bn]=ve.useState(null),[es,oi]=ve.useState(!1),[xn,ts]=ve.useState(!1),[fn,Vs]=ve.useState([]),[ks,Et]=ve.useState([]),[Rt,Rn]=ve.useState(!1),[$t,Ls]=ve.useState(null),[Ot,ns]=ve.useState({mistakes:0,hints:0,fullAnswers:0}),[xi,is]=ve.useState({visible:!1,x:0,y:0,itemId:null}),[Ri,Sa]=ve.useState(!1),[qn,li]=ve.useState(!1),[kr,Cn]=ve.useState(1),[Qt,yn]=ve.useState(null),Ze=ve.useRef({mistakes:0,hints:0,fullAnswers:0}),ui=ve.useRef({hintUsed:!1,fullUsed:!1}),Ci=ve.useRef(null),Lr=ve.useRef(null),Hn=ve.useRef(null);ve.useRef(null),ve.useEffect(()=>{(async()=>{typeof __initial_auth_token<"u"&&__initial_auth_token&&await Fx(qi,__initial_auth_token),r(!1)})();const oe=e2(qi,fe=>{e(fe),fe&&fe.email&&fe.emailVerified||fe&&fe.isAnonymous?c("home"):fe&&fe.email&&!fe.emailVerified||c("login")});return()=>oe()},[]),ve.useEffect(()=>{if(s){console.log(" Setting up history listener for user:",s.uid);const q=AN(Uv(nm,"artifacts",Gc,"users",s.uid,"history"),wN("timestamp","desc"),xN(20)),oe=ON(q,fe=>{const be=fe.docs.map(_e=>({id:_e.id,..._e.data()}));console.log(" History updated:",be.length,"items"),ge(be)},fe=>{console.error(" Error fetching history:",fe)});return()=>oe()}else console.log(" No user, clearing history data"),ge([])},[s]),ve.useEffect(()=>{l==="learning"&&(Lr.current?.scrollIntoView({behavior:"smooth"}),Ci.current&&te!=="correct"&&te!=="checking"&&Ci.current.focus())},[te,es,xn,ye,l]);const ss=async q=>{q.preventDefault(),x("");try{const oe=await Kx(qi,Me,R);if(oe.user&&!oe.user.emailVerified){await Yd(qi),x("Email cha c xc thc. Vui lng kim tra hp th.");return}}catch(oe){oe.code==="auth/invalid-credential"||oe.code==="auth/user-not-found"||oe.code==="auth/wrong-password"?x("Email hoc mt khu khng chnh xc."):x("ng nhp tht bi. Vui lng th li.")}},Tt=async q=>{if(q.preventDefault(),x(""),re(!1),!V){x("Vui lng nhp tn hin th");return}try{const oe=await Qx(qi,Me,R);await Jx(oe.user,{displayName:V}),await Yx(oe.user),re(!0),await Yd(qi),Ye("login")}catch(oe){console.error(oe),oe.code==="auth/email-already-in-use"?x("Email ny  c s dng. Vui lng ng nhp."):oe.code==="auth/weak-password"?x("Mt khu qu yu."):x("ng k tht bi. Vui lng th li.")}},Gn=async q=>{if(q.preventDefault(),x(""),_t(!1),!Me){x("Vui lng nhp email.");return}try{await $x(qi,Me),_t(!0),x("")}catch{x("Li gi email. Vui lng th li sau.")}},Fn=async()=>{x("");try{const q=new xs;await E2(qi,q)}catch(q){x("ng nhp Google tht bi."),console.error(q)}},In=async()=>{x("");try{await zx(qi),c("home")}catch{x("Li ng nhp khch.")}},Bo=async()=>{await Yd(qi),c("login"),N(""),I(""),D(""),Ye("login"),re(!1)},Aa=async q=>{if(q.preventDefault(),!d.trim())return;c("generating"),Ze.current={mistakes:0,hints:0,fullAnswers:0},ui.current={hintUsed:!1,fullUsed:!1};const oe=S==="listen"?await BN(d,y):await PN(d,y);oe?.sentences?.length>0?(He(oe),M(0),Vs(new Array(oe.sentences.length).fill(!1)),Et(Array.from({length:oe.sentences.length},()=>[])),ae(""),pe("idle"),Ve(null),Qe(""),Bn(null),oi(!1),ts(!1),Rn(!1),c("learning")):c("error")},Nn=(q=null)=>{const oe=ne?.sentences?.length||1,fe=fn.filter(Boolean).length,be=q||Ze.current,_e=fe/oe*100,At=be.mistakes*3+be.fullAnswers*10;return Math.max(0,Math.round(_e-At))},rs=async()=>{if(console.log(" handleSaveResult called"),console.log("  - User:",s?`${s.uid} (${s.email||"anonymous"})`:"NULL"),console.log("  - Course:",ne?ne.title:"NULL"),!s||!ne){console.warn(" Cannot save history - User:",!!s,"Course:",!!ne);return}Sa(!0);const q=Nn(),oe=fn.filter(Boolean).length,fe=fn.length-oe,be={topic:ne.title,score:q,totalSentences:ne.sentences.length,completedCorrectly:oe,failedSentences:fe,timestamp:VN(),mistakes:Ze.current.mistakes,hints:Ze.current.hints,fullAnswers:Ze.current.fullAnswers,level:y,courseData:ne,completedStatus:fn,sentenceErrors:ks.reduce((_e,At,rt)=>(At&&At.length>0&&(_e[rt]=At),_e),{})};console.log(" Saving history doc:",{topic:be.topic,score:be.score,totalSentences:be.totalSentences,path:`artifacts/${Gc}/users/${s.uid}/history`});try{const _e=await DN(Uv(nm,"artifacts",Gc,"users",s.uid,"history"),be);console.log(" History saved successfully with ID:",_e.id),console.log("   Path:",_e.path)}catch(_e){console.error(" Error saving history:",_e),console.error("   Error code:",_e.code),console.error("   Error message:",_e.message)}finally{Sa(!1)}},wa=async q=>{if(q.preventDefault(),!Q.trim())return;const oe=ne.sentences[ye];pe("checking");const fe=oe.segments.map(Fe=>Fe.text).join(""),be=await zN(Q,fe,oe.acceptableAnswers);let _e=null,At=1/0,rt=null;if(oe.acceptableAnswers.forEach(Fe=>{const Vt=jN(Q,Fe),js=Vt.reduce((Ni,$n)=>{if($n.type==="same")return Ni;const Ps=zs=>zs.replace(/[.,/#!$%^&*;:{}=\-_`~()?"']/g,"");return $n.type==="replace"&&Ps($n.oldVal)===""&&Ps($n.newVal)===""||$n.type!=="replace"&&Ps($n.value)===""?Ni:Ni+1},0);js<At&&(At=js,_e=Fe,rt=Vt)}),be.apiError){pe("idle"),Qe(be.feedback||"Li kt ni API. Vui lng th li.");return}if(be.isCorrect){pe("correct");const Fe=[...fn];Fe[ye]=!0,Vs(Fe),Ve(rt),Bn(_e),be.feedback&&be.feedback.trim()?Qe(be.feedback):Qe(At===0?"Chnh xc tuyt i!":"Chnh xc!")}else{pe("incorrect"),Ve(rt),Bn(null),Qe(typeof be.feedback=="string"?be.feedback:"Cu tr li cha chnh xc."),Ze.current.mistakes+=1;const Fe=[...ks];Fe[ye]||(Fe[ye]=[]),Fe[ye].push({userAnswer:Q,correctAnswer:_e,feedback:typeof be.feedback=="string"?be.feedback:"Cha chnh xc.",timestamp:new Date().toISOString()}),Et(Fe)}},Ii=async()=>{await rs(),ns({...Ze.current}),c("summary")},Ur=()=>{ye<ne.sentences.length-1?(M(q=>q+1),ae(""),pe("idle"),Ve(null),Qe(""),Bn(null),oi(!1),ts(!1),ui.current={hintUsed:!1,fullUsed:!1}):Ii()},jr=()=>Rn(!0),as=()=>{Rn(!1),Ii()},ci=()=>Rn(!1),xa=(q,oe)=>{q.preventDefault(),is({visible:!0,x:q.clientX,y:q.clientY,itemId:oe})},Dn=async q=>{if(!(!s||!q))try{await NN(sT(nm,"artifacts",Gc,"users",s.uid,"history",q)),is({visible:!1,x:0,y:0,itemId:null})}catch(oe){console.error("Li xa lch s:",oe)}},On=()=>is({visible:!1,x:0,y:0,itemId:null}),St=()=>{oi(!0),ui.current.hintUsed||(Ze.current.hints+=1,ui.current.hintUsed=!0)},Mt=()=>{ts(!0),ui.current.fullUsed||(Ze.current.fullAnswers+=1,ui.current.fullUsed=!0)},dn=()=>K(!A),os=()=>{if(!ne||S!=="listen")return;const oe=ne.sentences[ye].english;if(qn){window.speechSynthesis.cancel(),li(!1);return}const fe=new SpeechSynthesisUtterance(oe);fe.lang="en-US",fe.rate=kr*.9,fe.onstart=()=>li(!0),fe.onend=()=>li(!1),fe.onerror=()=>li(!1),yn(fe),window.speechSynthesis.speak(fe)},qo=()=>{window.speechSynthesis.cancel(),li(!1),setTimeout(()=>os(),100)},Ra=q=>{Cn(q),qn&&(window.speechSynthesis.cancel(),li(!1))},Ca=()=>{c("home"),g(""),pe("idle"),Ve(null),Qe(""),Bn(null),ie(im())},z={bg:A?"bg-slate-900":"bg-gray-50",text:A?"text-slate-200":"text-slate-700",cardBg:A?"bg-slate-800":"bg-white",cardBorder:A?"border-slate-700":"border-gray-300",secondaryText:A?"text-slate-400":"text-slate-600",inputBg:A?"bg-slate-900":"bg-gray-50",inputBorder:A?"border-slate-700":"border-gray-300",inputText:A?"text-slate-200":"text-gray-900",highlightBg:A?"bg-indigo-900/50":"bg-indigo-100",highlightText:A?"text-indigo-200":"text-indigo-950",successBg:A?"bg-green-900/30":"bg-green-50",successText:A?"text-green-300":"text-green-800",errorBg:A?"bg-red-900/30":"bg-red-50",errorText:A?"text-red-300":"text-red-800"},Us=()=>Re?E.jsx("span",{className:"leading-relaxed break-words",children:Re.map((q,oe)=>{if(q.type==="same")return E.jsx("span",{className:"text-green-500 dark:text-green-400 mr-1.5",children:q.value},oe);if(q.type==="replace"){const fe=te==="correct"?"text-yellow-500 dark:text-yellow-400 mr-1.5 underline decoration-dotted":"text-red-400 dark:text-red-400 line-through decoration-red-500/50 decoration-2 cursor-help mr-1.5";return E.jsxs("span",{className:`relative group inline-block ${fe}`,children:[q.oldVal,te!=="correct"&&E.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-slate-900 border border-slate-700 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 shadow-xl pointer-events-none transform -translate-y-1 group-hover:translate-y-0 duration-200",children:["Sa thnh: ",E.jsx("span",{className:"font-bold text-green-400",children:q.newVal}),E.jsx("span",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-slate-900"})]})]},oe)}else{if(q.type==="remove")return te==="correct"?null:E.jsx("span",{className:"text-red-400 dark:text-red-400 line-through mr-1.5 decoration-2 opacity-80",children:q.value},oe);if(q.type==="add")return te==="correct"?null:E.jsx("span",{className:"inline-block w-5 h-5 border-b-2 border-dashed border-amber-500 mr-1.5 relative group align-middle",children:E.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-amber-900 border border-amber-700 text-amber-100 text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 shadow-xl",children:["Thiu: ",q.value]})},oe)}return null})}):Q;if(i)return E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:E.jsx(VS,{className:"w-8 h-8 animate-spin"})});if(l==="login")return E.jsxs("div",{className:`min-h-screen ${z.bg} flex flex-col items-center justify-center p-4 ${z.text} font-sans`,children:[E.jsx(fo,{}),E.jsx("button",{onClick:dn,className:`absolute top-4 right-4 p-2.5 rounded-full ${A?z.cardBg+" text-yellow-400 border "+z.cardBorder:"bg-gradient-to-br from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100 text-orange-600 border border-orange-200"}`,children:A?E.jsx(Lc,{className:"w-5 h-5"}):E.jsx(Uc,{className:"w-5 h-5"})}),E.jsxs("div",{className:`max-w-md w-full ${z.cardBg} p-8 rounded-3xl shadow-2xl border ${z.cardBorder}`,children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-500/30",children:E.jsx(Bd,{className:"w-10 h-10 text-white"})}),E.jsx("h1",{className:`text-3xl font-bold mb-2 ${z.text}`,children:"AI English Tutor"}),E.jsx("p",{className:z.secondaryText,children:"ng nhp  lu qu trnh hc tp"})]}),F&&E.jsxs("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/50 rounded-xl text-green-400 text-sm flex items-center gap-2 animate-in fade-in slide-in-from-top-2",children:[E.jsx(Pd,{className:"w-5 h-5 flex-shrink-0"}),E.jsx("span",{children:"Link xc thc  gi! Vui lng kim tra email."})]}),ke!=="forgot"&&E.jsxs("div",{className:`flex ${A?"bg-slate-700":"bg-gradient-to-r from-indigo-100/50 to-purple-100/50"} rounded-lg p-1 mb-6`,children:[E.jsx("button",{onClick:()=>{Ye("login"),x("")},className:`flex-1 py-2.5 rounded-md text-sm font-bold transition-all ${ke==="login"?A?"bg-slate-600 text-white shadow-md":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md":A?"text-slate-400 hover:text-white":"!bg-white text-indigo-600 hover:text-indigo-800"}`,children:"ng nhp"}),E.jsx("button",{onClick:()=>{Ye("register"),x("")},className:`flex-1 py-2.5 rounded-md text-sm font-bold transition-all ${ke==="register"?A?"bg-slate-600 text-white shadow-md":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md":A?"text-slate-400 hover:text-white":"!bg-white !text-indigo-600 hover:!text-indigo-800"}`,children:"ng k"})]}),ke==="forgot"?E.jsxs("form",{onSubmit:Gn,className:"space-y-4 animate-in fade-in",children:[E.jsxs("div",{className:"text-left",children:[E.jsx("label",{className:`text-xs font-bold ${A?"text-slate-500":"text-slate-600"} uppercase ml-1`,children:"Email ng k"}),E.jsxs("div",{className:"relative",children:[E.jsx(o_,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${A?"text-slate-500":"text-slate-400"}`}),E.jsx("input",{type:"email",value:Me,onChange:q=>N(q.target.value),placeholder:"name@example.com",className:`w-full p-4 pl-12 rounded-xl ${A?"bg-slate-900 border-slate-700 text-white":"bg-slate-100 border-slate-300 text-slate-900"} border focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none mt-1`,required:!0})]})]}),ht?E.jsxs("div",{className:"p-3 bg-green-500/20 border border-green-500/50 rounded-xl text-green-400 text-sm flex items-center gap-2",children:[E.jsx(Pd,{className:"w-4 h-4"}),"  gi link khi phc!"]}):L&&E.jsx("p",{className:"text-red-500 text-sm bg-red-500/10 p-2 rounded border border-red-500/20",children:L}),E.jsxs("button",{type:"submit",className:`w-full ${A?"bg-indigo-600 hover:bg-indigo-500":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700"} text-white font-bold py-4 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2`,children:[E.jsx(DS,{className:"w-5 h-5"})," Gi link khi phc"]}),E.jsx("button",{type:"button",onClick:()=>{Ye("login"),x(""),_t(!1)},className:`w-full ${A?"text-slate-400 hover:text-white":"text-indigo-600 hover:text-indigo-800"} text-sm underline mt-2 font-semibold`,children:"Quay li ng nhp"})]}):E.jsxs("form",{onSubmit:ke==="login"?ss:Tt,className:"space-y-4 animate-in fade-in",children:[ke==="register"&&E.jsxs("div",{className:"text-left",children:[E.jsx("label",{className:`text-xs font-bold ${A?"text-slate-500":"text-slate-600"} uppercase ml-1`,children:"Tn hin th"}),E.jsx("input",{type:"text",value:V,onChange:q=>D(q.target.value),placeholder:"VD: Minh T",className:`w-full p-4 rounded-xl ${A?"bg-slate-900 border-slate-700 text-white":"bg-slate-100 border-slate-300 text-slate-900"} border focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none mt-1`,required:!0})]}),E.jsxs("div",{className:"text-left",children:[E.jsx("label",{className:`text-xs font-bold ${A?"text-slate-500":"text-slate-600"} uppercase ml-1`,children:"Email"}),E.jsxs("div",{className:"relative",children:[E.jsx(o_,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${A?"text-slate-500":"text-slate-400"}`}),E.jsx("input",{type:"email",value:Me,onChange:q=>N(q.target.value),placeholder:"name@example.com",className:`w-full p-4 pl-12 rounded-xl ${A?"bg-slate-900 border-slate-700 text-white":"bg-slate-100 border-slate-300 text-slate-900"} border focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none mt-1`,required:!0})]})]}),E.jsxs("div",{className:"text-left",children:[E.jsx("label",{className:`text-xs font-bold ${A?"text-slate-500":"text-slate-600"} uppercase ml-1`,children:"Mt khu"}),E.jsxs("div",{className:"relative",children:[E.jsx(LS,{className:`absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 ${A?"text-slate-500":"text-slate-400"}`}),E.jsx("input",{type:"password",value:R,onChange:q=>I(q.target.value),placeholder:"",className:`w-full p-4 pl-12 rounded-xl ${A?"bg-slate-900 border-slate-700 text-white":"bg-slate-100 border-slate-300 text-slate-900"} border focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none mt-1`,required:!0})]})]}),L&&E.jsx("p",{className:"text-red-500 text-sm bg-red-500/10 p-2 rounded border border-red-500/20",children:L}),ke==="login"&&E.jsx("div",{className:"text-right",children:E.jsx("button",{type:"button",onClick:()=>{Ye("forgot"),x("")},className:`text-xs font-bold px-3 py-1.5 rounded-lg transition-all ${A?"text-indigo-400 hover:text-indigo-300":"bg-gradient-to-br from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 text-indigo-700 border border-indigo-200"}`,children:"Qun mt khu?"})}),E.jsx("button",{type:"submit",className:`w-full ${A?"bg-indigo-600 hover:bg-indigo-700":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700"} text-white font-bold py-4 rounded-xl transition-all shadow-lg active:scale-95`,children:ke==="login"?"ng nhp":"ng k ti khon"})]}),ke!=="forgot"&&E.jsxs("div",{className:"mt-6 flex flex-col gap-3 animate-in fade-in",children:[E.jsxs("button",{onClick:Fn,className:"w-full bg-gradient-to-r from-blue-500 to-red-500 hover:from-blue-600 hover:to-red-600 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg",children:[E.jsx("span",{className:"text-lg font-bold",children:"G"})," Tip tc vi Google"]}),E.jsx("button",{onClick:In,className:`w-full py-3 rounded-xl font-bold transition-all ${A?"bg-slate-700 text-slate-300 hover:bg-slate-600 hover:text-white border border-slate-600":"bg-gradient-to-br from-slate-50 to-gray-50 hover:from-slate-100 hover:to-gray-100 text-slate-700 border border-slate-300 hover:border-slate-400"}`,children:"Dng th khng cn ti khon"})]})]})]});if(l==="history")return E.jsxs("div",{className:`min-h-screen ${z.bg} p-4 transition-colors duration-300 font-sans`,onClick:On,children:[E.jsx(fo,{}),E.jsxs("header",{className:"max-w-4xl mx-auto flex items-center justify-between mb-8 pt-4",children:[E.jsxs("button",{onClick:()=>c("home"),className:`flex items-center gap-2 ${A?z.secondaryText+" hover:"+z.text:"text-indigo-600 hover:text-indigo-700"} font-medium transition-colors`,children:[E.jsx(Vc,{className:"w-5 h-5 rotate-180"})," Quay li"]}),E.jsxs("div",{className:"text-center",children:[E.jsx("h1",{className:`text-xl font-bold ${z.text}`,children:"Lch s hc tp"}),s&&E.jsxs("p",{className:"text-xs text-indigo-500 font-medium mt-1",children:[ee.length," bi hc"]})]}),E.jsx("button",{onClick:dn,className:`p-2 rounded-full ${A?z.cardBg+" text-yellow-400 border "+z.cardBorder:"bg-gradient-to-br from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100 text-orange-600 border border-orange-200"}`,children:A?E.jsx(Lc,{className:"w-5 h-5"}):E.jsx(Uc,{className:"w-5 h-5"})})]}),s&&ee.length>0&&E.jsx("div",{className:"max-w-4xl mx-auto flex justify-center gap-2 mb-6",children:[{id:"all",label:"Tt c",icon:null},{id:"write",label:"Dch vn",icon:E.jsx(zd,{className:"w-4 h-4"})},{id:"listen",label:"Nghe",icon:E.jsx(kc,{className:"w-4 h-4"})}].map(q=>E.jsxs("button",{onClick:()=>Se(q.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-bold text-sm transition-all ${Ee===q.id?A?"bg-indigo-600 text-white shadow-lg":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg":A?`${z.bg} ${z.secondaryText} border border-slate-700 hover:border-indigo-500`:"bg-white text-slate-700 border border-slate-300 hover:border-indigo-400"}`,children:[q.icon," ",q.label]},q.id))}),E.jsx("div",{className:"max-w-4xl mx-auto space-y-4 pb-10",children:s?ee.filter(q=>Ee==="all"||q.courseData&&q.courseData.learningMode===Ee||!q.courseData?.learningMode&&Ee==="write").length===0?E.jsxs("div",{className:`text-center py-20 ${z.secondaryText}`,children:[E.jsx("p",{className:"mb-2",children:"Khng c bi hc no."}),E.jsx("p",{className:"text-xs opacity-70",children:"Hon thnh mt bi hc  xem lch s ti y"})]}):ee.filter(q=>Ee==="all"||q.courseData&&q.courseData.learningMode===Ee||!q.courseData?.learningMode&&Ee==="write").map(q=>E.jsxs("div",{onClick:()=>Ls(q),onContextMenu:oe=>xa(oe,q.id),className:`${z.cardBg} p-5 rounded-2xl border ${z.cardBorder} flex items-center justify-between hover:scale-[1.01] transition-transform cursor-pointer group`,children:[E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[E.jsx("h3",{className:`font-bold ${z.text} text-lg group-hover:text-indigo-500 transition-colors`,children:q.topic}),E.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${q.courseData?.learningMode==="listen"?"bg-purple-500/20 text-purple-500 border border-purple-500/30":"bg-blue-500/20 text-blue-500 border border-blue-500/30"}`,children:[q.courseData?.learningMode==="listen"?E.jsx(kc,{className:"w-3 h-3"}):E.jsx(zd,{className:"w-3 h-3"}),q.courseData?.learningMode==="listen"?"Nghe":"Dch"]})]}),E.jsxs("div",{className:`flex items-center gap-4 text-xs ${z.secondaryText}`,children:[E.jsxs("span",{className:"flex items-center gap-1",children:[E.jsx(yS,{className:"w-3 h-3"})," ",q.timestamp&&typeof q.timestamp.toDate=="function"?q.timestamp.toDate().toLocaleDateString("vi-VN"):"Va xong"]}),E.jsx("span",{className:"flex items-center gap-1 bg-indigo-500/10 text-indigo-500 px-2 py-0.5 rounded uppercase font-bold",children:q.level||"medium"})]})]}),E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsxs("div",{className:"text-right hidden sm:block",children:[E.jsx("div",{className:`text-sm ${z.secondaryText}`,children:"im s"}),E.jsx("div",{className:`font-bold text-lg ${q.score>=80?"text-green-500":q.score>=50?"text-yellow-500":"text-red-500"}`,children:Math.round(q.score)})]}),E.jsx(vS,{className:`w-5 h-5 ${z.secondaryText}`})]})]},q.id)):E.jsxs("div",{className:`text-center py-20 ${z.secondaryText}`,children:[E.jsx("p",{className:"mb-4",children:"Vui lng ng nhp  xem lch s"}),E.jsx("button",{onClick:()=>c("login"),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg transition-all active:scale-95",children:"ng nhp"})]})}),xi.visible&&E.jsx("div",{className:`fixed z-50 ${z.cardBg} border-2 ${z.cardBorder} rounded-xl shadow-2xl overflow-hidden`,style:{top:xi.y,left:xi.x},onClick:q=>q.stopPropagation(),children:E.jsxs("button",{onClick:()=>Dn(xi.itemId),className:"px-5 py-3 text-red-500 hover:bg-red-500/10 flex items-center gap-3 text-sm font-bold whitespace-nowrap",children:[E.jsx(qd,{className:"w-4 h-4"}),"Xa bi hc ny"]})}),$t&&E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 animate-in fade-in backdrop-blur-sm",onClick:()=>Ls(null),children:E.jsxs("div",{className:`${z.cardBg} w-full max-w-3xl max-h-[85vh] rounded-3xl shadow-2xl overflow-hidden flex flex-col`,onClick:q=>q.stopPropagation(),children:[E.jsxs("div",{className:`p-6 border-b ${z.cardBorder} flex justify-between items-center bg-indigo-600`,children:[E.jsx("h2",{className:"text-xl font-bold text-white truncate pr-4",children:$t.topic}),E.jsx("button",{onClick:()=>Ls(null),className:"text-white/80 hover:text-white",children:E.jsx(qd,{className:"w-6 h-6"})})]}),E.jsx("div",{className:`flex-1 overflow-y-auto p-6 ${z.bg} custom-scrollbar`,children:$t.courseData&&$t.courseData.sentences?E.jsx("div",{className:"space-y-4",children:$t.courseData.sentences.map((q,oe)=>{const fe=$t.completedStatus&&$t.completedStatus[oe],be=$t.sentenceErrors&&$t.sentenceErrors[oe],_e=be&&Array.isArray(be)?be.length:be?1:0,At=fe||_e>0,rt=fe?"correct":At?"incorrect":"skipped";return E.jsx("div",{className:`${z.cardBg} p-4 rounded-xl border-2 transition-all ${rt==="correct"?"border-green-500/50":rt==="incorrect"?"border-red-500/50":"border-gray-500/50"}`,children:E.jsxs("div",{className:"flex gap-3",children:[E.jsx("span",{className:`flex-shrink-0 w-7 h-7 rounded-full flex items-center justify-center text-sm font-bold ${rt==="correct"?"bg-green-500 text-white":rt==="incorrect"?"bg-red-500 text-white":"bg-gray-500 text-white"}`,children:rt==="correct"?"":rt==="incorrect"?"":""}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[E.jsxs("span",{className:"text-xs font-bold text-indigo-400",children:["Cu ",oe+1]}),E.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-bold ${rt==="correct"?"bg-green-500/20 text-green-500":rt==="incorrect"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:rt==="correct"?"ng":rt==="incorrect"?"Sai":"Cha lm"}),_e>0&&E.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-orange-500/20 text-orange-500 font-bold",children:[_e," ln sai"]})]}),E.jsx("p",{className:`font-medium ${z.text} mb-2 text-base`,children:q.vietnamese_full||(q.segments?q.segments.map(Fe=>Fe.text).join(""):"")}),E.jsxs("div",{className:`${A?"bg-slate-800":"bg-slate-100"} p-3 rounded-lg mb-2`,children:[E.jsx("p",{className:"text-xs font-bold text-indigo-400 mb-1",children:"p n ng:"}),E.jsx("p",{className:"text-green-500 italic text-sm font-medium",children:q.acceptableAnswers[0]})]}),be&&_e>0&&E.jsx("div",{className:`${A?"bg-red-900/20":"bg-red-50"} p-3 rounded-lg border ${A?"border-red-800":"border-red-200"}`,children:Array.isArray(be)&&be.length>0?E.jsxs("div",{className:"space-y-3",children:[E.jsxs("p",{className:"text-xs font-bold text-red-400 mb-2",children:["Chi tit cc ln sai (",be.length," ln):"]}),be.map((Fe,Vt)=>E.jsxs("div",{className:`${A?"bg-red-900/30":"bg-red-100"} p-2 rounded border ${A?"border-red-800":"border-red-300"}`,children:[E.jsxs("p",{className:"text-xs font-bold text-orange-400 mb-1",children:["Ln ",Vt+1,":"]}),E.jsxs("p",{className:`${A?"text-red-300":"text-red-700"} italic text-sm mb-1`,children:['"',Fe.userAnswer||"Khng tr li",'"']}),Fe.feedback&&E.jsxs("p",{className:`${A?"text-orange-300":"text-orange-700"} text-xs`,children:[" ",Fe.feedback]})]},Vt))]}):be.userAnswer?E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"text-xs font-bold text-red-400 mb-1",children:"Cu tr li ca bn:"}),E.jsx("p",{className:`${A?"text-red-300":"text-red-700"} italic text-sm mb-2 font-medium`,children:be.userAnswer}),be.feedback&&E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"text-xs font-bold text-orange-400 mb-1",children:"Li sai:"}),E.jsx("p",{className:`${A?"text-orange-300":"text-orange-700"} text-xs`,children:be.feedback})]})]}):null}),rt==="skipped"&&E.jsx("div",{className:`${A?"bg-gray-800/50":"bg-gray-100"} p-3 rounded-lg border ${A?"border-gray-700":"border-gray-300"}`,children:E.jsx("p",{className:`text-xs italic ${z.secondaryText}`,children:"Cu ny cha c lm (b qua)"})})]})]})},oe)})}):E.jsx("p",{className:`${z.secondaryText} text-center py-10`,children:"Chi tit bi hc khng kh dng cho mc ny."})}),E.jsxs("div",{className:`p-4 border-t ${z.cardBorder} ${z.cardBg} flex justify-between items-center text-sm`,children:[E.jsxs("div",{className:"flex gap-4",children:[E.jsxs("span",{className:z.text,children:["im: ",E.jsx("strong",{className:$t.score>=50?"text-green-500":"text-red-500",children:Math.round($t.score)})]}),E.jsxs("span",{className:"text-green-500 font-bold",children:[" ",$t.completedCorrectly||0]}),E.jsxs("span",{className:"text-red-500 font-bold",children:[" ",$t.failedSentences||0]})]}),E.jsxs("span",{className:z.secondaryText,children:["Tng: ",$t.totalSentences," cu"]})]})]})})]});if(l==="generating")return E.jsxs("div",{className:`min-h-screen ${z.bg} flex flex-col items-center justify-center p-4`,children:[E.jsx(fo,{}),E.jsxs("div",{className:"text-center space-y-8",children:[E.jsxs("div",{className:"relative w-20 h-20 mx-auto",children:[E.jsx("div",{className:`absolute inset-0 border-4 ${A?"border-slate-700":"border-slate-200"} rounded-full`}),E.jsx("div",{className:"absolute inset-0 border-4 border-indigo-500 rounded-full border-t-transparent animate-spin"}),E.jsx(jd,{className:"absolute inset-0 m-auto text-indigo-500 w-8 h-8 animate-pulse"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("h2",{className:`text-xl font-bold ${z.text}`,children:"AI ang vit bi lun..."}),E.jsxs("p",{className:`${z.secondaryText}`,children:["Ch : ",E.jsxs("span",{className:"text-indigo-500",children:['"',d,'"']})]})]})]})]});if(l==="error")return E.jsxs("div",{className:`min-h-screen ${z.bg} flex flex-col items-center justify-center p-4`,children:[E.jsx(fo,{}),E.jsxs("div",{className:"text-center space-y-6",children:[E.jsx("div",{className:"w-20 h-20 mx-auto bg-red-500/10 rounded-full flex items-center justify-center",children:E.jsx(qd,{className:"w-10 h-10 text-red-500"})}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("h2",{className:`text-xl font-bold ${z.text}`,children:"Khng th to bi hc"}),E.jsx("p",{className:`${z.secondaryText}`,children:"C li xy ra khi to ni dung. Vui lng th li."})]}),E.jsx("button",{onClick:()=>c("home"),className:`px-6 py-3 ${A?"bg-indigo-600 hover:bg-indigo-500":"bg-indigo-600 hover:bg-indigo-700"} text-white font-bold rounded-xl transition-all shadow-lg active:scale-95`,children:"Quay li trang ch"})]})]});if(l==="summary"){const q=Nn(Ot);let oe="Cn c gng",fe="text-red-500";q>=90?(oe="Xut sc",fe="text-green-500"):q>=80?(oe="Gii",fe="text-blue-500"):q>=65?(oe="Kh",fe="text-yellow-500"):q>=50&&(oe="Trung bnh",fe="text-orange-500");const _e=2*Math.PI*50,At=_e-q/100*_e,rt=fn.filter(Boolean).length,Fe=(ne?.sentences?.length||0)-rt;return E.jsxs("div",{className:`min-h-screen ${z.bg} flex items-center justify-center p-4`,children:[E.jsx(fo,{}),Ri&&E.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-indigo-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 animate-in slide-in-from-top-2",children:[E.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),E.jsx("span",{className:"text-sm font-bold",children:"ang lu lch s..."})]}),E.jsxs("div",{className:`max-w-3xl w-full ${z.cardBg} rounded-3xl shadow-2xl p-8 md:p-12 border ${z.cardBorder}`,children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsxs("div",{className:"relative w-40 h-40 mx-auto mb-6",children:[E.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[E.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:A?"#374151":"#e5e7eb",strokeWidth:"10"}),E.jsx("circle",{className:"score-circle",cx:"60",cy:"60",r:"50",fill:"none",stroke:q>=80?"#10B981":q>=50?"#F59E0B":"#EF4444",strokeWidth:"10",strokeDasharray:_e,strokeDashoffset:At,strokeLinecap:"round"})]}),E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[E.jsx("span",{className:`text-4xl font-bold ${z.text}`,children:q}),E.jsx("span",{className:`text-xs uppercase font-bold ${z.secondaryText}`,children:"im"})]})]}),E.jsx("h1",{className:`text-3xl font-bold ${fe} mb-2`,children:oe}),E.jsxs("p",{className:`${z.secondaryText}`,children:["Ch : ",E.jsx("span",{className:"font-bold text-indigo-500",children:ne?.title})]})]}),E.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[E.jsxs("div",{className:`${A?"bg-slate-900":"bg-slate-50"} p-4 rounded-2xl text-center border ${z.cardBorder}`,children:[E.jsx(AS,{className:"w-6 h-6 text-red-500 mx-auto mb-2"}),E.jsx("div",{className:`text-2xl font-bold ${z.text}`,children:Ot.mistakes}),E.jsx("div",{className:`text-xs ${z.secondaryText}`,children:"Li sai (-2)"})]}),E.jsxs("div",{className:`${A?"bg-slate-900":"bg-slate-50"} p-4 rounded-2xl text-center border ${z.cardBorder}`,children:[E.jsx(h_,{className:"w-6 h-6 text-orange-500 mx-auto mb-2"}),E.jsx("div",{className:`text-2xl font-bold ${z.text}`,children:Fe}),E.jsx("div",{className:`text-xs ${z.secondaryText}`,children:"B qua (-10)"})]}),E.jsxs("div",{className:`${A?"bg-slate-900":"bg-slate-50"} p-4 rounded-2xl text-center border ${z.cardBorder}`,children:[E.jsx(a_,{className:"w-6 h-6 text-yellow-500 mx-auto mb-2"}),E.jsx("div",{className:`text-2xl font-bold ${z.text}`,children:Ot.hints}),E.jsx("div",{className:`text-xs ${z.secondaryText}`,children:"Gi  (0)"})]}),E.jsxs("div",{className:`${A?"bg-slate-900":"bg-slate-50"} p-4 rounded-2xl text-center border ${z.cardBorder}`,children:[E.jsx(fS,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),E.jsx("div",{className:`text-2xl font-bold ${z.text}`,children:Ot.fullAnswers}),E.jsx("div",{className:`text-xs ${z.secondaryText}`,children:"p n (-15)"})]})]}),E.jsxs("div",{className:`${A?"bg-slate-900":"bg-slate-50"} p-6 rounded-2xl text-left mb-8 border ${z.cardBorder} max-h-60 overflow-y-auto custom-scrollbar`,children:[E.jsx("h4",{className:`text-xs font-bold ${z.secondaryText} uppercase mb-2`,children:"on vn hon chnh"}),E.jsx("p",{className:`${z.text} text-base leading-relaxed`,children:ne?.sentences.map(Vt=>Vt.acceptableAnswers[0]).join(" ")})]}),E.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[E.jsxs("button",{onClick:Ca,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95",children:[E.jsx(u_,{className:"w-5 h-5"})," Bi hc mi"]}),E.jsxs("button",{onClick:()=>c("history"),className:`${A?"bg-slate-600 hover:bg-slate-700":"bg-slate-500 hover:bg-slate-600"} text-white font-bold py-3 px-8 rounded-xl flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95`,children:[E.jsx(s_,{className:"w-5 h-5"})," Xem lch s"]})]})]})]})}return E.jsxs("div",{className:`min-h-screen ${z.bg} ${z.text} ${l==="learning"?"p-2 md:p-3":"p-4 md:p-6"} flex flex-col font-medium transition-colors duration-300 font-sans`,children:[E.jsx(fo,{}),Rt&&E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-in fade-in",children:E.jsxs("div",{className:`${z.cardBg} p-6 rounded-2xl shadow-2xl max-w-sm w-full border ${z.cardBorder}`,children:[E.jsx("h3",{className:`text-lg font-bold ${z.text} mb-2`,children:"Kt thc sm?"}),E.jsx("p",{className:`${z.secondaryText} mb-6 text-sm`,children:"Bn c chc mun dng? Cc cu cha hon thnh s b tnh l b qua v tr im."}),E.jsxs("div",{className:"flex gap-3 justify-end",children:[E.jsx("button",{onClick:ci,className:`px-4 py-2 rounded-xl text-sm font-bold ${z.secondaryText} hover:${z.bg}`,children:"Hy"}),E.jsx("button",{onClick:as,className:"px-4 py-2 rounded-xl text-sm font-bold bg-red-500 hover:bg-red-600 text-white",children:"Kt thc ngay"})]})]})}),l==="home"&&E.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center max-w-2xl mx-auto w-full animate-in fade-in slide-in-from-bottom-8",children:[E.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-bold text-lg shadow-lg cursor-pointer hover:scale-105 transition-transform",onClick:()=>c("history"),children:s?.displayName?.charAt(0)||E.jsx(iA,{className:"w-5 h-5"})}),E.jsxs("div",{className:"hidden md:block",children:[E.jsx("p",{className:`text-xs font-bold ${z.secondaryText}`,children:"Xin cho,"}),E.jsx("p",{className:`font-bold ${z.text}`,children:s?.displayName||"Hc vin"})]})]}),E.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[E.jsx("button",{onClick:()=>c("history"),className:`p-2.5 rounded-full ${A?z.cardBg+" "+z.secondaryText+" hover:"+z.text:"bg-gradient-to-br from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 text-indigo-600"} border ${A?z.cardBorder:"border-indigo-200"}`,title:"Lch s",children:E.jsx(s_,{className:"w-5 h-5"})}),E.jsx("button",{onClick:dn,className:`p-2.5 rounded-full ${A?z.cardBg+" text-yellow-400 border "+z.cardBorder:"bg-gradient-to-br from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100 text-orange-600 border border-orange-200"}`,children:A?E.jsx(Lc,{className:"w-5 h-5"}):E.jsx(Uc,{className:"w-5 h-5"})}),E.jsx("button",{onClick:Bo,className:`p-2.5 rounded-full ${A?z.cardBg+" text-red-500 hover:bg-red-500/10":"bg-gradient-to-br from-rose-50 to-red-50 hover:from-rose-100 hover:to-red-100 text-rose-600"} border ${A?z.cardBorder:"border-rose-200"}`,title:"ng xut",children:E.jsx(jS,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"space-y-4 text-center mb-8 mt-12",children:[E.jsx("div",{className:`inline-flex items-center justify-center p-4 ${z.cardBg} rounded-full shadow-xl mb-2`,children:E.jsx(Bd,{className:"w-12 h-12 text-indigo-500"})}),E.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold ${A?"text-white":"text-slate-900"} tracking-tight`,children:"AI English Tutor"}),E.jsx("p",{className:`text-base md:text-lg ${z.secondaryText}`,children:"Luyn dch thc t. Chm im & sa li thng minh."})]}),E.jsxs("div",{className:`${z.cardBg} p-5 rounded-3xl shadow-2xl border ${z.cardBorder} w-full transition-all`,children:[E.jsx("div",{className:"flex justify-center gap-2 mb-4",children:[{id:"write",label:"Dch Vn",icon:E.jsx(zd,{className:"w-4 h-4"})},{id:"listen",label:"Nghe Chnh T",icon:E.jsx(kc,{className:"w-4 h-4"})}].map(q=>E.jsxs("button",{onClick:()=>w(q.id),className:`flex items-center gap-2 px-5 py-3 text-sm font-bold rounded-xl border-2 transition-all ${S===q.id?A?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/30":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-transparent shadow-lg":A?`${z.bg} ${z.secondaryText} border-slate-700 hover:border-indigo-500`:"bg-gradient-to-br from-slate-50 to-gray-50 text-slate-700 border-slate-300 hover:border-indigo-400 hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-600"}`,children:[q.icon," ",q.label]},q.id))}),E.jsx("div",{className:"flex justify-center gap-2 mb-5",children:[{id:"short",label:"Ngn"},{id:"medium",label:"Va"},{id:"long",label:"Di"}].map(q=>E.jsx("button",{onClick:()=>_(q.id),className:`px-4 py-2 text-xs font-bold rounded-xl border-2 transition-all ${y===q.id?A?"bg-indigo-600 text-white border-indigo-600":"bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-transparent":A?`${z.bg} ${z.secondaryText} border-slate-700 hover:border-indigo-500`:"bg-gradient-to-br from-slate-50 to-gray-50 text-slate-700 border-slate-300 hover:border-indigo-400 hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-600"}`,children:q.label},q.id))}),E.jsxs("form",{onSubmit:Aa,className:"relative flex items-center",children:[E.jsx("div",{className:"pl-4 text-indigo-400",children:E.jsx(jd,{className:"w-6 h-6"})}),E.jsx("input",{ref:Hn,type:"text",value:d,onChange:q=>g(q.target.value),placeholder:"Nhp ch  (VD: Cuc sng  Sao Ha)...",className:`w-full p-4 text-base bg-transparent outline-none ${z.inputText} placeholder-slate-400 font-medium`}),E.jsx("button",{type:"submit",disabled:!d.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-xl m-1 transition-all shadow-md active:scale-95",children:E.jsx(Vc,{className:"w-6 h-6"})})]})]}),E.jsxs("div",{className:`flex flex-wrap justify-center gap-2 text-sm ${z.secondaryText} mt-6`,children:[W.map(q=>E.jsx("button",{onClick:()=>g(q),className:`${A?z.cardBg+" border-2 border-slate-700 hover:border-indigo-500":"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 hover:border-indigo-400 hover:from-indigo-100 hover:to-purple-100"} px-4 py-2 rounded-full ${A?"hover:text-indigo-400":"hover:text-indigo-700"} transition-all shadow-sm hover:shadow-md ${A?"text-slate-300":"text-slate-700"} font-medium`,children:q},q)),E.jsx("button",{onClick:()=>ie(im()),className:`p-2 rounded-full transition-all ${A?"hover:bg-indigo-500/10 text-indigo-400":"bg-gradient-to-br from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 text-indigo-600 border border-indigo-200"}`,children:E.jsx($S,{className:"w-4 h-4"})})]})]}),l==="learning"&&ne&&E.jsxs(E.Fragment,{children:[E.jsxs("header",{className:"w-full mb-4 flex items-center justify-between px-1 lg:px-4",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>c("home"),className:`p-2 rounded-full transition-all ${A?"hover:bg-slate-800 text-slate-400":"bg-gradient-to-br from-indigo-50 to-purple-50 hover:from-indigo-100 hover:to-purple-100 text-indigo-600 border border-indigo-200"}`,children:E.jsx(Vc,{className:"w-6 h-6 rotate-180"})}),E.jsxs("div",{children:[E.jsx("h1",{className:`text-xl font-bold ${z.text} flex items-center gap-3`,children:ne.title}),E.jsx("span",{className:"text-xs font-bold bg-indigo-500/10 text-indigo-500 px-3 py-1 rounded-full uppercase border border-indigo-500/20",children:ne.type})]})]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs("button",{onClick:jr,className:`hidden md:flex items-center gap-1 px-3 py-1.5 rounded-lg ${A?"bg-slate-500/10 hover:bg-slate-500/20 text-slate-400":"bg-rose-50 hover:bg-rose-100 text-rose-600 border border-rose-200"} text-xs font-bold transition-colors`,children:[E.jsx(h_,{className:"w-4 h-4"})," Kt thc"]}),E.jsx("button",{onClick:dn,className:`p-2 rounded-full ${A?z.cardBg+" text-yellow-400 shadow-sm border "+z.cardBorder:"bg-gradient-to-br from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100 text-orange-600 shadow-sm border border-orange-200"}`,children:A?E.jsx(Lc,{className:"w-5 h-5"}):E.jsx(Uc,{className:"w-5 h-5"})}),E.jsxs("div",{className:`hidden md:flex ${z.cardBg} px-4 py-2 rounded-xl shadow-sm border ${z.cardBorder} text-sm font-bold`,children:[E.jsx("span",{className:`${z.secondaryText} mr-2`,children:"TIN "})," ",E.jsxs("span",{className:"text-indigo-500",children:[ye+1," ",E.jsx("span",{className:z.secondaryText,children:"/"})," ",ne.sentences.length]})]})]})]}),E.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-12 gap-4 flex-1 min-h-0 px-1 lg:px-4",children:[ne.learningMode==="listen"?E.jsx("div",{className:`lg:col-span-8 ${z.cardBg} p-8 rounded-3xl ${A?"shadow-xl":"shadow-2xl shadow-slate-300/50"} border-2 ${z.cardBorder} overflow-y-auto h-[30vh] lg:h-auto flex flex-col items-center justify-center`,children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:`w-40 h-40 mx-auto mb-8 rounded-full flex items-center justify-center transition-all ${qn?"bg-gradient-to-br from-indigo-500 to-purple-600 shadow-2xl shadow-indigo-500/50 scale-105":A?"bg-gradient-to-br from-indigo-600 to-purple-700":"bg-gradient-to-br from-indigo-500 to-purple-600"}`,children:qn?E.jsx(l_,{className:"w-20 h-20 text-white animate-pulse"}):E.jsx(kc,{className:"w-20 h-20 text-white"})}),E.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[E.jsxs("button",{onClick:os,className:`flex items-center gap-2 px-6 py-4 rounded-xl font-bold text-white shadow-lg transition-all active:scale-95 ${qn?"bg-red-500 hover:bg-red-600":"bg-indigo-600 hover:bg-indigo-700"}`,children:[qn?E.jsx(l_,{className:"w-6 h-6"}):E.jsx(GS,{className:"w-6 h-6"}),qn?"Tm dng":"Nghe"]}),E.jsxs("button",{onClick:qo,className:"flex items-center gap-2 px-6 py-4 rounded-xl font-bold bg-purple-600 hover:bg-purple-700 text-white shadow-lg transition-all active:scale-95",children:[E.jsx(u_,{className:"w-6 h-6"}),"Nghe li"]})]}),E.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[E.jsx("span",{className:`text-sm font-bold ${z.secondaryText}`,children:"Tc :"}),[.5,.75,1,1.25,1.5].map(q=>E.jsxs("button",{onClick:()=>Ra(q),className:`px-3 py-2 text-sm font-bold rounded-lg transition-all ${kr===q?"bg-indigo-600 text-white shadow-md":A?`${z.bg} ${z.secondaryText} hover:bg-slate-700`:"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[q,"x"]},q))]}),E.jsxs("p",{className:`text-base ${z.text} mb-2`,children:["Cu ",E.jsx("span",{className:"font-bold text-indigo-500",children:ye+1})," / ",ne.sentences.length]}),ne.sentences[ye].hint&&E.jsx("div",{className:`mt-6 p-4 rounded-xl ${A?"bg-amber-900/20 border border-amber-900/30":"bg-amber-50 border border-amber-200"}`,children:E.jsxs("p",{className:`text-sm ${A?"text-amber-400":"text-amber-700"} flex items-center gap-2`,children:[E.jsx(r_,{className:"w-4 h-4"}),E.jsx("span",{className:"font-bold",children:"Gi :"})," ",ne.sentences[ye].hint]})})]})}):E.jsx("div",{className:`lg:col-span-8 ${z.cardBg} p-6 pt-16 rounded-3xl ${A?"shadow-xl":"shadow-2xl shadow-slate-300/50"} border-2 ${z.cardBorder} overflow-y-auto h-[30vh] lg:h-auto custom-scrollbar`,children:E.jsx("div",{className:`text-base md:text-lg leading-[3] ${z.text} font-sans relative`,style:{zIndex:1},children:ne.sentences.map((q,oe)=>{const fe=fn[oe],be=oe===ye;if(fe)return E.jsxs("span",{className:"text-green-500 dark:text-green-400 transition-all duration-500 mr-1",children:[q.acceptableAnswers[0]," "]},q.id);let _e="transition-all duration-300 inline mr-1 rounded px-1 ";return be?_e+=`${z.highlightBg} ${z.highlightText} shadow-[inset_0_0_0_2px_rgba(99,102,241,0.5)] py-1 `:_e+=A?"text-slate-500 ":"text-gray-800 ",E.jsx("span",{className:_e,children:q.segments.map((At,rt)=>{const Fe=q.segments[rt+1],Vt=Fe&&!/^[.,!?;:)]/.test(Fe.text);return E.jsxs(J1.Fragment,{children:[E.jsxs("span",{className:"tooltip-word group relative cursor-help inline-block hover:text-indigo-500 transition-colors",children:[At.text,E.jsx("span",{className:`tooltip-content invisible group-hover:visible absolute left-1/2 -translate-x-1/2 bottom-full mb-1 px-3 py-2 ${A?"bg-slate-800 text-white border-2 border-slate-600":"bg-slate-900 text-white border-2 border-slate-700"} text-sm font-medium rounded-lg shadow-2xl whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200`,children:At.trans})]}),Vt&&" "]},rt)})},q.id)})})}),E.jsxs("div",{className:"lg:col-span-4 flex flex-col h-full gap-4 min-h-[500px]",children:[E.jsxs("div",{className:`flex-1 ${z.cardBg} rounded-3xl ${A?"shadow-xl":"shadow-2xl shadow-slate-300/50"} border-2 ${z.cardBorder} flex flex-col overflow-hidden relative`,children:[E.jsxs("div",{className:`flex-1 p-6 overflow-y-auto ${z.bg} space-y-6 custom-scrollbar`,children:[E.jsxs("div",{className:"flex gap-4 animate-in slide-in-from-left-4",children:[E.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:E.jsx(jd,{className:"w-6 h-6 text-indigo-600"})}),E.jsxs("div",{className:`${z.cardBg} p-5 rounded-3xl rounded-tl-none shadow-sm border ${z.cardBorder} w-full`,children:[E.jsx("p",{className:`text-xs font-bold ${z.secondaryText} uppercase mb-2`,children:ne.learningMode==="listen"?"Nghe v g li":"Dch cu ny"}),ne.learningMode==="listen"?E.jsx("div",{className:`text-lg p-4 rounded-xl border-2 italic font-bold ${A?"bg-purple-900/60 text-purple-100 border-purple-700":"bg-purple-100 text-purple-950 border-purple-300"}`,children:" Nghe audio v g chnh xc nhng g bn nghe c"}):E.jsxs("div",{className:`text-lg p-4 rounded-xl border-2 italic font-bold ${A?"bg-indigo-900/60 text-indigo-100 border-indigo-700":"bg-indigo-100 text-indigo-950 border-indigo-300"}`,children:['"',ne.sentences[ye].segments.map((q,oe)=>{const fe=ne.sentences[ye].segments[oe+1],be=fe&&!/^[.,!?;:)]/.test(fe.text)?" ":"";return q.text+be}),'"']})]})]}),te!=="idle"&&te!=="checking"&&E.jsxs("div",{className:"flex gap-4 flex-row-reverse animate-in slide-in-from-right-4",children:[E.jsx("div",{className:`w-10 h-10 ${A?"bg-slate-700":"bg-gradient-to-br from-indigo-100 to-purple-100"} rounded-2xl flex items-center justify-center flex-shrink-0`,children:E.jsx("div",{className:`w-6 h-6 rounded-full ${A?"bg-slate-500":"bg-gradient-to-br from-indigo-400 to-purple-500"}`})}),E.jsx("div",{className:`p-5 rounded-3xl rounded-tr-none shadow-lg max-w-[85%] text-lg relative overflow-visible z-10 font-medium border-2 ${A?te==="correct"?"bg-slate-800 text-white border-green-500":"bg-slate-800 text-white border-red-500":te==="correct"?"bg-white text-slate-900 border-green-500":"bg-white text-slate-900 border-red-500"}`,children:Us()})]}),te==="correct"&&E.jsxs("div",{className:"flex gap-4 animate-in slide-in-from-left-4",children:[E.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:E.jsx(Pd,{className:"w-6 h-6 text-green-600"})}),E.jsxs("div",{className:`${z.successBg} p-5 rounded-3xl rounded-tl-none border ${A?"border-green-800":"border-green-200"} w-full`,children:[E.jsx("p",{className:`font-bold ${z.successText} text-lg mb-2`,children:"Tuyt vi!"}),vt&&E.jsx("p",{className:`text-sm ${z.successText} mb-3 italic`,children:String(vt)}),wi&&E.jsxs("div",{className:`mt-3 ${z.cardBg} p-3 rounded-xl border ${z.cardBorder}`,children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(xS,{className:"w-4 h-4 text-indigo-400"}),E.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase",children:"p n mu"})]}),E.jsx("p",{className:`${z.text} text-sm italic`,children:wi})]}),E.jsxs("button",{onClick:Ur,className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg active:scale-95 transition-all",children:["Cu tip theo ",E.jsx(Vc,{className:"w-5 h-5"})]})]})]}),te==="checking"&&E.jsxs("div",{className:"flex gap-4 animate-in slide-in-from-left-4",children:[E.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-2xl flex items-center justify-center flex-shrink-0 animate-pulse",children:E.jsx(c_,{className:"w-6 h-6 text-indigo-600"})}),E.jsx("div",{className:`${z.cardBg} p-4 rounded-3xl rounded-tl-none border ${z.cardBorder} text-sm italic ${z.secondaryText}`,children:"AI ang kim tra ng ngha cu tr li ca bn..."})]}),te==="incorrect"&&E.jsxs("div",{className:"flex gap-4 animate-in slide-in-from-left-4",children:[E.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-2xl flex items-center justify-center flex-shrink-0",children:E.jsx(tA,{className:"w-6 h-6 text-red-600"})}),E.jsxs("div",{className:`${z.errorBg} p-5 rounded-3xl rounded-tl-none border ${A?"border-red-800":"border-red-200"} w-full`,children:[E.jsx("p",{className:`font-bold ${z.errorText} mb-3 text-lg`,children:"Cha chnh xc lm."}),E.jsxs("div",{className:`mb-3 ${z.cardBg} p-4 rounded-xl border ${A?"border-red-500/30":"border-red-200"}`,children:[E.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[E.jsx(c_,{className:"w-4 h-4 text-indigo-400"}),E.jsx("span",{className:"text-xs font-bold text-indigo-400 uppercase",children:"AI Phn tch li sai"})]}),E.jsx("p",{className:`${z.text} text-sm italic leading-relaxed`,children:String(vt||"Cu tr li cha st ngha. Hy kim tra t vng v ng php.")})]})]})]}),E.jsx("div",{ref:Lr})]}),E.jsx("div",{className:`p-4 md:p-6 ${z.cardBg} border-t ${z.cardBorder} z-20 transition-colors duration-300`,children:E.jsxs("form",{onSubmit:wa,className:"relative group",children:[E.jsx("textarea",{ref:Ci,value:Q,onChange:q=>ae(q.target.value),disabled:te==="correct"||te==="checking",onKeyDown:q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),te!=="correct"&&te!=="checking"&&wa(q))},placeholder:te==="correct"?"ang ch...":"Nhp cu dch...",className:`w-full p-4 pr-14 rounded-2xl ${z.inputBg} ${z.inputBorder} border-2 focus:border-indigo-500 outline-none resize-none text-base shadow-inner ${z.inputText}`,rows:"2"}),te!=="correct"&&te!=="checking"&&E.jsx("button",{type:"submit",disabled:!Q.trim(),className:"absolute right-3 top-1/2 -translate-y-1/2 p-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow-lg active:scale-95 disabled:opacity-50 transition-all",children:E.jsx(XS,{className:"w-5 h-5"})})]})})]}),te!=="correct"&&E.jsx("div",{className:`${z.cardBg} rounded-3xl shadow-lg border ${z.cardBorder} overflow-hidden flex-shrink-0 transition-all duration-300`,children:es?E.jsxs("div",{className:`p-5 ${A?"bg-amber-900/20":"bg-amber-50"} animate-in fade-in relative border-2 ${A?"border-amber-900/30":"border-amber-200"}`,children:[E.jsx("button",{onClick:()=>oi(!1),className:`absolute top-3 right-3 p-1.5 rounded-full transition-colors ${A?"bg-white/10 hover:bg-white/20 text-amber-400":"bg-amber-200/50 hover:bg-amber-300/70 text-amber-700"}`,title:"Thu gn",children:E.jsx(bS,{className:"w-4 h-4"})}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsxs("p",{className:"text-xs font-bold ${isDarkMode ? 'text-amber-400' : 'text-amber-600'} uppercase mb-2 flex items-center gap-2",children:[E.jsx(Bd,{className:"w-4 h-4"})," Gi  Ng php"]}),E.jsx("p",{className:`${z.text} text-sm mb-3 font-medium ${z.cardBg} p-3 rounded-xl border-2 ${A?"border-amber-900/30":"border-amber-300"}`,children:ne.sentences[ye].grammar_hint})]}),ne.sentences[ye].structure&&E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[E.jsxs("div",{children:[E.jsxs("p",{className:"text-xs font-bold ${isDarkMode ? 'text-amber-400' : 'text-amber-600'} uppercase mb-2 flex items-center gap-2",children:[E.jsx(r_,{className:"w-4 h-4"})," Cu trc"]}),E.jsx("div",{className:`${z.text} text-sm ${z.cardBg} p-2 rounded-lg border-2 ${A?"border-amber-900/30":"border-amber-300"} font-mono text-xs`,children:ne.sentences[ye].structure})]}),E.jsxs("div",{children:[E.jsxs("p",{className:"text-xs font-bold ${isDarkMode ? 'text-amber-400' : 'text-amber-600'} uppercase mb-2 flex items-center gap-2",children:[E.jsx(mS,{className:"w-4 h-4"})," V d"]}),E.jsxs("div",{className:`${z.text} text-sm ${z.cardBg} p-2 rounded-lg border-2 ${A?"border-amber-900/30":"border-amber-300"} italic`,children:[E.jsx("p",{className:"mb-1 text-indigo-400",children:ne.sentences[ye].example_en}),E.jsx("p",{className:"text-xs opacity-80",children:ne.sentences[ye].example_vi})]})]})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs font-bold ${isDarkMode ? 'text-amber-400' : 'text-amber-600'} uppercase mb-2",children:"T vng cn dng"}),E.jsx("div",{className:"flex flex-wrap gap-2",children:ne.sentences[ye].vocabulary.map((q,oe)=>E.jsxs("span",{className:`text-xs ${z.cardBg} px-2 py-1 rounded-lg ${A?"text-amber-400":"text-amber-700"} border-2 ${A?"border-amber-900":"border-amber-300"} font-medium`,children:[q.word,": ",q.meaning]},oe))})]}),xn?E.jsxs("p",{className:`${z.text} font-serif italic text-base border-t ${z.cardBorder} pt-2 mt-2`,children:['"',ne.sentences[ye].acceptableAnswers[0],'"']}):E.jsx("button",{onClick:Mt,className:`text-xs font-bold ${A?"text-slate-400 hover:text-white":"text-amber-700 hover:text-amber-900"} hover:underline`,children:"Xem p n y "})]})]}):E.jsxs("button",{onClick:St,className:`w-full flex items-center justify-center gap-2 py-4 ${A?"text-amber-500 hover:bg-amber-500/10":"bg-gradient-to-r from-amber-50 to-yellow-50 hover:from-amber-100 hover:to-yellow-100 text-amber-700 border-2 border-amber-200"} font-bold text-sm transition-colors`,children:[E.jsx(a_,{className:"w-5 h-5"})," XEM GI "]})})]})]})]})]})}sS.createRoot(document.getElementById("root")).render(E.jsx(ve.StrictMode,{children:E.jsx(qN,{})}));
